function Qg(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var bE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function ME(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var r=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:function(){return t[i]}})}),n}var e_={exports:{}},Ha={},t_={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ko=Symbol.for("react.element"),LE=Symbol.for("react.portal"),DE=Symbol.for("react.fragment"),OE=Symbol.for("react.strict_mode"),UE=Symbol.for("react.profiler"),FE=Symbol.for("react.provider"),BE=Symbol.for("react.context"),zE=Symbol.for("react.forward_ref"),VE=Symbol.for("react.suspense"),qE=Symbol.for("react.memo"),HE=Symbol.for("react.lazy"),Ih=Symbol.iterator;function GE(t){return t===null||typeof t!="object"?null:(t=Ih&&t[Ih]||t["@@iterator"],typeof t=="function"?t:null)}var n_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},i_=Object.assign,r_={};function Cr(t,e,n){this.props=t,this.context=e,this.refs=r_,this.updater=n||n_}Cr.prototype.isReactComponent={};Cr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Cr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function o_(){}o_.prototype=Cr.prototype;function jc(t,e,n){this.props=t,this.context=e,this.refs=r_,this.updater=n||n_}var Qc=jc.prototype=new o_;Qc.constructor=jc;i_(Qc,Cr.prototype);Qc.isPureReactComponent=!0;var kh=Array.isArray,s_=Object.prototype.hasOwnProperty,Xc={current:null},a_={key:!0,ref:!0,__self:!0,__source:!0};function l_(t,e,n){var i,r={},s=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)s_.call(e,i)&&!a_.hasOwnProperty(i)&&(r[i]=e[i]);var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){for(var d=Array(u),f=0;f<u;f++)d[f]=arguments[f+2];r.children=d}if(t&&t.defaultProps)for(i in u=t.defaultProps,u)r[i]===void 0&&(r[i]=u[i]);return{$$typeof:Ko,type:t,key:s,ref:a,props:r,_owner:Xc.current}}function $E(t,e){return{$$typeof:Ko,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ed(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ko}function WE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Rh=/\/+/g;function Kl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?WE(""+t.key):e.toString(36)}function Zs(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Ko:case LE:a=!0}}if(a)return a=t,r=r(a),t=i===""?"."+Kl(a,0):i,kh(r)?(n="",t!=null&&(n=t.replace(Rh,"$&/")+"/"),Zs(r,e,n,"",function(f){return f})):r!=null&&(ed(r)&&(r=$E(r,n+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(Rh,"$&/")+"/")+t)),e.push(r)),1;if(a=0,i=i===""?".":i+":",kh(t))for(var u=0;u<t.length;u++){s=t[u];var d=i+Kl(s,u);a+=Zs(s,e,n,d,r)}else if(d=GE(t),typeof d=="function")for(t=d.call(t),u=0;!(s=t.next()).done;)s=s.value,d=i+Kl(s,u++),a+=Zs(s,e,n,d,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Ts(t,e,n){if(t==null)return t;var i=[],r=0;return Zs(t,i,"","",function(s){return e.call(n,s,r++)}),i}function JE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var at={current:null},Ys={transition:null},KE={ReactCurrentDispatcher:at,ReactCurrentBatchConfig:Ys,ReactCurrentOwner:Xc};function u_(){throw Error("act(...) is not supported in production builds of React.")}le.Children={map:Ts,forEach:function(t,e,n){Ts(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ts(t,function(){e++}),e},toArray:function(t){return Ts(t,function(e){return e})||[]},only:function(t){if(!ed(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};le.Component=Cr;le.Fragment=DE;le.Profiler=UE;le.PureComponent=jc;le.StrictMode=OE;le.Suspense=VE;le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KE;le.act=u_;le.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=i_({},t.props),r=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=Xc.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(d in e)s_.call(e,d)&&!a_.hasOwnProperty(d)&&(i[d]=e[d]===void 0&&u!==void 0?u[d]:e[d])}var d=arguments.length-2;if(d===1)i.children=n;else if(1<d){u=Array(d);for(var f=0;f<d;f++)u[f]=arguments[f+2];i.children=u}return{$$typeof:Ko,type:t.type,key:r,ref:s,props:i,_owner:a}};le.createContext=function(t){return t={$$typeof:BE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:FE,_context:t},t.Consumer=t};le.createElement=l_;le.createFactory=function(t){var e=l_.bind(null,t);return e.type=t,e};le.createRef=function(){return{current:null}};le.forwardRef=function(t){return{$$typeof:zE,render:t}};le.isValidElement=ed;le.lazy=function(t){return{$$typeof:HE,_payload:{_status:-1,_result:t},_init:JE}};le.memo=function(t,e){return{$$typeof:qE,type:t,compare:e===void 0?null:e}};le.startTransition=function(t){var e=Ys.transition;Ys.transition={};try{t()}finally{Ys.transition=e}};le.unstable_act=u_;le.useCallback=function(t,e){return at.current.useCallback(t,e)};le.useContext=function(t){return at.current.useContext(t)};le.useDebugValue=function(){};le.useDeferredValue=function(t){return at.current.useDeferredValue(t)};le.useEffect=function(t,e){return at.current.useEffect(t,e)};le.useId=function(){return at.current.useId()};le.useImperativeHandle=function(t,e,n){return at.current.useImperativeHandle(t,e,n)};le.useInsertionEffect=function(t,e){return at.current.useInsertionEffect(t,e)};le.useLayoutEffect=function(t,e){return at.current.useLayoutEffect(t,e)};le.useMemo=function(t,e){return at.current.useMemo(t,e)};le.useReducer=function(t,e,n){return at.current.useReducer(t,e,n)};le.useRef=function(t){return at.current.useRef(t)};le.useState=function(t){return at.current.useState(t)};le.useSyncExternalStore=function(t,e,n){return at.current.useSyncExternalStore(t,e,n)};le.useTransition=function(){return at.current.useTransition()};le.version="18.3.1";t_.exports=le;var U=t_.exports;const Co=Xg(U),ZE=Qg({__proto__:null,default:Co},[U]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YE=U,jE=Symbol.for("react.element"),QE=Symbol.for("react.fragment"),XE=Object.prototype.hasOwnProperty,eT=YE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,tT={key:!0,ref:!0,__self:!0,__source:!0};function c_(t,e,n){var i,r={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)XE.call(e,i)&&!tT.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:jE,type:t,key:s,ref:a,props:r,_owner:eT.current}}Ha.Fragment=QE;Ha.jsx=c_;Ha.jsxs=c_;e_.exports=Ha;var A=e_.exports,Ru={},d_={exports:{}},St={},f_={exports:{}},h_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,ne){var H=F.length;F.push(ne);e:for(;0<H;){var ee=H-1>>>1,ce=F[ee];if(0<r(ce,ne))F[ee]=ne,F[H]=ce,H=ee;else break e}}function n(F){return F.length===0?null:F[0]}function i(F){if(F.length===0)return null;var ne=F[0],H=F.pop();if(H!==ne){F[0]=H;e:for(var ee=0,ce=F.length,Fe=ce>>>1;ee<Fe;){var ge=2*(ee+1)-1,fe=F[ge],re=ge+1,ut=F[re];if(0>r(fe,H))re<ce&&0>r(ut,fe)?(F[ee]=ut,F[re]=H,ee=re):(F[ee]=fe,F[ge]=H,ee=ge);else if(re<ce&&0>r(ut,H))F[ee]=ut,F[re]=H,ee=re;else break e}}return ne}function r(F,ne){var H=F.sortIndex-ne.sortIndex;return H!==0?H:F.id-ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,u=a.now();t.unstable_now=function(){return a.now()-u}}var d=[],f=[],m=1,_=null,v=3,w=!1,x=!1,P=!1,I=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(F){for(var ne=n(f);ne!==null;){if(ne.callback===null)i(f);else if(ne.startTime<=F)i(f),ne.sortIndex=ne.expirationTime,e(d,ne);else break;ne=n(f)}}function N(F){if(P=!1,S(F),!x)if(n(d)!==null)x=!0,ie(R);else{var ne=n(f);ne!==null&&je(N,ne.startTime-F)}}function R(F,ne){x=!1,P&&(P=!1,C(z),z=-1),w=!0;var H=v;try{for(S(ne),_=n(d);_!==null&&(!(_.expirationTime>ne)||F&&!j());){var ee=_.callback;if(typeof ee=="function"){_.callback=null,v=_.priorityLevel;var ce=ee(_.expirationTime<=ne);ne=t.unstable_now(),typeof ce=="function"?_.callback=ce:_===n(d)&&i(d),S(ne)}else i(d);_=n(d)}if(_!==null)var Fe=!0;else{var ge=n(f);ge!==null&&je(N,ge.startTime-ne),Fe=!1}return Fe}finally{_=null,v=H,w=!1}}var M=!1,O=null,z=-1,q=5,G=-1;function j(){return!(t.unstable_now()-G<q)}function te(){if(O!==null){var F=t.unstable_now();G=F;var ne=!0;try{ne=O(!0,F)}finally{ne?Re():(M=!1,O=null)}}else M=!1}var Re;if(typeof T=="function")Re=function(){T(te)};else if(typeof MessageChannel<"u"){var qe=new MessageChannel,rn=qe.port2;qe.port1.onmessage=te,Re=function(){rn.postMessage(null)}}else Re=function(){I(te,0)};function ie(F){O=F,M||(M=!0,Re())}function je(F,ne){z=I(function(){F(t.unstable_now())},ne)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){x||w||(x=!0,ie(R))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(F){switch(v){case 1:case 2:case 3:var ne=3;break;default:ne=v}var H=v;v=ne;try{return F()}finally{v=H}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,ne){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var H=v;v=F;try{return ne()}finally{v=H}},t.unstable_scheduleCallback=function(F,ne,H){var ee=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?ee+H:ee):H=ee,F){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=H+ce,F={id:m++,callback:ne,priorityLevel:F,startTime:H,expirationTime:ce,sortIndex:-1},H>ee?(F.sortIndex=H,e(f,F),n(d)===null&&F===n(f)&&(P?(C(z),z=-1):P=!0,je(N,H-ee))):(F.sortIndex=ce,e(d,F),x||w||(x=!0,ie(R))),F},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(F){var ne=v;return function(){var H=v;v=ne;try{return F.apply(this,arguments)}finally{v=H}}}})(h_);f_.exports=h_;var nT=f_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iT=U,Tt=nT;function V(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p_=new Set,xo={};function Pi(t,e){gr(t,e),gr(t+"Capture",e)}function gr(t,e){for(xo[t]=e,t=0;t<e.length;t++)p_.add(e[t])}var mn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nu=Object.prototype.hasOwnProperty,rT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Nh={},bh={};function oT(t){return Nu.call(bh,t)?!0:Nu.call(Nh,t)?!1:rT.test(t)?bh[t]=!0:(Nh[t]=!0,!1)}function sT(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function aT(t,e,n,i){if(e===null||typeof e>"u"||sT(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function lt(t,e,n,i,r,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var Ye={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ye[t]=new lt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ye[e]=new lt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ye[t]=new lt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ye[t]=new lt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ye[t]=new lt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ye[t]=new lt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ye[t]=new lt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ye[t]=new lt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ye[t]=new lt(t,5,!1,t.toLowerCase(),null,!1,!1)});var td=/[\-:]([a-z])/g;function nd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(td,nd);Ye[e]=new lt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(td,nd);Ye[e]=new lt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(td,nd);Ye[e]=new lt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ye[t]=new lt(t,1,!1,t.toLowerCase(),null,!1,!1)});Ye.xlinkHref=new lt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ye[t]=new lt(t,1,!1,t.toLowerCase(),null,!0,!0)});function id(t,e,n,i){var r=Ye.hasOwnProperty(e)?Ye[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(aT(e,n,r,i)&&(n=null),i||r===null?oT(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var wn=iT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ss=Symbol.for("react.element"),Ji=Symbol.for("react.portal"),Ki=Symbol.for("react.fragment"),rd=Symbol.for("react.strict_mode"),bu=Symbol.for("react.profiler"),m_=Symbol.for("react.provider"),g_=Symbol.for("react.context"),od=Symbol.for("react.forward_ref"),Mu=Symbol.for("react.suspense"),Lu=Symbol.for("react.suspense_list"),sd=Symbol.for("react.memo"),In=Symbol.for("react.lazy"),__=Symbol.for("react.offscreen"),Mh=Symbol.iterator;function Zr(t){return t===null||typeof t!="object"?null:(t=Mh&&t[Mh]||t["@@iterator"],typeof t=="function"?t:null)}var Ie=Object.assign,Zl;function oo(t){if(Zl===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Zl=e&&e[1]||""}return`
`+Zl+t}var Yl=!1;function jl(t,e){if(!t||Yl)return"";Yl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var i=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){i=f}t.call(e.prototype)}else{try{throw Error()}catch(f){i=f}t()}}catch(f){if(f&&i&&typeof f.stack=="string"){for(var r=f.stack.split(`
`),s=i.stack.split(`
`),a=r.length-1,u=s.length-1;1<=a&&0<=u&&r[a]!==s[u];)u--;for(;1<=a&&0<=u;a--,u--)if(r[a]!==s[u]){if(a!==1||u!==1)do if(a--,u--,0>u||r[a]!==s[u]){var d=`
`+r[a].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=a&&0<=u);break}}}finally{Yl=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?oo(t):""}function lT(t){switch(t.tag){case 5:return oo(t.type);case 16:return oo("Lazy");case 13:return oo("Suspense");case 19:return oo("SuspenseList");case 0:case 2:case 15:return t=jl(t.type,!1),t;case 11:return t=jl(t.type.render,!1),t;case 1:return t=jl(t.type,!0),t;default:return""}}function Du(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ki:return"Fragment";case Ji:return"Portal";case bu:return"Profiler";case rd:return"StrictMode";case Mu:return"Suspense";case Lu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case g_:return(t.displayName||"Context")+".Consumer";case m_:return(t._context.displayName||"Context")+".Provider";case od:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case sd:return e=t.displayName||null,e!==null?e:Du(t.type)||"Memo";case In:e=t._payload,t=t._init;try{return Du(t(e))}catch{}}return null}function uT(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Du(e);case 8:return e===rd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Jn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function v_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function cT(t){var e=v_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Cs(t){t._valueTracker||(t._valueTracker=cT(t))}function y_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=v_(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function ua(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ou(t,e){var n=e.checked;return Ie({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Lh(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Jn(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function w_(t,e){e=e.checked,e!=null&&id(t,"checked",e,!1)}function Uu(t,e){w_(t,e);var n=Jn(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Fu(t,e.type,n):e.hasOwnProperty("defaultValue")&&Fu(t,e.type,Jn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Dh(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Fu(t,e,n){(e!=="number"||ua(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var so=Array.isArray;function sr(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Jn(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Bu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(V(91));return Ie({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Oh(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(V(92));if(so(n)){if(1<n.length)throw Error(V(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Jn(n)}}function E_(t,e){var n=Jn(e.value),i=Jn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function Uh(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function T_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?T_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var xs,S_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(xs=xs||document.createElement("div"),xs.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=xs.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Po(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var fo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dT=["Webkit","ms","Moz","O"];Object.keys(fo).forEach(function(t){dT.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),fo[e]=fo[t]})});function C_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||fo.hasOwnProperty(t)&&fo[t]?(""+e).trim():e+"px"}function x_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=C_(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var fT=Ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vu(t,e){if(e){if(fT[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(V(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(V(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(V(61))}if(e.style!=null&&typeof e.style!="object")throw Error(V(62))}}function qu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hu=null;function ad(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Gu=null,ar=null,lr=null;function Fh(t){if(t=jo(t)){if(typeof Gu!="function")throw Error(V(280));var e=t.stateNode;e&&(e=Ka(e),Gu(t.stateNode,t.type,e))}}function P_(t){ar?lr?lr.push(t):lr=[t]:ar=t}function A_(){if(ar){var t=ar,e=lr;if(lr=ar=null,Fh(t),e)for(t=0;t<e.length;t++)Fh(e[t])}}function I_(t,e){return t(e)}function k_(){}var Ql=!1;function R_(t,e,n){if(Ql)return t(e,n);Ql=!0;try{return I_(t,e,n)}finally{Ql=!1,(ar!==null||lr!==null)&&(k_(),A_())}}function Ao(t,e){var n=t.stateNode;if(n===null)return null;var i=Ka(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(V(231,e,typeof n));return n}var $u=!1;if(mn)try{var Yr={};Object.defineProperty(Yr,"passive",{get:function(){$u=!0}}),window.addEventListener("test",Yr,Yr),window.removeEventListener("test",Yr,Yr)}catch{$u=!1}function hT(t,e,n,i,r,s,a,u,d){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(m){this.onError(m)}}var ho=!1,ca=null,da=!1,Wu=null,pT={onError:function(t){ho=!0,ca=t}};function mT(t,e,n,i,r,s,a,u,d){ho=!1,ca=null,hT.apply(pT,arguments)}function gT(t,e,n,i,r,s,a,u,d){if(mT.apply(this,arguments),ho){if(ho){var f=ca;ho=!1,ca=null}else throw Error(V(198));da||(da=!0,Wu=f)}}function Ai(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function N_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Bh(t){if(Ai(t)!==t)throw Error(V(188))}function _T(t){var e=t.alternate;if(!e){if(e=Ai(t),e===null)throw Error(V(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return Bh(r),t;if(s===i)return Bh(r),e;s=s.sibling}throw Error(V(188))}if(n.return!==i.return)n=r,i=s;else{for(var a=!1,u=r.child;u;){if(u===n){a=!0,n=r,i=s;break}if(u===i){a=!0,i=r,n=s;break}u=u.sibling}if(!a){for(u=s.child;u;){if(u===n){a=!0,n=s,i=r;break}if(u===i){a=!0,i=s,n=r;break}u=u.sibling}if(!a)throw Error(V(189))}}if(n.alternate!==i)throw Error(V(190))}if(n.tag!==3)throw Error(V(188));return n.stateNode.current===n?t:e}function b_(t){return t=_T(t),t!==null?M_(t):null}function M_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=M_(t);if(e!==null)return e;t=t.sibling}return null}var L_=Tt.unstable_scheduleCallback,zh=Tt.unstable_cancelCallback,vT=Tt.unstable_shouldYield,yT=Tt.unstable_requestPaint,be=Tt.unstable_now,wT=Tt.unstable_getCurrentPriorityLevel,ld=Tt.unstable_ImmediatePriority,D_=Tt.unstable_UserBlockingPriority,fa=Tt.unstable_NormalPriority,ET=Tt.unstable_LowPriority,O_=Tt.unstable_IdlePriority,Ga=null,tn=null;function TT(t){if(tn&&typeof tn.onCommitFiberRoot=="function")try{tn.onCommitFiberRoot(Ga,t,void 0,(t.current.flags&128)===128)}catch{}}var Gt=Math.clz32?Math.clz32:xT,ST=Math.log,CT=Math.LN2;function xT(t){return t>>>=0,t===0?32:31-(ST(t)/CT|0)|0}var Ps=64,As=4194304;function ao(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ha(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var u=a&~r;u!==0?i=ao(u):(s&=a,s!==0&&(i=ao(s)))}else a=n&~r,a!==0?i=ao(a):s!==0&&(i=ao(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Gt(e),r=1<<n,i|=t[n],e&=~r;return i}function PT(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function AT(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-Gt(s),u=1<<a,d=r[a];d===-1?(!(u&n)||u&i)&&(r[a]=PT(u,e)):d<=e&&(t.expiredLanes|=u),s&=~u}}function Ju(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function U_(){var t=Ps;return Ps<<=1,!(Ps&4194240)&&(Ps=64),t}function Xl(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Zo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Gt(e),t[e]=n}function IT(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Gt(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function ud(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Gt(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var me=0;function F_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var B_,cd,z_,V_,q_,Ku=!1,Is=[],Fn=null,Bn=null,zn=null,Io=new Map,ko=new Map,Rn=[],kT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vh(t,e){switch(t){case"focusin":case"focusout":Fn=null;break;case"dragenter":case"dragleave":Bn=null;break;case"mouseover":case"mouseout":zn=null;break;case"pointerover":case"pointerout":Io.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ko.delete(e.pointerId)}}function jr(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=jo(e),e!==null&&cd(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function RT(t,e,n,i,r){switch(e){case"focusin":return Fn=jr(Fn,t,e,n,i,r),!0;case"dragenter":return Bn=jr(Bn,t,e,n,i,r),!0;case"mouseover":return zn=jr(zn,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return Io.set(s,jr(Io.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,ko.set(s,jr(ko.get(s)||null,t,e,n,i,r)),!0}return!1}function H_(t){var e=mi(t.target);if(e!==null){var n=Ai(e);if(n!==null){if(e=n.tag,e===13){if(e=N_(n),e!==null){t.blockedOn=e,q_(t.priority,function(){z_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function js(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Zu(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Hu=i,n.target.dispatchEvent(i),Hu=null}else return e=jo(n),e!==null&&cd(e),t.blockedOn=n,!1;e.shift()}return!0}function qh(t,e,n){js(t)&&n.delete(e)}function NT(){Ku=!1,Fn!==null&&js(Fn)&&(Fn=null),Bn!==null&&js(Bn)&&(Bn=null),zn!==null&&js(zn)&&(zn=null),Io.forEach(qh),ko.forEach(qh)}function Qr(t,e){t.blockedOn===e&&(t.blockedOn=null,Ku||(Ku=!0,Tt.unstable_scheduleCallback(Tt.unstable_NormalPriority,NT)))}function Ro(t){function e(r){return Qr(r,t)}if(0<Is.length){Qr(Is[0],t);for(var n=1;n<Is.length;n++){var i=Is[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Fn!==null&&Qr(Fn,t),Bn!==null&&Qr(Bn,t),zn!==null&&Qr(zn,t),Io.forEach(e),ko.forEach(e),n=0;n<Rn.length;n++)i=Rn[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Rn.length&&(n=Rn[0],n.blockedOn===null);)H_(n),n.blockedOn===null&&Rn.shift()}var ur=wn.ReactCurrentBatchConfig,pa=!0;function bT(t,e,n,i){var r=me,s=ur.transition;ur.transition=null;try{me=1,dd(t,e,n,i)}finally{me=r,ur.transition=s}}function MT(t,e,n,i){var r=me,s=ur.transition;ur.transition=null;try{me=4,dd(t,e,n,i)}finally{me=r,ur.transition=s}}function dd(t,e,n,i){if(pa){var r=Zu(t,e,n,i);if(r===null)uu(t,e,i,ma,n),Vh(t,i);else if(RT(r,t,e,n,i))i.stopPropagation();else if(Vh(t,i),e&4&&-1<kT.indexOf(t)){for(;r!==null;){var s=jo(r);if(s!==null&&B_(s),s=Zu(t,e,n,i),s===null&&uu(t,e,i,ma,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else uu(t,e,i,null,n)}}var ma=null;function Zu(t,e,n,i){if(ma=null,t=ad(i),t=mi(t),t!==null)if(e=Ai(t),e===null)t=null;else if(n=e.tag,n===13){if(t=N_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ma=t,null}function G_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wT()){case ld:return 1;case D_:return 4;case fa:case ET:return 16;case O_:return 536870912;default:return 16}default:return 16}}var Ln=null,fd=null,Qs=null;function $_(){if(Qs)return Qs;var t,e=fd,n=e.length,i,r="value"in Ln?Ln.value:Ln.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===r[s-i];i++);return Qs=r.slice(t,1<i?1-i:void 0)}function Xs(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ks(){return!0}function Hh(){return!1}function Ct(t){function e(n,i,r,s,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(s):s[u]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ks:Hh,this.isPropagationStopped=Hh,this}return Ie(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ks)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ks)},persist:function(){},isPersistent:ks}),e}var xr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hd=Ct(xr),Yo=Ie({},xr,{view:0,detail:0}),LT=Ct(Yo),eu,tu,Xr,$a=Ie({},Yo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Xr&&(Xr&&t.type==="mousemove"?(eu=t.screenX-Xr.screenX,tu=t.screenY-Xr.screenY):tu=eu=0,Xr=t),eu)},movementY:function(t){return"movementY"in t?t.movementY:tu}}),Gh=Ct($a),DT=Ie({},$a,{dataTransfer:0}),OT=Ct(DT),UT=Ie({},Yo,{relatedTarget:0}),nu=Ct(UT),FT=Ie({},xr,{animationName:0,elapsedTime:0,pseudoElement:0}),BT=Ct(FT),zT=Ie({},xr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),VT=Ct(zT),qT=Ie({},xr,{data:0}),$h=Ct(qT),HT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},GT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$T={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function WT(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=$T[t])?!!e[t]:!1}function pd(){return WT}var JT=Ie({},Yo,{key:function(t){if(t.key){var e=HT[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Xs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?GT[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pd,charCode:function(t){return t.type==="keypress"?Xs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Xs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),KT=Ct(JT),ZT=Ie({},$a,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wh=Ct(ZT),YT=Ie({},Yo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pd}),jT=Ct(YT),QT=Ie({},xr,{propertyName:0,elapsedTime:0,pseudoElement:0}),XT=Ct(QT),eS=Ie({},$a,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),tS=Ct(eS),nS=[9,13,27,32],md=mn&&"CompositionEvent"in window,po=null;mn&&"documentMode"in document&&(po=document.documentMode);var iS=mn&&"TextEvent"in window&&!po,W_=mn&&(!md||po&&8<po&&11>=po),Jh=" ",Kh=!1;function J_(t,e){switch(t){case"keyup":return nS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function K_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Zi=!1;function rS(t,e){switch(t){case"compositionend":return K_(e);case"keypress":return e.which!==32?null:(Kh=!0,Jh);case"textInput":return t=e.data,t===Jh&&Kh?null:t;default:return null}}function oS(t,e){if(Zi)return t==="compositionend"||!md&&J_(t,e)?(t=$_(),Qs=fd=Ln=null,Zi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return W_&&e.locale!=="ko"?null:e.data;default:return null}}var sS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!sS[t.type]:e==="textarea"}function Z_(t,e,n,i){P_(i),e=ga(e,"onChange"),0<e.length&&(n=new hd("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var mo=null,No=null;function aS(t){sv(t,0)}function Wa(t){var e=Qi(t);if(y_(e))return t}function lS(t,e){if(t==="change")return e}var Y_=!1;if(mn){var iu;if(mn){var ru="oninput"in document;if(!ru){var Yh=document.createElement("div");Yh.setAttribute("oninput","return;"),ru=typeof Yh.oninput=="function"}iu=ru}else iu=!1;Y_=iu&&(!document.documentMode||9<document.documentMode)}function jh(){mo&&(mo.detachEvent("onpropertychange",j_),No=mo=null)}function j_(t){if(t.propertyName==="value"&&Wa(No)){var e=[];Z_(e,No,t,ad(t)),R_(aS,e)}}function uS(t,e,n){t==="focusin"?(jh(),mo=e,No=n,mo.attachEvent("onpropertychange",j_)):t==="focusout"&&jh()}function cS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Wa(No)}function dS(t,e){if(t==="click")return Wa(e)}function fS(t,e){if(t==="input"||t==="change")return Wa(e)}function hS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Wt=typeof Object.is=="function"?Object.is:hS;function bo(t,e){if(Wt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Nu.call(e,r)||!Wt(t[r],e[r]))return!1}return!0}function Qh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Xh(t,e){var n=Qh(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Qh(n)}}function Q_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Q_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function X_(){for(var t=window,e=ua();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ua(t.document)}return e}function gd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function pS(t){var e=X_(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Q_(n.ownerDocument.documentElement,n)){if(i!==null&&gd(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=Xh(n,s);var a=Xh(n,i);r&&a&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var mS=mn&&"documentMode"in document&&11>=document.documentMode,Yi=null,Yu=null,go=null,ju=!1;function ep(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ju||Yi==null||Yi!==ua(i)||(i=Yi,"selectionStart"in i&&gd(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),go&&bo(go,i)||(go=i,i=ga(Yu,"onSelect"),0<i.length&&(e=new hd("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Yi)))}function Rs(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ji={animationend:Rs("Animation","AnimationEnd"),animationiteration:Rs("Animation","AnimationIteration"),animationstart:Rs("Animation","AnimationStart"),transitionend:Rs("Transition","TransitionEnd")},ou={},ev={};mn&&(ev=document.createElement("div").style,"AnimationEvent"in window||(delete ji.animationend.animation,delete ji.animationiteration.animation,delete ji.animationstart.animation),"TransitionEvent"in window||delete ji.transitionend.transition);function Ja(t){if(ou[t])return ou[t];if(!ji[t])return t;var e=ji[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ev)return ou[t]=e[n];return t}var tv=Ja("animationend"),nv=Ja("animationiteration"),iv=Ja("animationstart"),rv=Ja("transitionend"),ov=new Map,tp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zn(t,e){ov.set(t,e),Pi(e,[t])}for(var su=0;su<tp.length;su++){var au=tp[su],gS=au.toLowerCase(),_S=au[0].toUpperCase()+au.slice(1);Zn(gS,"on"+_S)}Zn(tv,"onAnimationEnd");Zn(nv,"onAnimationIteration");Zn(iv,"onAnimationStart");Zn("dblclick","onDoubleClick");Zn("focusin","onFocus");Zn("focusout","onBlur");Zn(rv,"onTransitionEnd");gr("onMouseEnter",["mouseout","mouseover"]);gr("onMouseLeave",["mouseout","mouseover"]);gr("onPointerEnter",["pointerout","pointerover"]);gr("onPointerLeave",["pointerout","pointerover"]);Pi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Pi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Pi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Pi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Pi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Pi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vS=new Set("cancel close invalid load scroll toggle".split(" ").concat(lo));function np(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,gT(i,e,void 0,t),t.currentTarget=null}function sv(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var a=i.length-1;0<=a;a--){var u=i[a],d=u.instance,f=u.currentTarget;if(u=u.listener,d!==s&&r.isPropagationStopped())break e;np(r,u,f),s=d}else for(a=0;a<i.length;a++){if(u=i[a],d=u.instance,f=u.currentTarget,u=u.listener,d!==s&&r.isPropagationStopped())break e;np(r,u,f),s=d}}}if(da)throw t=Wu,da=!1,Wu=null,t}function we(t,e){var n=e[nc];n===void 0&&(n=e[nc]=new Set);var i=t+"__bubble";n.has(i)||(av(e,t,2,!1),n.add(i))}function lu(t,e,n){var i=0;e&&(i|=4),av(n,t,i,e)}var Ns="_reactListening"+Math.random().toString(36).slice(2);function Mo(t){if(!t[Ns]){t[Ns]=!0,p_.forEach(function(n){n!=="selectionchange"&&(vS.has(n)||lu(n,!1,t),lu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ns]||(e[Ns]=!0,lu("selectionchange",!1,e))}}function av(t,e,n,i){switch(G_(e)){case 1:var r=bT;break;case 4:r=MT;break;default:r=dd}n=r.bind(null,e,n,t),r=void 0,!$u||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function uu(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var u=i.stateNode.containerInfo;if(u===r||u.nodeType===8&&u.parentNode===r)break;if(a===4)for(a=i.return;a!==null;){var d=a.tag;if((d===3||d===4)&&(d=a.stateNode.containerInfo,d===r||d.nodeType===8&&d.parentNode===r))return;a=a.return}for(;u!==null;){if(a=mi(u),a===null)return;if(d=a.tag,d===5||d===6){i=s=a;continue e}u=u.parentNode}}i=i.return}R_(function(){var f=s,m=ad(n),_=[];e:{var v=ov.get(t);if(v!==void 0){var w=hd,x=t;switch(t){case"keypress":if(Xs(n)===0)break e;case"keydown":case"keyup":w=KT;break;case"focusin":x="focus",w=nu;break;case"focusout":x="blur",w=nu;break;case"beforeblur":case"afterblur":w=nu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=Gh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=OT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=jT;break;case tv:case nv:case iv:w=BT;break;case rv:w=XT;break;case"scroll":w=LT;break;case"wheel":w=tS;break;case"copy":case"cut":case"paste":w=VT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=Wh}var P=(e&4)!==0,I=!P&&t==="scroll",C=P?v!==null?v+"Capture":null:v;P=[];for(var T=f,S;T!==null;){S=T;var N=S.stateNode;if(S.tag===5&&N!==null&&(S=N,C!==null&&(N=Ao(T,C),N!=null&&P.push(Lo(T,N,S)))),I)break;T=T.return}0<P.length&&(v=new w(v,x,null,n,m),_.push({event:v,listeners:P}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",v&&n!==Hu&&(x=n.relatedTarget||n.fromElement)&&(mi(x)||x[gn]))break e;if((w||v)&&(v=m.window===m?m:(v=m.ownerDocument)?v.defaultView||v.parentWindow:window,w?(x=n.relatedTarget||n.toElement,w=f,x=x?mi(x):null,x!==null&&(I=Ai(x),x!==I||x.tag!==5&&x.tag!==6)&&(x=null)):(w=null,x=f),w!==x)){if(P=Gh,N="onMouseLeave",C="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(P=Wh,N="onPointerLeave",C="onPointerEnter",T="pointer"),I=w==null?v:Qi(w),S=x==null?v:Qi(x),v=new P(N,T+"leave",w,n,m),v.target=I,v.relatedTarget=S,N=null,mi(m)===f&&(P=new P(C,T+"enter",x,n,m),P.target=S,P.relatedTarget=I,N=P),I=N,w&&x)t:{for(P=w,C=x,T=0,S=P;S;S=Fi(S))T++;for(S=0,N=C;N;N=Fi(N))S++;for(;0<T-S;)P=Fi(P),T--;for(;0<S-T;)C=Fi(C),S--;for(;T--;){if(P===C||C!==null&&P===C.alternate)break t;P=Fi(P),C=Fi(C)}P=null}else P=null;w!==null&&ip(_,v,w,P,!1),x!==null&&I!==null&&ip(_,I,x,P,!0)}}e:{if(v=f?Qi(f):window,w=v.nodeName&&v.nodeName.toLowerCase(),w==="select"||w==="input"&&v.type==="file")var R=lS;else if(Zh(v))if(Y_)R=fS;else{R=cS;var M=uS}else(w=v.nodeName)&&w.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(R=dS);if(R&&(R=R(t,f))){Z_(_,R,n,m);break e}M&&M(t,v,f),t==="focusout"&&(M=v._wrapperState)&&M.controlled&&v.type==="number"&&Fu(v,"number",v.value)}switch(M=f?Qi(f):window,t){case"focusin":(Zh(M)||M.contentEditable==="true")&&(Yi=M,Yu=f,go=null);break;case"focusout":go=Yu=Yi=null;break;case"mousedown":ju=!0;break;case"contextmenu":case"mouseup":case"dragend":ju=!1,ep(_,n,m);break;case"selectionchange":if(mS)break;case"keydown":case"keyup":ep(_,n,m)}var O;if(md)e:{switch(t){case"compositionstart":var z="onCompositionStart";break e;case"compositionend":z="onCompositionEnd";break e;case"compositionupdate":z="onCompositionUpdate";break e}z=void 0}else Zi?J_(t,n)&&(z="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(z="onCompositionStart");z&&(W_&&n.locale!=="ko"&&(Zi||z!=="onCompositionStart"?z==="onCompositionEnd"&&Zi&&(O=$_()):(Ln=m,fd="value"in Ln?Ln.value:Ln.textContent,Zi=!0)),M=ga(f,z),0<M.length&&(z=new $h(z,t,null,n,m),_.push({event:z,listeners:M}),O?z.data=O:(O=K_(n),O!==null&&(z.data=O)))),(O=iS?rS(t,n):oS(t,n))&&(f=ga(f,"onBeforeInput"),0<f.length&&(m=new $h("onBeforeInput","beforeinput",null,n,m),_.push({event:m,listeners:f}),m.data=O))}sv(_,e)})}function Lo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ga(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Ao(t,n),s!=null&&i.unshift(Lo(t,s,r)),s=Ao(t,e),s!=null&&i.push(Lo(t,s,r))),t=t.return}return i}function Fi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ip(t,e,n,i,r){for(var s=e._reactName,a=[];n!==null&&n!==i;){var u=n,d=u.alternate,f=u.stateNode;if(d!==null&&d===i)break;u.tag===5&&f!==null&&(u=f,r?(d=Ao(n,s),d!=null&&a.unshift(Lo(n,d,u))):r||(d=Ao(n,s),d!=null&&a.push(Lo(n,d,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var yS=/\r\n?/g,wS=/\u0000|\uFFFD/g;function rp(t){return(typeof t=="string"?t:""+t).replace(yS,`
`).replace(wS,"")}function bs(t,e,n){if(e=rp(e),rp(t)!==e&&n)throw Error(V(425))}function _a(){}var Qu=null,Xu=null;function ec(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var tc=typeof setTimeout=="function"?setTimeout:void 0,ES=typeof clearTimeout=="function"?clearTimeout:void 0,op=typeof Promise=="function"?Promise:void 0,TS=typeof queueMicrotask=="function"?queueMicrotask:typeof op<"u"?function(t){return op.resolve(null).then(t).catch(SS)}:tc;function SS(t){setTimeout(function(){throw t})}function cu(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Ro(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Ro(e)}function Vn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function sp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Pr=Math.random().toString(36).slice(2),en="__reactFiber$"+Pr,Do="__reactProps$"+Pr,gn="__reactContainer$"+Pr,nc="__reactEvents$"+Pr,CS="__reactListeners$"+Pr,xS="__reactHandles$"+Pr;function mi(t){var e=t[en];if(e)return e;for(var n=t.parentNode;n;){if(e=n[gn]||n[en]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=sp(t);t!==null;){if(n=t[en])return n;t=sp(t)}return e}t=n,n=t.parentNode}return null}function jo(t){return t=t[en]||t[gn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Qi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(V(33))}function Ka(t){return t[Do]||null}var ic=[],Xi=-1;function Yn(t){return{current:t}}function Te(t){0>Xi||(t.current=ic[Xi],ic[Xi]=null,Xi--)}function ye(t,e){Xi++,ic[Xi]=t.current,t.current=e}var Kn={},nt=Yn(Kn),ht=Yn(!1),Ei=Kn;function _r(t,e){var n=t.type.contextTypes;if(!n)return Kn;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function pt(t){return t=t.childContextTypes,t!=null}function va(){Te(ht),Te(nt)}function ap(t,e,n){if(nt.current!==Kn)throw Error(V(168));ye(nt,e),ye(ht,n)}function lv(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(V(108,uT(t)||"Unknown",r));return Ie({},n,i)}function ya(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Kn,Ei=nt.current,ye(nt,t),ye(ht,ht.current),!0}function lp(t,e,n){var i=t.stateNode;if(!i)throw Error(V(169));n?(t=lv(t,e,Ei),i.__reactInternalMemoizedMergedChildContext=t,Te(ht),Te(nt),ye(nt,t)):Te(ht),ye(ht,n)}var dn=null,Za=!1,du=!1;function uv(t){dn===null?dn=[t]:dn.push(t)}function PS(t){Za=!0,uv(t)}function jn(){if(!du&&dn!==null){du=!0;var t=0,e=me;try{var n=dn;for(me=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}dn=null,Za=!1}catch(r){throw dn!==null&&(dn=dn.slice(t+1)),L_(ld,jn),r}finally{me=e,du=!1}}return null}var er=[],tr=0,wa=null,Ea=0,It=[],kt=0,Ti=null,fn=1,hn="";function ui(t,e){er[tr++]=Ea,er[tr++]=wa,wa=t,Ea=e}function cv(t,e,n){It[kt++]=fn,It[kt++]=hn,It[kt++]=Ti,Ti=t;var i=fn;t=hn;var r=32-Gt(i)-1;i&=~(1<<r),n+=1;var s=32-Gt(e)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,fn=1<<32-Gt(e)+r|n<<r|i,hn=s+t}else fn=1<<s|n<<r|i,hn=t}function _d(t){t.return!==null&&(ui(t,1),cv(t,1,0))}function vd(t){for(;t===wa;)wa=er[--tr],er[tr]=null,Ea=er[--tr],er[tr]=null;for(;t===Ti;)Ti=It[--kt],It[kt]=null,hn=It[--kt],It[kt]=null,fn=It[--kt],It[kt]=null}var Et=null,wt=null,Se=!1,Ht=null;function dv(t,e){var n=Rt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function up(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Et=t,wt=Vn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Et=t,wt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ti!==null?{id:fn,overflow:hn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Rt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Et=t,wt=null,!0):!1;default:return!1}}function rc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function oc(t){if(Se){var e=wt;if(e){var n=e;if(!up(t,e)){if(rc(t))throw Error(V(418));e=Vn(n.nextSibling);var i=Et;e&&up(t,e)?dv(i,n):(t.flags=t.flags&-4097|2,Se=!1,Et=t)}}else{if(rc(t))throw Error(V(418));t.flags=t.flags&-4097|2,Se=!1,Et=t}}}function cp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Et=t}function Ms(t){if(t!==Et)return!1;if(!Se)return cp(t),Se=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ec(t.type,t.memoizedProps)),e&&(e=wt)){if(rc(t))throw fv(),Error(V(418));for(;e;)dv(t,e),e=Vn(e.nextSibling)}if(cp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(V(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){wt=Vn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}wt=null}}else wt=Et?Vn(t.stateNode.nextSibling):null;return!0}function fv(){for(var t=wt;t;)t=Vn(t.nextSibling)}function vr(){wt=Et=null,Se=!1}function yd(t){Ht===null?Ht=[t]:Ht.push(t)}var AS=wn.ReactCurrentBatchConfig;function eo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(V(309));var i=n.stateNode}if(!i)throw Error(V(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var u=r.refs;a===null?delete u[s]:u[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(V(284));if(!n._owner)throw Error(V(290,t))}return t}function Ls(t,e){throw t=Object.prototype.toString.call(e),Error(V(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function dp(t){var e=t._init;return e(t._payload)}function hv(t){function e(C,T){if(t){var S=C.deletions;S===null?(C.deletions=[T],C.flags|=16):S.push(T)}}function n(C,T){if(!t)return null;for(;T!==null;)e(C,T),T=T.sibling;return null}function i(C,T){for(C=new Map;T!==null;)T.key!==null?C.set(T.key,T):C.set(T.index,T),T=T.sibling;return C}function r(C,T){return C=$n(C,T),C.index=0,C.sibling=null,C}function s(C,T,S){return C.index=S,t?(S=C.alternate,S!==null?(S=S.index,S<T?(C.flags|=2,T):S):(C.flags|=2,T)):(C.flags|=1048576,T)}function a(C){return t&&C.alternate===null&&(C.flags|=2),C}function u(C,T,S,N){return T===null||T.tag!==6?(T=vu(S,C.mode,N),T.return=C,T):(T=r(T,S),T.return=C,T)}function d(C,T,S,N){var R=S.type;return R===Ki?m(C,T,S.props.children,N,S.key):T!==null&&(T.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===In&&dp(R)===T.type)?(N=r(T,S.props),N.ref=eo(C,T,S),N.return=C,N):(N=sa(S.type,S.key,S.props,null,C.mode,N),N.ref=eo(C,T,S),N.return=C,N)}function f(C,T,S,N){return T===null||T.tag!==4||T.stateNode.containerInfo!==S.containerInfo||T.stateNode.implementation!==S.implementation?(T=yu(S,C.mode,N),T.return=C,T):(T=r(T,S.children||[]),T.return=C,T)}function m(C,T,S,N,R){return T===null||T.tag!==7?(T=wi(S,C.mode,N,R),T.return=C,T):(T=r(T,S),T.return=C,T)}function _(C,T,S){if(typeof T=="string"&&T!==""||typeof T=="number")return T=vu(""+T,C.mode,S),T.return=C,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Ss:return S=sa(T.type,T.key,T.props,null,C.mode,S),S.ref=eo(C,null,T),S.return=C,S;case Ji:return T=yu(T,C.mode,S),T.return=C,T;case In:var N=T._init;return _(C,N(T._payload),S)}if(so(T)||Zr(T))return T=wi(T,C.mode,S,null),T.return=C,T;Ls(C,T)}return null}function v(C,T,S,N){var R=T!==null?T.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return R!==null?null:u(C,T,""+S,N);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ss:return S.key===R?d(C,T,S,N):null;case Ji:return S.key===R?f(C,T,S,N):null;case In:return R=S._init,v(C,T,R(S._payload),N)}if(so(S)||Zr(S))return R!==null?null:m(C,T,S,N,null);Ls(C,S)}return null}function w(C,T,S,N,R){if(typeof N=="string"&&N!==""||typeof N=="number")return C=C.get(S)||null,u(T,C,""+N,R);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Ss:return C=C.get(N.key===null?S:N.key)||null,d(T,C,N,R);case Ji:return C=C.get(N.key===null?S:N.key)||null,f(T,C,N,R);case In:var M=N._init;return w(C,T,S,M(N._payload),R)}if(so(N)||Zr(N))return C=C.get(S)||null,m(T,C,N,R,null);Ls(T,N)}return null}function x(C,T,S,N){for(var R=null,M=null,O=T,z=T=0,q=null;O!==null&&z<S.length;z++){O.index>z?(q=O,O=null):q=O.sibling;var G=v(C,O,S[z],N);if(G===null){O===null&&(O=q);break}t&&O&&G.alternate===null&&e(C,O),T=s(G,T,z),M===null?R=G:M.sibling=G,M=G,O=q}if(z===S.length)return n(C,O),Se&&ui(C,z),R;if(O===null){for(;z<S.length;z++)O=_(C,S[z],N),O!==null&&(T=s(O,T,z),M===null?R=O:M.sibling=O,M=O);return Se&&ui(C,z),R}for(O=i(C,O);z<S.length;z++)q=w(O,C,z,S[z],N),q!==null&&(t&&q.alternate!==null&&O.delete(q.key===null?z:q.key),T=s(q,T,z),M===null?R=q:M.sibling=q,M=q);return t&&O.forEach(function(j){return e(C,j)}),Se&&ui(C,z),R}function P(C,T,S,N){var R=Zr(S);if(typeof R!="function")throw Error(V(150));if(S=R.call(S),S==null)throw Error(V(151));for(var M=R=null,O=T,z=T=0,q=null,G=S.next();O!==null&&!G.done;z++,G=S.next()){O.index>z?(q=O,O=null):q=O.sibling;var j=v(C,O,G.value,N);if(j===null){O===null&&(O=q);break}t&&O&&j.alternate===null&&e(C,O),T=s(j,T,z),M===null?R=j:M.sibling=j,M=j,O=q}if(G.done)return n(C,O),Se&&ui(C,z),R;if(O===null){for(;!G.done;z++,G=S.next())G=_(C,G.value,N),G!==null&&(T=s(G,T,z),M===null?R=G:M.sibling=G,M=G);return Se&&ui(C,z),R}for(O=i(C,O);!G.done;z++,G=S.next())G=w(O,C,z,G.value,N),G!==null&&(t&&G.alternate!==null&&O.delete(G.key===null?z:G.key),T=s(G,T,z),M===null?R=G:M.sibling=G,M=G);return t&&O.forEach(function(te){return e(C,te)}),Se&&ui(C,z),R}function I(C,T,S,N){if(typeof S=="object"&&S!==null&&S.type===Ki&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Ss:e:{for(var R=S.key,M=T;M!==null;){if(M.key===R){if(R=S.type,R===Ki){if(M.tag===7){n(C,M.sibling),T=r(M,S.props.children),T.return=C,C=T;break e}}else if(M.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===In&&dp(R)===M.type){n(C,M.sibling),T=r(M,S.props),T.ref=eo(C,M,S),T.return=C,C=T;break e}n(C,M);break}else e(C,M);M=M.sibling}S.type===Ki?(T=wi(S.props.children,C.mode,N,S.key),T.return=C,C=T):(N=sa(S.type,S.key,S.props,null,C.mode,N),N.ref=eo(C,T,S),N.return=C,C=N)}return a(C);case Ji:e:{for(M=S.key;T!==null;){if(T.key===M)if(T.tag===4&&T.stateNode.containerInfo===S.containerInfo&&T.stateNode.implementation===S.implementation){n(C,T.sibling),T=r(T,S.children||[]),T.return=C,C=T;break e}else{n(C,T);break}else e(C,T);T=T.sibling}T=yu(S,C.mode,N),T.return=C,C=T}return a(C);case In:return M=S._init,I(C,T,M(S._payload),N)}if(so(S))return x(C,T,S,N);if(Zr(S))return P(C,T,S,N);Ls(C,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,T!==null&&T.tag===6?(n(C,T.sibling),T=r(T,S),T.return=C,C=T):(n(C,T),T=vu(S,C.mode,N),T.return=C,C=T),a(C)):n(C,T)}return I}var yr=hv(!0),pv=hv(!1),Ta=Yn(null),Sa=null,nr=null,wd=null;function Ed(){wd=nr=Sa=null}function Td(t){var e=Ta.current;Te(Ta),t._currentValue=e}function sc(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function cr(t,e){Sa=t,wd=nr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ft=!0),t.firstContext=null)}function Mt(t){var e=t._currentValue;if(wd!==t)if(t={context:t,memoizedValue:e,next:null},nr===null){if(Sa===null)throw Error(V(308));nr=t,Sa.dependencies={lanes:0,firstContext:t}}else nr=nr.next=t;return e}var gi=null;function Sd(t){gi===null?gi=[t]:gi.push(t)}function mv(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,Sd(e)):(n.next=r.next,r.next=n),e.interleaved=n,_n(t,i)}function _n(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var kn=!1;function Cd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function pn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function qn(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,de&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,_n(t,n)}return r=i.interleaved,r===null?(e.next=e,Sd(i)):(e.next=r.next,r.next=e),i.interleaved=e,_n(t,n)}function ea(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,ud(t,n)}}function fp(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ca(t,e,n,i){var r=t.updateQueue;kn=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,u=r.shared.pending;if(u!==null){r.shared.pending=null;var d=u,f=d.next;d.next=null,a===null?s=f:a.next=f,a=d;var m=t.alternate;m!==null&&(m=m.updateQueue,u=m.lastBaseUpdate,u!==a&&(u===null?m.firstBaseUpdate=f:u.next=f,m.lastBaseUpdate=d))}if(s!==null){var _=r.baseState;a=0,m=f=d=null,u=s;do{var v=u.lane,w=u.eventTime;if((i&v)===v){m!==null&&(m=m.next={eventTime:w,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var x=t,P=u;switch(v=e,w=n,P.tag){case 1:if(x=P.payload,typeof x=="function"){_=x.call(w,_,v);break e}_=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=P.payload,v=typeof x=="function"?x.call(w,_,v):x,v==null)break e;_=Ie({},_,v);break e;case 2:kn=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,v=r.effects,v===null?r.effects=[u]:v.push(u))}else w={eventTime:w,lane:v,tag:u.tag,payload:u.payload,callback:u.callback,next:null},m===null?(f=m=w,d=_):m=m.next=w,a|=v;if(u=u.next,u===null){if(u=r.shared.pending,u===null)break;v=u,u=v.next,v.next=null,r.lastBaseUpdate=v,r.shared.pending=null}}while(!0);if(m===null&&(d=_),r.baseState=d,r.firstBaseUpdate=f,r.lastBaseUpdate=m,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Ci|=a,t.lanes=a,t.memoizedState=_}}function hp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(V(191,r));r.call(i)}}}var Qo={},nn=Yn(Qo),Oo=Yn(Qo),Uo=Yn(Qo);function _i(t){if(t===Qo)throw Error(V(174));return t}function xd(t,e){switch(ye(Uo,e),ye(Oo,t),ye(nn,Qo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:zu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=zu(e,t)}Te(nn),ye(nn,e)}function wr(){Te(nn),Te(Oo),Te(Uo)}function _v(t){_i(Uo.current);var e=_i(nn.current),n=zu(e,t.type);e!==n&&(ye(Oo,t),ye(nn,n))}function Pd(t){Oo.current===t&&(Te(nn),Te(Oo))}var Pe=Yn(0);function xa(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var fu=[];function Ad(){for(var t=0;t<fu.length;t++)fu[t]._workInProgressVersionPrimary=null;fu.length=0}var ta=wn.ReactCurrentDispatcher,hu=wn.ReactCurrentBatchConfig,Si=0,Ae=null,ze=null,Ge=null,Pa=!1,_o=!1,Fo=0,IS=0;function Qe(){throw Error(V(321))}function Id(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Wt(t[n],e[n]))return!1;return!0}function kd(t,e,n,i,r,s){if(Si=s,Ae=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ta.current=t===null||t.memoizedState===null?bS:MS,t=n(i,r),_o){s=0;do{if(_o=!1,Fo=0,25<=s)throw Error(V(301));s+=1,Ge=ze=null,e.updateQueue=null,ta.current=LS,t=n(i,r)}while(_o)}if(ta.current=Aa,e=ze!==null&&ze.next!==null,Si=0,Ge=ze=Ae=null,Pa=!1,e)throw Error(V(300));return t}function Rd(){var t=Fo!==0;return Fo=0,t}function Xt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ge===null?Ae.memoizedState=Ge=t:Ge=Ge.next=t,Ge}function Lt(){if(ze===null){var t=Ae.alternate;t=t!==null?t.memoizedState:null}else t=ze.next;var e=Ge===null?Ae.memoizedState:Ge.next;if(e!==null)Ge=e,ze=t;else{if(t===null)throw Error(V(310));ze=t,t={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},Ge===null?Ae.memoizedState=Ge=t:Ge=Ge.next=t}return Ge}function Bo(t,e){return typeof e=="function"?e(t):e}function pu(t){var e=Lt(),n=e.queue;if(n===null)throw Error(V(311));n.lastRenderedReducer=t;var i=ze,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var u=a=null,d=null,f=s;do{var m=f.lane;if((Si&m)===m)d!==null&&(d=d.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),i=f.hasEagerState?f.eagerState:t(i,f.action);else{var _={lane:m,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};d===null?(u=d=_,a=i):d=d.next=_,Ae.lanes|=m,Ci|=m}f=f.next}while(f!==null&&f!==s);d===null?a=i:d.next=u,Wt(i,e.memoizedState)||(ft=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=d,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,Ae.lanes|=s,Ci|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function mu(t){var e=Lt(),n=e.queue;if(n===null)throw Error(V(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do s=t(s,a.action),a=a.next;while(a!==r);Wt(s,e.memoizedState)||(ft=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function vv(){}function yv(t,e){var n=Ae,i=Lt(),r=e(),s=!Wt(i.memoizedState,r);if(s&&(i.memoizedState=r,ft=!0),i=i.queue,Nd(Tv.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||Ge!==null&&Ge.memoizedState.tag&1){if(n.flags|=2048,zo(9,Ev.bind(null,n,i,r,e),void 0,null),$e===null)throw Error(V(349));Si&30||wv(n,e,r)}return r}function wv(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ae.updateQueue,e===null?(e={lastEffect:null,stores:null},Ae.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Ev(t,e,n,i){e.value=n,e.getSnapshot=i,Sv(e)&&Cv(t)}function Tv(t,e,n){return n(function(){Sv(e)&&Cv(t)})}function Sv(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Wt(t,n)}catch{return!0}}function Cv(t){var e=_n(t,1);e!==null&&$t(e,t,1,-1)}function pp(t){var e=Xt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bo,lastRenderedState:t},e.queue=t,t=t.dispatch=NS.bind(null,Ae,t),[e.memoizedState,t]}function zo(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Ae.updateQueue,e===null?(e={lastEffect:null,stores:null},Ae.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function xv(){return Lt().memoizedState}function na(t,e,n,i){var r=Xt();Ae.flags|=t,r.memoizedState=zo(1|e,n,void 0,i===void 0?null:i)}function Ya(t,e,n,i){var r=Lt();i=i===void 0?null:i;var s=void 0;if(ze!==null){var a=ze.memoizedState;if(s=a.destroy,i!==null&&Id(i,a.deps)){r.memoizedState=zo(e,n,s,i);return}}Ae.flags|=t,r.memoizedState=zo(1|e,n,s,i)}function mp(t,e){return na(8390656,8,t,e)}function Nd(t,e){return Ya(2048,8,t,e)}function Pv(t,e){return Ya(4,2,t,e)}function Av(t,e){return Ya(4,4,t,e)}function Iv(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function kv(t,e,n){return n=n!=null?n.concat([t]):null,Ya(4,4,Iv.bind(null,e,t),n)}function bd(){}function Rv(t,e){var n=Lt();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Id(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function Nv(t,e){var n=Lt();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Id(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function bv(t,e,n){return Si&21?(Wt(n,e)||(n=U_(),Ae.lanes|=n,Ci|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ft=!0),t.memoizedState=n)}function kS(t,e){var n=me;me=n!==0&&4>n?n:4,t(!0);var i=hu.transition;hu.transition={};try{t(!1),e()}finally{me=n,hu.transition=i}}function Mv(){return Lt().memoizedState}function RS(t,e,n){var i=Gn(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Lv(t))Dv(e,n);else if(n=mv(t,e,n,i),n!==null){var r=st();$t(n,t,i,r),Ov(n,e,i)}}function NS(t,e,n){var i=Gn(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Lv(t))Dv(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,u=s(a,n);if(r.hasEagerState=!0,r.eagerState=u,Wt(u,a)){var d=e.interleaved;d===null?(r.next=r,Sd(e)):(r.next=d.next,d.next=r),e.interleaved=r;return}}catch{}finally{}n=mv(t,e,r,i),n!==null&&(r=st(),$t(n,t,i,r),Ov(n,e,i))}}function Lv(t){var e=t.alternate;return t===Ae||e!==null&&e===Ae}function Dv(t,e){_o=Pa=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Ov(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,ud(t,n)}}var Aa={readContext:Mt,useCallback:Qe,useContext:Qe,useEffect:Qe,useImperativeHandle:Qe,useInsertionEffect:Qe,useLayoutEffect:Qe,useMemo:Qe,useReducer:Qe,useRef:Qe,useState:Qe,useDebugValue:Qe,useDeferredValue:Qe,useTransition:Qe,useMutableSource:Qe,useSyncExternalStore:Qe,useId:Qe,unstable_isNewReconciler:!1},bS={readContext:Mt,useCallback:function(t,e){return Xt().memoizedState=[t,e===void 0?null:e],t},useContext:Mt,useEffect:mp,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,na(4194308,4,Iv.bind(null,e,t),n)},useLayoutEffect:function(t,e){return na(4194308,4,t,e)},useInsertionEffect:function(t,e){return na(4,2,t,e)},useMemo:function(t,e){var n=Xt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Xt();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=RS.bind(null,Ae,t),[i.memoizedState,t]},useRef:function(t){var e=Xt();return t={current:t},e.memoizedState=t},useState:pp,useDebugValue:bd,useDeferredValue:function(t){return Xt().memoizedState=t},useTransition:function(){var t=pp(!1),e=t[0];return t=kS.bind(null,t[1]),Xt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Ae,r=Xt();if(Se){if(n===void 0)throw Error(V(407));n=n()}else{if(n=e(),$e===null)throw Error(V(349));Si&30||wv(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,mp(Tv.bind(null,i,s,t),[t]),i.flags|=2048,zo(9,Ev.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=Xt(),e=$e.identifierPrefix;if(Se){var n=hn,i=fn;n=(i&~(1<<32-Gt(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Fo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=IS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},MS={readContext:Mt,useCallback:Rv,useContext:Mt,useEffect:Nd,useImperativeHandle:kv,useInsertionEffect:Pv,useLayoutEffect:Av,useMemo:Nv,useReducer:pu,useRef:xv,useState:function(){return pu(Bo)},useDebugValue:bd,useDeferredValue:function(t){var e=Lt();return bv(e,ze.memoizedState,t)},useTransition:function(){var t=pu(Bo)[0],e=Lt().memoizedState;return[t,e]},useMutableSource:vv,useSyncExternalStore:yv,useId:Mv,unstable_isNewReconciler:!1},LS={readContext:Mt,useCallback:Rv,useContext:Mt,useEffect:Nd,useImperativeHandle:kv,useInsertionEffect:Pv,useLayoutEffect:Av,useMemo:Nv,useReducer:mu,useRef:xv,useState:function(){return mu(Bo)},useDebugValue:bd,useDeferredValue:function(t){var e=Lt();return ze===null?e.memoizedState=t:bv(e,ze.memoizedState,t)},useTransition:function(){var t=mu(Bo)[0],e=Lt().memoizedState;return[t,e]},useMutableSource:vv,useSyncExternalStore:yv,useId:Mv,unstable_isNewReconciler:!1};function Bt(t,e){if(t&&t.defaultProps){e=Ie({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ac(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Ie({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ja={isMounted:function(t){return(t=t._reactInternals)?Ai(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=st(),r=Gn(t),s=pn(i,r);s.payload=e,n!=null&&(s.callback=n),e=qn(t,s,r),e!==null&&($t(e,t,r,i),ea(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=st(),r=Gn(t),s=pn(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=qn(t,s,r),e!==null&&($t(e,t,r,i),ea(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=st(),i=Gn(t),r=pn(n,i);r.tag=2,e!=null&&(r.callback=e),e=qn(t,r,i),e!==null&&($t(e,t,i,n),ea(e,t,i))}};function gp(t,e,n,i,r,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,a):e.prototype&&e.prototype.isPureReactComponent?!bo(n,i)||!bo(r,s):!0}function Uv(t,e,n){var i=!1,r=Kn,s=e.contextType;return typeof s=="object"&&s!==null?s=Mt(s):(r=pt(e)?Ei:nt.current,i=e.contextTypes,s=(i=i!=null)?_r(t,r):Kn),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ja,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function _p(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&ja.enqueueReplaceState(e,e.state,null)}function lc(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Cd(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Mt(s):(s=pt(e)?Ei:nt.current,r.context=_r(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(ac(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&ja.enqueueReplaceState(r,r.state,null),Ca(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Er(t,e){try{var n="",i=e;do n+=lT(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function gu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function uc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var DS=typeof WeakMap=="function"?WeakMap:Map;function Fv(t,e,n){n=pn(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){ka||(ka=!0,yc=i),uc(t,e)},n}function Bv(t,e,n){n=pn(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){uc(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){uc(t,e),typeof i!="function"&&(Hn===null?Hn=new Set([this]):Hn.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function vp(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new DS;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=ZS.bind(null,t,e,n),e.then(t,t))}function yp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function wp(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=pn(-1,1),e.tag=2,qn(n,e,1))),n.lanes|=1),t)}var OS=wn.ReactCurrentOwner,ft=!1;function rt(t,e,n,i){e.child=t===null?pv(e,null,n,i):yr(e,t.child,n,i)}function Ep(t,e,n,i,r){n=n.render;var s=e.ref;return cr(e,r),i=kd(t,e,n,i,s,r),n=Rd(),t!==null&&!ft?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,vn(t,e,r)):(Se&&n&&_d(e),e.flags|=1,rt(t,e,i,r),e.child)}function Tp(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!zd(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,zv(t,e,s,i,r)):(t=sa(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:bo,n(a,i)&&t.ref===e.ref)return vn(t,e,r)}return e.flags|=1,t=$n(s,i),t.ref=e.ref,t.return=e,e.child=t}function zv(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(bo(s,i)&&t.ref===e.ref)if(ft=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(ft=!0);else return e.lanes=t.lanes,vn(t,e,r)}return cc(t,e,n,i,r)}function Vv(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ye(rr,_t),_t|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ye(rr,_t),_t|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,ye(rr,_t),_t|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,ye(rr,_t),_t|=i;return rt(t,e,r,n),e.child}function qv(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function cc(t,e,n,i,r){var s=pt(n)?Ei:nt.current;return s=_r(e,s),cr(e,r),n=kd(t,e,n,i,s,r),i=Rd(),t!==null&&!ft?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,vn(t,e,r)):(Se&&i&&_d(e),e.flags|=1,rt(t,e,n,r),e.child)}function Sp(t,e,n,i,r){if(pt(n)){var s=!0;ya(e)}else s=!1;if(cr(e,r),e.stateNode===null)ia(t,e),Uv(e,n,i),lc(e,n,i,r),i=!0;else if(t===null){var a=e.stateNode,u=e.memoizedProps;a.props=u;var d=a.context,f=n.contextType;typeof f=="object"&&f!==null?f=Mt(f):(f=pt(n)?Ei:nt.current,f=_r(e,f));var m=n.getDerivedStateFromProps,_=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function";_||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==i||d!==f)&&_p(e,a,i,f),kn=!1;var v=e.memoizedState;a.state=v,Ca(e,i,a,r),d=e.memoizedState,u!==i||v!==d||ht.current||kn?(typeof m=="function"&&(ac(e,n,m,i),d=e.memoizedState),(u=kn||gp(e,n,u,i,v,d,f))?(_||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=d),a.props=i,a.state=d,a.context=f,i=u):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,gv(t,e),u=e.memoizedProps,f=e.type===e.elementType?u:Bt(e.type,u),a.props=f,_=e.pendingProps,v=a.context,d=n.contextType,typeof d=="object"&&d!==null?d=Mt(d):(d=pt(n)?Ei:nt.current,d=_r(e,d));var w=n.getDerivedStateFromProps;(m=typeof w=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==_||v!==d)&&_p(e,a,i,d),kn=!1,v=e.memoizedState,a.state=v,Ca(e,i,a,r);var x=e.memoizedState;u!==_||v!==x||ht.current||kn?(typeof w=="function"&&(ac(e,n,w,i),x=e.memoizedState),(f=kn||gp(e,n,f,i,v,x,d)||!1)?(m||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,x,d),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,x,d)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=x),a.props=i,a.state=x,a.context=d,i=f):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),i=!1)}return dc(t,e,n,i,s,r)}function dc(t,e,n,i,r,s){qv(t,e);var a=(e.flags&128)!==0;if(!i&&!a)return r&&lp(e,n,!1),vn(t,e,s);i=e.stateNode,OS.current=e;var u=a&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&a?(e.child=yr(e,t.child,null,s),e.child=yr(e,null,u,s)):rt(t,e,u,s),e.memoizedState=i.state,r&&lp(e,n,!0),e.child}function Hv(t){var e=t.stateNode;e.pendingContext?ap(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ap(t,e.context,!1),xd(t,e.containerInfo)}function Cp(t,e,n,i,r){return vr(),yd(r),e.flags|=256,rt(t,e,n,i),e.child}var fc={dehydrated:null,treeContext:null,retryLane:0};function hc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Gv(t,e,n){var i=e.pendingProps,r=Pe.current,s=!1,a=(e.flags&128)!==0,u;if((u=a)||(u=t!==null&&t.memoizedState===null?!1:(r&2)!==0),u?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),ye(Pe,r&1),t===null)return oc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,t=i.fallback,s?(i=e.mode,s=e.child,a={mode:"hidden",children:a},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=el(a,i,0,null),t=wi(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=hc(n),e.memoizedState=fc,t):Md(e,a));if(r=t.memoizedState,r!==null&&(u=r.dehydrated,u!==null))return US(t,e,a,i,u,r,n);if(s){s=i.fallback,a=e.mode,r=t.child,u=r.sibling;var d={mode:"hidden",children:i.children};return!(a&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=d,e.deletions=null):(i=$n(r,d),i.subtreeFlags=r.subtreeFlags&14680064),u!==null?s=$n(u,s):(s=wi(s,a,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,a=t.child.memoizedState,a=a===null?hc(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=fc,i}return s=t.child,t=s.sibling,i=$n(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Md(t,e){return e=el({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ds(t,e,n,i){return i!==null&&yd(i),yr(e,t.child,null,n),t=Md(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function US(t,e,n,i,r,s,a){if(n)return e.flags&256?(e.flags&=-257,i=gu(Error(V(422))),Ds(t,e,a,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=el({mode:"visible",children:i.children},r,0,null),s=wi(s,r,a,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&yr(e,t.child,null,a),e.child.memoizedState=hc(a),e.memoizedState=fc,s);if(!(e.mode&1))return Ds(t,e,a,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var u=i.dgst;return i=u,s=Error(V(419)),i=gu(s,i,void 0),Ds(t,e,a,i)}if(u=(a&t.childLanes)!==0,ft||u){if(i=$e,i!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|a)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,_n(t,r),$t(i,t,r,-1))}return Bd(),i=gu(Error(V(421))),Ds(t,e,a,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=YS.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,wt=Vn(r.nextSibling),Et=e,Se=!0,Ht=null,t!==null&&(It[kt++]=fn,It[kt++]=hn,It[kt++]=Ti,fn=t.id,hn=t.overflow,Ti=e),e=Md(e,i.children),e.flags|=4096,e)}function xp(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),sc(t.return,e,n)}function _u(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function $v(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(rt(t,e,i.children,n),i=Pe.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&xp(t,n,e);else if(t.tag===19)xp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(ye(Pe,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&xa(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),_u(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&xa(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}_u(e,!0,n,null,s);break;case"together":_u(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ia(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function vn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ci|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(V(153));if(e.child!==null){for(t=e.child,n=$n(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=$n(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function FS(t,e,n){switch(e.tag){case 3:Hv(e),vr();break;case 5:_v(e);break;case 1:pt(e.type)&&ya(e);break;case 4:xd(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;ye(Ta,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(ye(Pe,Pe.current&1),e.flags|=128,null):n&e.child.childLanes?Gv(t,e,n):(ye(Pe,Pe.current&1),t=vn(t,e,n),t!==null?t.sibling:null);ye(Pe,Pe.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return $v(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),ye(Pe,Pe.current),i)break;return null;case 22:case 23:return e.lanes=0,Vv(t,e,n)}return vn(t,e,n)}var Wv,pc,Jv,Kv;Wv=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};pc=function(){};Jv=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,_i(nn.current);var s=null;switch(n){case"input":r=Ou(t,r),i=Ou(t,i),s=[];break;case"select":r=Ie({},r,{value:void 0}),i=Ie({},i,{value:void 0}),s=[];break;case"textarea":r=Bu(t,r),i=Bu(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=_a)}Vu(n,i);var a;n=null;for(f in r)if(!i.hasOwnProperty(f)&&r.hasOwnProperty(f)&&r[f]!=null)if(f==="style"){var u=r[f];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(xo.hasOwnProperty(f)?s||(s=[]):(s=s||[]).push(f,null));for(f in i){var d=i[f];if(u=r!=null?r[f]:void 0,i.hasOwnProperty(f)&&d!==u&&(d!=null||u!=null))if(f==="style")if(u){for(a in u)!u.hasOwnProperty(a)||d&&d.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in d)d.hasOwnProperty(a)&&u[a]!==d[a]&&(n||(n={}),n[a]=d[a])}else n||(s||(s=[]),s.push(f,n)),n=d;else f==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,u=u?u.__html:void 0,d!=null&&u!==d&&(s=s||[]).push(f,d)):f==="children"?typeof d!="string"&&typeof d!="number"||(s=s||[]).push(f,""+d):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(xo.hasOwnProperty(f)?(d!=null&&f==="onScroll"&&we("scroll",t),s||u===d||(s=[])):(s=s||[]).push(f,d))}n&&(s=s||[]).push("style",n);var f=s;(e.updateQueue=f)&&(e.flags|=4)}};Kv=function(t,e,n,i){n!==i&&(e.flags|=4)};function to(t,e){if(!Se)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Xe(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function BS(t,e,n){var i=e.pendingProps;switch(vd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xe(e),null;case 1:return pt(e.type)&&va(),Xe(e),null;case 3:return i=e.stateNode,wr(),Te(ht),Te(nt),Ad(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Ms(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ht!==null&&(Tc(Ht),Ht=null))),pc(t,e),Xe(e),null;case 5:Pd(e);var r=_i(Uo.current);if(n=e.type,t!==null&&e.stateNode!=null)Jv(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(V(166));return Xe(e),null}if(t=_i(nn.current),Ms(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[en]=e,i[Do]=s,t=(e.mode&1)!==0,n){case"dialog":we("cancel",i),we("close",i);break;case"iframe":case"object":case"embed":we("load",i);break;case"video":case"audio":for(r=0;r<lo.length;r++)we(lo[r],i);break;case"source":we("error",i);break;case"img":case"image":case"link":we("error",i),we("load",i);break;case"details":we("toggle",i);break;case"input":Lh(i,s),we("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},we("invalid",i);break;case"textarea":Oh(i,s),we("invalid",i)}Vu(n,s),r=null;for(var a in s)if(s.hasOwnProperty(a)){var u=s[a];a==="children"?typeof u=="string"?i.textContent!==u&&(s.suppressHydrationWarning!==!0&&bs(i.textContent,u,t),r=["children",u]):typeof u=="number"&&i.textContent!==""+u&&(s.suppressHydrationWarning!==!0&&bs(i.textContent,u,t),r=["children",""+u]):xo.hasOwnProperty(a)&&u!=null&&a==="onScroll"&&we("scroll",i)}switch(n){case"input":Cs(i),Dh(i,s,!0);break;case"textarea":Cs(i),Uh(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=_a)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=T_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=a.createElement(n,{is:i.is}):(t=a.createElement(n),n==="select"&&(a=t,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):t=a.createElementNS(t,n),t[en]=e,t[Do]=i,Wv(t,e,!1,!1),e.stateNode=t;e:{switch(a=qu(n,i),n){case"dialog":we("cancel",t),we("close",t),r=i;break;case"iframe":case"object":case"embed":we("load",t),r=i;break;case"video":case"audio":for(r=0;r<lo.length;r++)we(lo[r],t);r=i;break;case"source":we("error",t),r=i;break;case"img":case"image":case"link":we("error",t),we("load",t),r=i;break;case"details":we("toggle",t),r=i;break;case"input":Lh(t,i),r=Ou(t,i),we("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Ie({},i,{value:void 0}),we("invalid",t);break;case"textarea":Oh(t,i),r=Bu(t,i),we("invalid",t);break;default:r=i}Vu(n,r),u=r;for(s in u)if(u.hasOwnProperty(s)){var d=u[s];s==="style"?x_(t,d):s==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&S_(t,d)):s==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&Po(t,d):typeof d=="number"&&Po(t,""+d):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(xo.hasOwnProperty(s)?d!=null&&s==="onScroll"&&we("scroll",t):d!=null&&id(t,s,d,a))}switch(n){case"input":Cs(t),Dh(t,i,!1);break;case"textarea":Cs(t),Uh(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Jn(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?sr(t,!!i.multiple,s,!1):i.defaultValue!=null&&sr(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=_a)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Xe(e),null;case 6:if(t&&e.stateNode!=null)Kv(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(V(166));if(n=_i(Uo.current),_i(nn.current),Ms(e)){if(i=e.stateNode,n=e.memoizedProps,i[en]=e,(s=i.nodeValue!==n)&&(t=Et,t!==null))switch(t.tag){case 3:bs(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&bs(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[en]=e,e.stateNode=i}return Xe(e),null;case 13:if(Te(Pe),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Se&&wt!==null&&e.mode&1&&!(e.flags&128))fv(),vr(),e.flags|=98560,s=!1;else if(s=Ms(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(V(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(V(317));s[en]=e}else vr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Xe(e),s=!1}else Ht!==null&&(Tc(Ht),Ht=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Pe.current&1?Ve===0&&(Ve=3):Bd())),e.updateQueue!==null&&(e.flags|=4),Xe(e),null);case 4:return wr(),pc(t,e),t===null&&Mo(e.stateNode.containerInfo),Xe(e),null;case 10:return Td(e.type._context),Xe(e),null;case 17:return pt(e.type)&&va(),Xe(e),null;case 19:if(Te(Pe),s=e.memoizedState,s===null)return Xe(e),null;if(i=(e.flags&128)!==0,a=s.rendering,a===null)if(i)to(s,!1);else{if(Ve!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=xa(t),a!==null){for(e.flags|=128,to(s,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ye(Pe,Pe.current&1|2),e.child}t=t.sibling}s.tail!==null&&be()>Tr&&(e.flags|=128,i=!0,to(s,!1),e.lanes=4194304)}else{if(!i)if(t=xa(a),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),to(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Se)return Xe(e),null}else 2*be()-s.renderingStartTime>Tr&&n!==1073741824&&(e.flags|=128,i=!0,to(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=be(),e.sibling=null,n=Pe.current,ye(Pe,i?n&1|2:n&1),e):(Xe(e),null);case 22:case 23:return Fd(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?_t&1073741824&&(Xe(e),e.subtreeFlags&6&&(e.flags|=8192)):Xe(e),null;case 24:return null;case 25:return null}throw Error(V(156,e.tag))}function zS(t,e){switch(vd(e),e.tag){case 1:return pt(e.type)&&va(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return wr(),Te(ht),Te(nt),Ad(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Pd(e),null;case 13:if(Te(Pe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(V(340));vr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Te(Pe),null;case 4:return wr(),null;case 10:return Td(e.type._context),null;case 22:case 23:return Fd(),null;case 24:return null;default:return null}}var Os=!1,et=!1,VS=typeof WeakSet=="function"?WeakSet:Set,J=null;function ir(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){ke(t,e,i)}else n.current=null}function mc(t,e,n){try{n()}catch(i){ke(t,e,i)}}var Pp=!1;function qS(t,e){if(Qu=pa,t=X_(),gd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,u=-1,d=-1,f=0,m=0,_=t,v=null;t:for(;;){for(var w;_!==n||r!==0&&_.nodeType!==3||(u=a+r),_!==s||i!==0&&_.nodeType!==3||(d=a+i),_.nodeType===3&&(a+=_.nodeValue.length),(w=_.firstChild)!==null;)v=_,_=w;for(;;){if(_===t)break t;if(v===n&&++f===r&&(u=a),v===s&&++m===i&&(d=a),(w=_.nextSibling)!==null)break;_=v,v=_.parentNode}_=w}n=u===-1||d===-1?null:{start:u,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(Xu={focusedElem:t,selectionRange:n},pa=!1,J=e;J!==null;)if(e=J,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,J=t;else for(;J!==null;){e=J;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var P=x.memoizedProps,I=x.memoizedState,C=e.stateNode,T=C.getSnapshotBeforeUpdate(e.elementType===e.type?P:Bt(e.type,P),I);C.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(V(163))}}catch(N){ke(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,J=t;break}J=e.return}return x=Pp,Pp=!1,x}function vo(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&mc(e,n,s)}r=r.next}while(r!==i)}}function Qa(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function gc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Zv(t){var e=t.alternate;e!==null&&(t.alternate=null,Zv(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[en],delete e[Do],delete e[nc],delete e[CS],delete e[xS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Yv(t){return t.tag===5||t.tag===3||t.tag===4}function Ap(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Yv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function _c(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=_a));else if(i!==4&&(t=t.child,t!==null))for(_c(t,e,n),t=t.sibling;t!==null;)_c(t,e,n),t=t.sibling}function vc(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(vc(t,e,n),t=t.sibling;t!==null;)vc(t,e,n),t=t.sibling}var Ke=null,Vt=!1;function Pn(t,e,n){for(n=n.child;n!==null;)jv(t,e,n),n=n.sibling}function jv(t,e,n){if(tn&&typeof tn.onCommitFiberUnmount=="function")try{tn.onCommitFiberUnmount(Ga,n)}catch{}switch(n.tag){case 5:et||ir(n,e);case 6:var i=Ke,r=Vt;Ke=null,Pn(t,e,n),Ke=i,Vt=r,Ke!==null&&(Vt?(t=Ke,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ke.removeChild(n.stateNode));break;case 18:Ke!==null&&(Vt?(t=Ke,n=n.stateNode,t.nodeType===8?cu(t.parentNode,n):t.nodeType===1&&cu(t,n),Ro(t)):cu(Ke,n.stateNode));break;case 4:i=Ke,r=Vt,Ke=n.stateNode.containerInfo,Vt=!0,Pn(t,e,n),Ke=i,Vt=r;break;case 0:case 11:case 14:case 15:if(!et&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&mc(n,e,a),r=r.next}while(r!==i)}Pn(t,e,n);break;case 1:if(!et&&(ir(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(u){ke(n,e,u)}Pn(t,e,n);break;case 21:Pn(t,e,n);break;case 22:n.mode&1?(et=(i=et)||n.memoizedState!==null,Pn(t,e,n),et=i):Pn(t,e,n);break;default:Pn(t,e,n)}}function Ip(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new VS),e.forEach(function(i){var r=jS.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function Ut(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,a=e,u=a;e:for(;u!==null;){switch(u.tag){case 5:Ke=u.stateNode,Vt=!1;break e;case 3:Ke=u.stateNode.containerInfo,Vt=!0;break e;case 4:Ke=u.stateNode.containerInfo,Vt=!0;break e}u=u.return}if(Ke===null)throw Error(V(160));jv(s,a,r),Ke=null,Vt=!1;var d=r.alternate;d!==null&&(d.return=null),r.return=null}catch(f){ke(r,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Qv(e,t),e=e.sibling}function Qv(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ut(e,t),Qt(t),i&4){try{vo(3,t,t.return),Qa(3,t)}catch(P){ke(t,t.return,P)}try{vo(5,t,t.return)}catch(P){ke(t,t.return,P)}}break;case 1:Ut(e,t),Qt(t),i&512&&n!==null&&ir(n,n.return);break;case 5:if(Ut(e,t),Qt(t),i&512&&n!==null&&ir(n,n.return),t.flags&32){var r=t.stateNode;try{Po(r,"")}catch(P){ke(t,t.return,P)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,u=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{u==="input"&&s.type==="radio"&&s.name!=null&&w_(r,s),qu(u,a);var f=qu(u,s);for(a=0;a<d.length;a+=2){var m=d[a],_=d[a+1];m==="style"?x_(r,_):m==="dangerouslySetInnerHTML"?S_(r,_):m==="children"?Po(r,_):id(r,m,_,f)}switch(u){case"input":Uu(r,s);break;case"textarea":E_(r,s);break;case"select":var v=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var w=s.value;w!=null?sr(r,!!s.multiple,w,!1):v!==!!s.multiple&&(s.defaultValue!=null?sr(r,!!s.multiple,s.defaultValue,!0):sr(r,!!s.multiple,s.multiple?[]:"",!1))}r[Do]=s}catch(P){ke(t,t.return,P)}}break;case 6:if(Ut(e,t),Qt(t),i&4){if(t.stateNode===null)throw Error(V(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(P){ke(t,t.return,P)}}break;case 3:if(Ut(e,t),Qt(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Ro(e.containerInfo)}catch(P){ke(t,t.return,P)}break;case 4:Ut(e,t),Qt(t);break;case 13:Ut(e,t),Qt(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(Od=be())),i&4&&Ip(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(et=(f=et)||m,Ut(e,t),et=f):Ut(e,t),Qt(t),i&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!m&&t.mode&1)for(J=t,m=t.child;m!==null;){for(_=J=m;J!==null;){switch(v=J,w=v.child,v.tag){case 0:case 11:case 14:case 15:vo(4,v,v.return);break;case 1:ir(v,v.return);var x=v.stateNode;if(typeof x.componentWillUnmount=="function"){i=v,n=v.return;try{e=i,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(P){ke(i,n,P)}}break;case 5:ir(v,v.return);break;case 22:if(v.memoizedState!==null){Rp(_);continue}}w!==null?(w.return=v,J=w):Rp(_)}m=m.sibling}e:for(m=null,_=t;;){if(_.tag===5){if(m===null){m=_;try{r=_.stateNode,f?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(u=_.stateNode,d=_.memoizedProps.style,a=d!=null&&d.hasOwnProperty("display")?d.display:null,u.style.display=C_("display",a))}catch(P){ke(t,t.return,P)}}}else if(_.tag===6){if(m===null)try{_.stateNode.nodeValue=f?"":_.memoizedProps}catch(P){ke(t,t.return,P)}}else if((_.tag!==22&&_.tag!==23||_.memoizedState===null||_===t)&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===t)break e;for(;_.sibling===null;){if(_.return===null||_.return===t)break e;m===_&&(m=null),_=_.return}m===_&&(m=null),_.sibling.return=_.return,_=_.sibling}}break;case 19:Ut(e,t),Qt(t),i&4&&Ip(t);break;case 21:break;default:Ut(e,t),Qt(t)}}function Qt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Yv(n)){var i=n;break e}n=n.return}throw Error(V(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Po(r,""),i.flags&=-33);var s=Ap(t);vc(t,s,r);break;case 3:case 4:var a=i.stateNode.containerInfo,u=Ap(t);_c(t,u,a);break;default:throw Error(V(161))}}catch(d){ke(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function HS(t,e,n){J=t,Xv(t)}function Xv(t,e,n){for(var i=(t.mode&1)!==0;J!==null;){var r=J,s=r.child;if(r.tag===22&&i){var a=r.memoizedState!==null||Os;if(!a){var u=r.alternate,d=u!==null&&u.memoizedState!==null||et;u=Os;var f=et;if(Os=a,(et=d)&&!f)for(J=r;J!==null;)a=J,d=a.child,a.tag===22&&a.memoizedState!==null?Np(r):d!==null?(d.return=a,J=d):Np(r);for(;s!==null;)J=s,Xv(s),s=s.sibling;J=r,Os=u,et=f}kp(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,J=s):kp(t)}}function kp(t){for(;J!==null;){var e=J;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:et||Qa(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!et)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Bt(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&hp(e,s,i);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}hp(e,a,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var m=f.memoizedState;if(m!==null){var _=m.dehydrated;_!==null&&Ro(_)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(V(163))}et||e.flags&512&&gc(e)}catch(v){ke(e,e.return,v)}}if(e===t){J=null;break}if(n=e.sibling,n!==null){n.return=e.return,J=n;break}J=e.return}}function Rp(t){for(;J!==null;){var e=J;if(e===t){J=null;break}var n=e.sibling;if(n!==null){n.return=e.return,J=n;break}J=e.return}}function Np(t){for(;J!==null;){var e=J;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Qa(4,e)}catch(d){ke(e,n,d)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(d){ke(e,r,d)}}var s=e.return;try{gc(e)}catch(d){ke(e,s,d)}break;case 5:var a=e.return;try{gc(e)}catch(d){ke(e,a,d)}}}catch(d){ke(e,e.return,d)}if(e===t){J=null;break}var u=e.sibling;if(u!==null){u.return=e.return,J=u;break}J=e.return}}var GS=Math.ceil,Ia=wn.ReactCurrentDispatcher,Ld=wn.ReactCurrentOwner,Nt=wn.ReactCurrentBatchConfig,de=0,$e=null,Ue=null,Ze=0,_t=0,rr=Yn(0),Ve=0,Vo=null,Ci=0,Xa=0,Dd=0,yo=null,dt=null,Od=0,Tr=1/0,un=null,ka=!1,yc=null,Hn=null,Us=!1,Dn=null,Ra=0,wo=0,wc=null,ra=-1,oa=0;function st(){return de&6?be():ra!==-1?ra:ra=be()}function Gn(t){return t.mode&1?de&2&&Ze!==0?Ze&-Ze:AS.transition!==null?(oa===0&&(oa=U_()),oa):(t=me,t!==0||(t=window.event,t=t===void 0?16:G_(t.type)),t):1}function $t(t,e,n,i){if(50<wo)throw wo=0,wc=null,Error(V(185));Zo(t,n,i),(!(de&2)||t!==$e)&&(t===$e&&(!(de&2)&&(Xa|=n),Ve===4&&Nn(t,Ze)),mt(t,i),n===1&&de===0&&!(e.mode&1)&&(Tr=be()+500,Za&&jn()))}function mt(t,e){var n=t.callbackNode;AT(t,e);var i=ha(t,t===$e?Ze:0);if(i===0)n!==null&&zh(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&zh(n),e===1)t.tag===0?PS(bp.bind(null,t)):uv(bp.bind(null,t)),TS(function(){!(de&6)&&jn()}),n=null;else{switch(F_(i)){case 1:n=ld;break;case 4:n=D_;break;case 16:n=fa;break;case 536870912:n=O_;break;default:n=fa}n=ay(n,ey.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ey(t,e){if(ra=-1,oa=0,de&6)throw Error(V(327));var n=t.callbackNode;if(dr()&&t.callbackNode!==n)return null;var i=ha(t,t===$e?Ze:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Na(t,i);else{e=i;var r=de;de|=2;var s=ny();($e!==t||Ze!==e)&&(un=null,Tr=be()+500,yi(t,e));do try{JS();break}catch(u){ty(t,u)}while(!0);Ed(),Ia.current=s,de=r,Ue!==null?e=0:($e=null,Ze=0,e=Ve)}if(e!==0){if(e===2&&(r=Ju(t),r!==0&&(i=r,e=Ec(t,r))),e===1)throw n=Vo,yi(t,0),Nn(t,i),mt(t,be()),n;if(e===6)Nn(t,i);else{if(r=t.current.alternate,!(i&30)&&!$S(r)&&(e=Na(t,i),e===2&&(s=Ju(t),s!==0&&(i=s,e=Ec(t,s))),e===1))throw n=Vo,yi(t,0),Nn(t,i),mt(t,be()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(V(345));case 2:ci(t,dt,un);break;case 3:if(Nn(t,i),(i&130023424)===i&&(e=Od+500-be(),10<e)){if(ha(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){st(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=tc(ci.bind(null,t,dt,un),e);break}ci(t,dt,un);break;case 4:if(Nn(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var a=31-Gt(i);s=1<<a,a=e[a],a>r&&(r=a),i&=~s}if(i=r,i=be()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*GS(i/1960))-i,10<i){t.timeoutHandle=tc(ci.bind(null,t,dt,un),i);break}ci(t,dt,un);break;case 5:ci(t,dt,un);break;default:throw Error(V(329))}}}return mt(t,be()),t.callbackNode===n?ey.bind(null,t):null}function Ec(t,e){var n=yo;return t.current.memoizedState.isDehydrated&&(yi(t,e).flags|=256),t=Na(t,e),t!==2&&(e=dt,dt=n,e!==null&&Tc(e)),t}function Tc(t){dt===null?dt=t:dt.push.apply(dt,t)}function $S(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Wt(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Nn(t,e){for(e&=~Dd,e&=~Xa,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Gt(e),i=1<<n;t[n]=-1,e&=~i}}function bp(t){if(de&6)throw Error(V(327));dr();var e=ha(t,0);if(!(e&1))return mt(t,be()),null;var n=Na(t,e);if(t.tag!==0&&n===2){var i=Ju(t);i!==0&&(e=i,n=Ec(t,i))}if(n===1)throw n=Vo,yi(t,0),Nn(t,e),mt(t,be()),n;if(n===6)throw Error(V(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ci(t,dt,un),mt(t,be()),null}function Ud(t,e){var n=de;de|=1;try{return t(e)}finally{de=n,de===0&&(Tr=be()+500,Za&&jn())}}function xi(t){Dn!==null&&Dn.tag===0&&!(de&6)&&dr();var e=de;de|=1;var n=Nt.transition,i=me;try{if(Nt.transition=null,me=1,t)return t()}finally{me=i,Nt.transition=n,de=e,!(de&6)&&jn()}}function Fd(){_t=rr.current,Te(rr)}function yi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,ES(n)),Ue!==null)for(n=Ue.return;n!==null;){var i=n;switch(vd(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&va();break;case 3:wr(),Te(ht),Te(nt),Ad();break;case 5:Pd(i);break;case 4:wr();break;case 13:Te(Pe);break;case 19:Te(Pe);break;case 10:Td(i.type._context);break;case 22:case 23:Fd()}n=n.return}if($e=t,Ue=t=$n(t.current,null),Ze=_t=e,Ve=0,Vo=null,Dd=Xa=Ci=0,dt=yo=null,gi!==null){for(e=0;e<gi.length;e++)if(n=gi[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var a=s.next;s.next=r,i.next=a}n.pending=i}gi=null}return t}function ty(t,e){do{var n=Ue;try{if(Ed(),ta.current=Aa,Pa){for(var i=Ae.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Pa=!1}if(Si=0,Ge=ze=Ae=null,_o=!1,Fo=0,Ld.current=null,n===null||n.return===null){Ve=1,Vo=e,Ue=null;break}e:{var s=t,a=n.return,u=n,d=e;if(e=Ze,u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var f=d,m=u,_=m.tag;if(!(m.mode&1)&&(_===0||_===11||_===15)){var v=m.alternate;v?(m.updateQueue=v.updateQueue,m.memoizedState=v.memoizedState,m.lanes=v.lanes):(m.updateQueue=null,m.memoizedState=null)}var w=yp(a);if(w!==null){w.flags&=-257,wp(w,a,u,s,e),w.mode&1&&vp(s,f,e),e=w,d=f;var x=e.updateQueue;if(x===null){var P=new Set;P.add(d),e.updateQueue=P}else x.add(d);break e}else{if(!(e&1)){vp(s,f,e),Bd();break e}d=Error(V(426))}}else if(Se&&u.mode&1){var I=yp(a);if(I!==null){!(I.flags&65536)&&(I.flags|=256),wp(I,a,u,s,e),yd(Er(d,u));break e}}s=d=Er(d,u),Ve!==4&&(Ve=2),yo===null?yo=[s]:yo.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var C=Fv(s,d,e);fp(s,C);break e;case 1:u=d;var T=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof T.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Hn===null||!Hn.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var N=Bv(s,u,e);fp(s,N);break e}}s=s.return}while(s!==null)}ry(n)}catch(R){e=R,Ue===n&&n!==null&&(Ue=n=n.return);continue}break}while(!0)}function ny(){var t=Ia.current;return Ia.current=Aa,t===null?Aa:t}function Bd(){(Ve===0||Ve===3||Ve===2)&&(Ve=4),$e===null||!(Ci&268435455)&&!(Xa&268435455)||Nn($e,Ze)}function Na(t,e){var n=de;de|=2;var i=ny();($e!==t||Ze!==e)&&(un=null,yi(t,e));do try{WS();break}catch(r){ty(t,r)}while(!0);if(Ed(),de=n,Ia.current=i,Ue!==null)throw Error(V(261));return $e=null,Ze=0,Ve}function WS(){for(;Ue!==null;)iy(Ue)}function JS(){for(;Ue!==null&&!vT();)iy(Ue)}function iy(t){var e=sy(t.alternate,t,_t);t.memoizedProps=t.pendingProps,e===null?ry(t):Ue=e,Ld.current=null}function ry(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=zS(n,e),n!==null){n.flags&=32767,Ue=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ve=6,Ue=null;return}}else if(n=BS(n,e,_t),n!==null){Ue=n;return}if(e=e.sibling,e!==null){Ue=e;return}Ue=e=t}while(e!==null);Ve===0&&(Ve=5)}function ci(t,e,n){var i=me,r=Nt.transition;try{Nt.transition=null,me=1,KS(t,e,n,i)}finally{Nt.transition=r,me=i}return null}function KS(t,e,n,i){do dr();while(Dn!==null);if(de&6)throw Error(V(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(V(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(IT(t,s),t===$e&&(Ue=$e=null,Ze=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Us||(Us=!0,ay(fa,function(){return dr(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Nt.transition,Nt.transition=null;var a=me;me=1;var u=de;de|=4,Ld.current=null,qS(t,n),Qv(n,t),pS(Xu),pa=!!Qu,Xu=Qu=null,t.current=n,HS(n),yT(),de=u,me=a,Nt.transition=s}else t.current=n;if(Us&&(Us=!1,Dn=t,Ra=r),s=t.pendingLanes,s===0&&(Hn=null),TT(n.stateNode),mt(t,be()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(ka)throw ka=!1,t=yc,yc=null,t;return Ra&1&&t.tag!==0&&dr(),s=t.pendingLanes,s&1?t===wc?wo++:(wo=0,wc=t):wo=0,jn(),null}function dr(){if(Dn!==null){var t=F_(Ra),e=Nt.transition,n=me;try{if(Nt.transition=null,me=16>t?16:t,Dn===null)var i=!1;else{if(t=Dn,Dn=null,Ra=0,de&6)throw Error(V(331));var r=de;for(de|=4,J=t.current;J!==null;){var s=J,a=s.child;if(J.flags&16){var u=s.deletions;if(u!==null){for(var d=0;d<u.length;d++){var f=u[d];for(J=f;J!==null;){var m=J;switch(m.tag){case 0:case 11:case 15:vo(8,m,s)}var _=m.child;if(_!==null)_.return=m,J=_;else for(;J!==null;){m=J;var v=m.sibling,w=m.return;if(Zv(m),m===f){J=null;break}if(v!==null){v.return=w,J=v;break}J=w}}}var x=s.alternate;if(x!==null){var P=x.child;if(P!==null){x.child=null;do{var I=P.sibling;P.sibling=null,P=I}while(P!==null)}}J=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,J=a;else e:for(;J!==null;){if(s=J,s.flags&2048)switch(s.tag){case 0:case 11:case 15:vo(9,s,s.return)}var C=s.sibling;if(C!==null){C.return=s.return,J=C;break e}J=s.return}}var T=t.current;for(J=T;J!==null;){a=J;var S=a.child;if(a.subtreeFlags&2064&&S!==null)S.return=a,J=S;else e:for(a=T;J!==null;){if(u=J,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Qa(9,u)}}catch(R){ke(u,u.return,R)}if(u===a){J=null;break e}var N=u.sibling;if(N!==null){N.return=u.return,J=N;break e}J=u.return}}if(de=r,jn(),tn&&typeof tn.onPostCommitFiberRoot=="function")try{tn.onPostCommitFiberRoot(Ga,t)}catch{}i=!0}return i}finally{me=n,Nt.transition=e}}return!1}function Mp(t,e,n){e=Er(n,e),e=Fv(t,e,1),t=qn(t,e,1),e=st(),t!==null&&(Zo(t,1,e),mt(t,e))}function ke(t,e,n){if(t.tag===3)Mp(t,t,n);else for(;e!==null;){if(e.tag===3){Mp(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Hn===null||!Hn.has(i))){t=Er(n,t),t=Bv(e,t,1),e=qn(e,t,1),t=st(),e!==null&&(Zo(e,1,t),mt(e,t));break}}e=e.return}}function ZS(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=st(),t.pingedLanes|=t.suspendedLanes&n,$e===t&&(Ze&n)===n&&(Ve===4||Ve===3&&(Ze&130023424)===Ze&&500>be()-Od?yi(t,0):Dd|=n),mt(t,e)}function oy(t,e){e===0&&(t.mode&1?(e=As,As<<=1,!(As&130023424)&&(As=4194304)):e=1);var n=st();t=_n(t,e),t!==null&&(Zo(t,e,n),mt(t,n))}function YS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),oy(t,n)}function jS(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(V(314))}i!==null&&i.delete(e),oy(t,n)}var sy;sy=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ht.current)ft=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ft=!1,FS(t,e,n);ft=!!(t.flags&131072)}else ft=!1,Se&&e.flags&1048576&&cv(e,Ea,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;ia(t,e),t=e.pendingProps;var r=_r(e,nt.current);cr(e,n),r=kd(null,e,i,t,r,n);var s=Rd();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,pt(i)?(s=!0,ya(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Cd(e),r.updater=ja,e.stateNode=r,r._reactInternals=e,lc(e,i,t,n),e=dc(null,e,i,!0,s,n)):(e.tag=0,Se&&s&&_d(e),rt(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(ia(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=XS(i),t=Bt(i,t),r){case 0:e=cc(null,e,i,t,n);break e;case 1:e=Sp(null,e,i,t,n);break e;case 11:e=Ep(null,e,i,t,n);break e;case 14:e=Tp(null,e,i,Bt(i.type,t),n);break e}throw Error(V(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Bt(i,r),cc(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Bt(i,r),Sp(t,e,i,r,n);case 3:e:{if(Hv(e),t===null)throw Error(V(387));i=e.pendingProps,s=e.memoizedState,r=s.element,gv(t,e),Ca(e,i,null,n);var a=e.memoizedState;if(i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Er(Error(V(423)),e),e=Cp(t,e,i,n,r);break e}else if(i!==r){r=Er(Error(V(424)),e),e=Cp(t,e,i,n,r);break e}else for(wt=Vn(e.stateNode.containerInfo.firstChild),Et=e,Se=!0,Ht=null,n=pv(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(vr(),i===r){e=vn(t,e,n);break e}rt(t,e,i,n)}e=e.child}return e;case 5:return _v(e),t===null&&oc(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,a=r.children,ec(i,r)?a=null:s!==null&&ec(i,s)&&(e.flags|=32),qv(t,e),rt(t,e,a,n),e.child;case 6:return t===null&&oc(e),null;case 13:return Gv(t,e,n);case 4:return xd(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=yr(e,null,i,n):rt(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Bt(i,r),Ep(t,e,i,r,n);case 7:return rt(t,e,e.pendingProps,n),e.child;case 8:return rt(t,e,e.pendingProps.children,n),e.child;case 12:return rt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,a=r.value,ye(Ta,i._currentValue),i._currentValue=a,s!==null)if(Wt(s.value,a)){if(s.children===r.children&&!ht.current){e=vn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var u=s.dependencies;if(u!==null){a=s.child;for(var d=u.firstContext;d!==null;){if(d.context===i){if(s.tag===1){d=pn(-1,n&-n),d.tag=2;var f=s.updateQueue;if(f!==null){f=f.shared;var m=f.pending;m===null?d.next=d:(d.next=m.next,m.next=d),f.pending=d}}s.lanes|=n,d=s.alternate,d!==null&&(d.lanes|=n),sc(s.return,n,e),u.lanes|=n;break}d=d.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(V(341));a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),sc(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}rt(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,cr(e,n),r=Mt(r),i=i(r),e.flags|=1,rt(t,e,i,n),e.child;case 14:return i=e.type,r=Bt(i,e.pendingProps),r=Bt(i.type,r),Tp(t,e,i,r,n);case 15:return zv(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Bt(i,r),ia(t,e),e.tag=1,pt(i)?(t=!0,ya(e)):t=!1,cr(e,n),Uv(e,i,r),lc(e,i,r,n),dc(null,e,i,!0,t,n);case 19:return $v(t,e,n);case 22:return Vv(t,e,n)}throw Error(V(156,e.tag))};function ay(t,e){return L_(t,e)}function QS(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rt(t,e,n,i){return new QS(t,e,n,i)}function zd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function XS(t){if(typeof t=="function")return zd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===od)return 11;if(t===sd)return 14}return 2}function $n(t,e){var n=t.alternate;return n===null?(n=Rt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function sa(t,e,n,i,r,s){var a=2;if(i=t,typeof t=="function")zd(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Ki:return wi(n.children,r,s,e);case rd:a=8,r|=8;break;case bu:return t=Rt(12,n,e,r|2),t.elementType=bu,t.lanes=s,t;case Mu:return t=Rt(13,n,e,r),t.elementType=Mu,t.lanes=s,t;case Lu:return t=Rt(19,n,e,r),t.elementType=Lu,t.lanes=s,t;case __:return el(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case m_:a=10;break e;case g_:a=9;break e;case od:a=11;break e;case sd:a=14;break e;case In:a=16,i=null;break e}throw Error(V(130,t==null?t:typeof t,""))}return e=Rt(a,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function wi(t,e,n,i){return t=Rt(7,t,i,e),t.lanes=n,t}function el(t,e,n,i){return t=Rt(22,t,i,e),t.elementType=__,t.lanes=n,t.stateNode={isHidden:!1},t}function vu(t,e,n){return t=Rt(6,t,null,e),t.lanes=n,t}function yu(t,e,n){return e=Rt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function eC(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xl(0),this.expirationTimes=Xl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xl(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Vd(t,e,n,i,r,s,a,u,d){return t=new eC(t,e,n,u,d),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Rt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Cd(s),t}function tC(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ji,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function ly(t){if(!t)return Kn;t=t._reactInternals;e:{if(Ai(t)!==t||t.tag!==1)throw Error(V(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(pt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(V(171))}if(t.tag===1){var n=t.type;if(pt(n))return lv(t,n,e)}return e}function uy(t,e,n,i,r,s,a,u,d){return t=Vd(n,i,!0,t,r,s,a,u,d),t.context=ly(null),n=t.current,i=st(),r=Gn(n),s=pn(i,r),s.callback=e??null,qn(n,s,r),t.current.lanes=r,Zo(t,r,i),mt(t,i),t}function tl(t,e,n,i){var r=e.current,s=st(),a=Gn(r);return n=ly(n),e.context===null?e.context=n:e.pendingContext=n,e=pn(s,a),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=qn(r,e,a),t!==null&&($t(t,r,a,s),ea(t,r,a)),a}function ba(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Lp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function qd(t,e){Lp(t,e),(t=t.alternate)&&Lp(t,e)}function nC(){return null}var cy=typeof reportError=="function"?reportError:function(t){console.error(t)};function Hd(t){this._internalRoot=t}nl.prototype.render=Hd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(V(409));tl(t,e,null,null)};nl.prototype.unmount=Hd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;xi(function(){tl(null,t,null,null)}),e[gn]=null}};function nl(t){this._internalRoot=t}nl.prototype.unstable_scheduleHydration=function(t){if(t){var e=V_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Rn.length&&e!==0&&e<Rn[n].priority;n++);Rn.splice(n,0,t),n===0&&H_(t)}};function Gd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function il(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Dp(){}function iC(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var f=ba(a);s.call(f)}}var a=uy(e,i,t,0,null,!1,!1,"",Dp);return t._reactRootContainer=a,t[gn]=a.current,Mo(t.nodeType===8?t.parentNode:t),xi(),a}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var u=i;i=function(){var f=ba(d);u.call(f)}}var d=Vd(t,0,!1,null,null,!1,!1,"",Dp);return t._reactRootContainer=d,t[gn]=d.current,Mo(t.nodeType===8?t.parentNode:t),xi(function(){tl(e,d,n,i)}),d}function rl(t,e,n,i,r){var s=n._reactRootContainer;if(s){var a=s;if(typeof r=="function"){var u=r;r=function(){var d=ba(a);u.call(d)}}tl(e,a,t,r)}else a=iC(n,e,t,r,i);return ba(a)}B_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ao(e.pendingLanes);n!==0&&(ud(e,n|1),mt(e,be()),!(de&6)&&(Tr=be()+500,jn()))}break;case 13:xi(function(){var i=_n(t,1);if(i!==null){var r=st();$t(i,t,1,r)}}),qd(t,1)}};cd=function(t){if(t.tag===13){var e=_n(t,134217728);if(e!==null){var n=st();$t(e,t,134217728,n)}qd(t,134217728)}};z_=function(t){if(t.tag===13){var e=Gn(t),n=_n(t,e);if(n!==null){var i=st();$t(n,t,e,i)}qd(t,e)}};V_=function(){return me};q_=function(t,e){var n=me;try{return me=t,e()}finally{me=n}};Gu=function(t,e,n){switch(e){case"input":if(Uu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Ka(i);if(!r)throw Error(V(90));y_(i),Uu(i,r)}}}break;case"textarea":E_(t,n);break;case"select":e=n.value,e!=null&&sr(t,!!n.multiple,e,!1)}};I_=Ud;k_=xi;var rC={usingClientEntryPoint:!1,Events:[jo,Qi,Ka,P_,A_,Ud]},no={findFiberByHostInstance:mi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},oC={bundleType:no.bundleType,version:no.version,rendererPackageName:no.rendererPackageName,rendererConfig:no.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:wn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=b_(t),t===null?null:t.stateNode},findFiberByHostInstance:no.findFiberByHostInstance||nC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fs.isDisabled&&Fs.supportsFiber)try{Ga=Fs.inject(oC),tn=Fs}catch{}}St.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rC;St.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gd(e))throw Error(V(200));return tC(t,e,null,n)};St.createRoot=function(t,e){if(!Gd(t))throw Error(V(299));var n=!1,i="",r=cy;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Vd(t,1,!1,null,null,n,!1,i,r),t[gn]=e.current,Mo(t.nodeType===8?t.parentNode:t),new Hd(e)};St.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(V(188)):(t=Object.keys(t).join(","),Error(V(268,t)));return t=b_(e),t=t===null?null:t.stateNode,t};St.flushSync=function(t){return xi(t)};St.hydrate=function(t,e,n){if(!il(e))throw Error(V(200));return rl(null,t,e,!0,n)};St.hydrateRoot=function(t,e,n){if(!Gd(t))throw Error(V(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",a=cy;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=uy(e,null,t,1,n??null,r,!1,s,a),t[gn]=e.current,Mo(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new nl(e)};St.render=function(t,e,n){if(!il(e))throw Error(V(200));return rl(null,t,e,!1,n)};St.unmountComponentAtNode=function(t){if(!il(t))throw Error(V(40));return t._reactRootContainer?(xi(function(){rl(null,null,t,!1,function(){t._reactRootContainer=null,t[gn]=null})}),!0):!1};St.unstable_batchedUpdates=Ud;St.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!il(n))throw Error(V(200));if(t==null||t._reactInternals===void 0)throw Error(V(38));return rl(t,e,n,!1,i)};St.version="18.3.1-next-f1338f8080-20240426";function dy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(dy)}catch(t){console.error(t)}}dy(),d_.exports=St;var fy=d_.exports,Op=fy;Ru.createRoot=Op.createRoot,Ru.hydrateRoot=Op.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qo(){return qo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},qo.apply(this,arguments)}var On;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(On||(On={}));const Up="popstate";function sC(t){t===void 0&&(t={});function e(i,r){let{pathname:s,search:a,hash:u}=i.location;return Sc("",{pathname:s,search:a,hash:u},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:Ma(r)}return lC(e,n,null,t)}function Me(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function $d(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function aC(){return Math.random().toString(36).substr(2,8)}function Fp(t,e){return{usr:t.state,key:t.key,idx:e}}function Sc(t,e,n,i){return n===void 0&&(n=null),qo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ar(e):e,{state:n,key:e&&e.key||i||aC()})}function Ma(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Ar(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function lC(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,a=r.history,u=On.Pop,d=null,f=m();f==null&&(f=0,a.replaceState(qo({},a.state,{idx:f}),""));function m(){return(a.state||{idx:null}).idx}function _(){u=On.Pop;let I=m(),C=I==null?null:I-f;f=I,d&&d({action:u,location:P.location,delta:C})}function v(I,C){u=On.Push;let T=Sc(P.location,I,C);f=m()+1;let S=Fp(T,f),N=P.createHref(T);try{a.pushState(S,"",N)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;r.location.assign(N)}s&&d&&d({action:u,location:P.location,delta:1})}function w(I,C){u=On.Replace;let T=Sc(P.location,I,C);f=m();let S=Fp(T,f),N=P.createHref(T);a.replaceState(S,"",N),s&&d&&d({action:u,location:P.location,delta:0})}function x(I){let C=r.location.origin!=="null"?r.location.origin:r.location.href,T=typeof I=="string"?I:Ma(I);return T=T.replace(/ $/,"%20"),Me(C,"No window.location.(origin|href) available to create URL for href: "+T),new URL(T,C)}let P={get action(){return u},get location(){return t(r,a)},listen(I){if(d)throw new Error("A history only accepts one active listener");return r.addEventListener(Up,_),d=I,()=>{r.removeEventListener(Up,_),d=null}},createHref(I){return e(r,I)},createURL:x,encodeLocation(I){let C=x(I);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:v,replace:w,go(I){return a.go(I)}};return P}var Bp;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Bp||(Bp={}));function uC(t,e,n){return n===void 0&&(n="/"),cC(t,e,n)}function cC(t,e,n,i){let r=typeof e=="string"?Ar(e):e,s=Wd(r.pathname||"/",n);if(s==null)return null;let a=hy(t);dC(a);let u=null;for(let d=0;u==null&&d<a.length;++d){let f=SC(s);u=wC(a[d],f)}return u}function hy(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(s,a,u)=>{let d={relativePath:u===void 0?s.path||"":u,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};d.relativePath.startsWith("/")&&(Me(d.relativePath.startsWith(i),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(i.length));let f=Wn([i,d.relativePath]),m=n.concat(d);s.children&&s.children.length>0&&(Me(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),hy(s.children,e,m,f)),!(s.path==null&&!s.index)&&e.push({path:f,score:vC(f,s.index),routesMeta:m})};return t.forEach((s,a)=>{var u;if(s.path===""||!((u=s.path)!=null&&u.includes("?")))r(s,a);else for(let d of py(s.path))r(s,a,d)}),e}function py(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let a=py(i.join("/")),u=[];return u.push(...a.map(d=>d===""?s:[s,d].join("/"))),r&&u.push(...a),u.map(d=>t.startsWith("/")&&d===""?"/":d)}function dC(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:yC(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const fC=/^:[\w-]+$/,hC=3,pC=2,mC=1,gC=10,_C=-2,zp=t=>t==="*";function vC(t,e){let n=t.split("/"),i=n.length;return n.some(zp)&&(i+=_C),e&&(i+=pC),n.filter(r=>!zp(r)).reduce((r,s)=>r+(fC.test(s)?hC:s===""?mC:gC),i)}function yC(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function wC(t,e,n){let{routesMeta:i}=t,r={},s="/",a=[];for(let u=0;u<i.length;++u){let d=i[u],f=u===i.length-1,m=s==="/"?e:e.slice(s.length)||"/",_=EC({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},m),v=d.route;if(!_)return null;Object.assign(r,_.params),a.push({params:r,pathname:Wn([s,_.pathname]),pathnameBase:IC(Wn([s,_.pathnameBase])),route:v}),_.pathnameBase!=="/"&&(s=Wn([s,_.pathnameBase]))}return a}function EC(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=TC(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],a=s.replace(/(.)\/+$/,"$1"),u=r.slice(1);return{params:i.reduce((f,m,_)=>{let{paramName:v,isOptional:w}=m;if(v==="*"){let P=u[_]||"";a=s.slice(0,s.length-P.length).replace(/(.)\/+$/,"$1")}const x=u[_];return w&&!x?f[v]=void 0:f[v]=(x||"").replace(/%2F/g,"/"),f},{}),pathname:s,pathnameBase:a,pattern:t}}function TC(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),$d(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,u,d)=>(i.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function SC(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return $d(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Wd(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}const CC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xC=t=>CC.test(t);function PC(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?Ar(t):t,s;if(n)if(xC(n))s=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),$d(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?s=Vp(n.substring(1),"/"):s=Vp(n,e)}else s=e;return{pathname:s,search:kC(i),hash:RC(r)}}function Vp(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function wu(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function AC(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Jd(t,e){let n=AC(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function Kd(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=Ar(t):(r=qo({},t),Me(!r.pathname||!r.pathname.includes("?"),wu("?","pathname","search",r)),Me(!r.pathname||!r.pathname.includes("#"),wu("#","pathname","hash",r)),Me(!r.search||!r.search.includes("#"),wu("#","search","hash",r)));let s=t===""||r.pathname==="",a=s?"/":r.pathname,u;if(a==null)u=n;else{let _=e.length-1;if(!i&&a.startsWith("..")){let v=a.split("/");for(;v[0]==="..";)v.shift(),_-=1;r.pathname=v.join("/")}u=_>=0?e[_]:"/"}let d=PC(r,u),f=a&&a!=="/"&&a.endsWith("/"),m=(s||a===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(f||m)&&(d.pathname+="/"),d}const Wn=t=>t.join("/").replace(/\/\/+/g,"/"),IC=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),kC=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,RC=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function NC(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const my=["post","put","patch","delete"];new Set(my);const bC=["get",...my];new Set(bC);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ho(){return Ho=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ho.apply(this,arguments)}const Zd=U.createContext(null),MC=U.createContext(null),Qn=U.createContext(null),ol=U.createContext(null),Xn=U.createContext({outlet:null,matches:[],isDataRoute:!1}),gy=U.createContext(null);function LC(t,e){let{relative:n}=e===void 0?{}:e;Ir()||Me(!1);let{basename:i,navigator:r}=U.useContext(Qn),{hash:s,pathname:a,search:u}=vy(t,{relative:n}),d=a;return i!=="/"&&(d=a==="/"?i:Wn([i,a])),r.createHref({pathname:d,search:u,hash:s})}function Ir(){return U.useContext(ol)!=null}function Xo(){return Ir()||Me(!1),U.useContext(ol).location}function _y(t){U.useContext(Qn).static||U.useLayoutEffect(t)}function es(){let{isDataRoute:t}=U.useContext(Xn);return t?JC():DC()}function DC(){Ir()||Me(!1);let t=U.useContext(Zd),{basename:e,future:n,navigator:i}=U.useContext(Qn),{matches:r}=U.useContext(Xn),{pathname:s}=Xo(),a=JSON.stringify(Jd(r,n.v7_relativeSplatPath)),u=U.useRef(!1);return _y(()=>{u.current=!0}),U.useCallback(function(f,m){if(m===void 0&&(m={}),!u.current)return;if(typeof f=="number"){i.go(f);return}let _=Kd(f,JSON.parse(a),s,m.relative==="path");t==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:Wn([e,_.pathname])),(m.replace?i.replace:i.push)(_,m.state,m)},[e,i,a,s,t])}function vy(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=U.useContext(Qn),{matches:r}=U.useContext(Xn),{pathname:s}=Xo(),a=JSON.stringify(Jd(r,i.v7_relativeSplatPath));return U.useMemo(()=>Kd(t,JSON.parse(a),s,n==="path"),[t,a,s,n])}function OC(t,e){return UC(t,e)}function UC(t,e,n,i){Ir()||Me(!1);let{navigator:r}=U.useContext(Qn),{matches:s}=U.useContext(Xn),a=s[s.length-1],u=a?a.params:{};a&&a.pathname;let d=a?a.pathnameBase:"/";a&&a.route;let f=Xo(),m;if(e){var _;let I=typeof e=="string"?Ar(e):e;d==="/"||(_=I.pathname)!=null&&_.startsWith(d)||Me(!1),m=I}else m=f;let v=m.pathname||"/",w=v;if(d!=="/"){let I=d.replace(/^\//,"").split("/");w="/"+v.replace(/^\//,"").split("/").slice(I.length).join("/")}let x=uC(t,{pathname:w}),P=qC(x&&x.map(I=>Object.assign({},I,{params:Object.assign({},u,I.params),pathname:Wn([d,r.encodeLocation?r.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?d:Wn([d,r.encodeLocation?r.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),s,n,i);return e&&P?U.createElement(ol.Provider,{value:{location:Ho({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:On.Pop}},P):P}function FC(){let t=WC(),e=NC(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return U.createElement(U.Fragment,null,U.createElement("h2",null,"Unexpected Application Error!"),U.createElement("h3",{style:{fontStyle:"italic"}},e),n?U.createElement("pre",{style:r},n):null,null)}const BC=U.createElement(FC,null);class zC extends U.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?U.createElement(Xn.Provider,{value:this.props.routeContext},U.createElement(gy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function VC(t){let{routeContext:e,match:n,children:i}=t,r=U.useContext(Zd);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),U.createElement(Xn.Provider,{value:e},i)}function qC(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=i)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,u=(r=n)==null?void 0:r.errors;if(u!=null){let m=a.findIndex(_=>_.route.id&&(u==null?void 0:u[_.route.id])!==void 0);m>=0||Me(!1),a=a.slice(0,Math.min(a.length,m+1))}let d=!1,f=-1;if(n&&i&&i.v7_partialHydration)for(let m=0;m<a.length;m++){let _=a[m];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(f=m),_.route.id){let{loaderData:v,errors:w}=n,x=_.route.loader&&v[_.route.id]===void 0&&(!w||w[_.route.id]===void 0);if(_.route.lazy||x){d=!0,f>=0?a=a.slice(0,f+1):a=[a[0]];break}}}return a.reduceRight((m,_,v)=>{let w,x=!1,P=null,I=null;n&&(w=u&&_.route.id?u[_.route.id]:void 0,P=_.route.errorElement||BC,d&&(f<0&&v===0?(KC("route-fallback"),x=!0,I=null):f===v&&(x=!0,I=_.route.hydrateFallbackElement||null)));let C=e.concat(a.slice(0,v+1)),T=()=>{let S;return w?S=P:x?S=I:_.route.Component?S=U.createElement(_.route.Component,null):_.route.element?S=_.route.element:S=m,U.createElement(VC,{match:_,routeContext:{outlet:m,matches:C,isDataRoute:n!=null},children:S})};return n&&(_.route.ErrorBoundary||_.route.errorElement||v===0)?U.createElement(zC,{location:n.location,revalidation:n.revalidation,component:P,error:w,children:T(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):T()},null)}var yy=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(yy||{}),wy=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(wy||{});function HC(t){let e=U.useContext(Zd);return e||Me(!1),e}function GC(t){let e=U.useContext(MC);return e||Me(!1),e}function $C(t){let e=U.useContext(Xn);return e||Me(!1),e}function Ey(t){let e=$C(),n=e.matches[e.matches.length-1];return n.route.id||Me(!1),n.route.id}function WC(){var t;let e=U.useContext(gy),n=GC(),i=Ey();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function JC(){let{router:t}=HC(yy.UseNavigateStable),e=Ey(wy.UseNavigateStable),n=U.useRef(!1);return _y(()=>{n.current=!0}),U.useCallback(function(r,s){s===void 0&&(s={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,Ho({fromRouteId:e},s)))},[t,e])}const qp={};function KC(t,e,n){qp[t]||(qp[t]=!0)}function ZC(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function YC(t){let{to:e,replace:n,state:i,relative:r}=t;Ir()||Me(!1);let{future:s,static:a}=U.useContext(Qn),{matches:u}=U.useContext(Xn),{pathname:d}=Xo(),f=es(),m=Kd(e,Jd(u,s.v7_relativeSplatPath),d,r==="path"),_=JSON.stringify(m);return U.useEffect(()=>f(JSON.parse(_),{replace:n,state:i,relative:r}),[f,_,r,n,i]),null}function uo(t){Me(!1)}function jC(t){let{basename:e="/",children:n=null,location:i,navigationType:r=On.Pop,navigator:s,static:a=!1,future:u}=t;Ir()&&Me(!1);let d=e.replace(/^\/*/,"/"),f=U.useMemo(()=>({basename:d,navigator:s,static:a,future:Ho({v7_relativeSplatPath:!1},u)}),[d,u,s,a]);typeof i=="string"&&(i=Ar(i));let{pathname:m="/",search:_="",hash:v="",state:w=null,key:x="default"}=i,P=U.useMemo(()=>{let I=Wd(m,d);return I==null?null:{location:{pathname:I,search:_,hash:v,state:w,key:x},navigationType:r}},[d,m,_,v,w,x,r]);return P==null?null:U.createElement(Qn.Provider,{value:f},U.createElement(ol.Provider,{children:n,value:P}))}function QC(t){let{children:e,location:n}=t;return OC(Cc(e),n)}new Promise(()=>{});function Cc(t,e){e===void 0&&(e=[]);let n=[];return U.Children.forEach(t,(i,r)=>{if(!U.isValidElement(i))return;let s=[...e,r];if(i.type===U.Fragment){n.push.apply(n,Cc(i.props.children,s));return}i.type!==uo&&Me(!1),!i.props.index||!i.props.children||Me(!1);let a={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=Cc(i.props.children,s)),n.push(a)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xc(){return xc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},xc.apply(this,arguments)}function XC(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function ex(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function tx(t,e){return t.button===0&&(!e||e==="_self")&&!ex(t)}const nx=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],ix="6";try{window.__reactRouterVersion=ix}catch{}const rx="startTransition",Hp=ZE[rx];function ox(t){let{basename:e,children:n,future:i,window:r}=t,s=U.useRef();s.current==null&&(s.current=sC({window:r,v5Compat:!0}));let a=s.current,[u,d]=U.useState({action:a.action,location:a.location}),{v7_startTransition:f}=i||{},m=U.useCallback(_=>{f&&Hp?Hp(()=>d(_)):d(_)},[d,f]);return U.useLayoutEffect(()=>a.listen(m),[a,m]),U.useEffect(()=>ZC(i),[i]),U.createElement(jC,{basename:e,children:n,location:u.location,navigationType:u.action,navigator:a,future:i})}const sx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ax=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bn=U.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:s,replace:a,state:u,target:d,to:f,preventScrollReset:m,viewTransition:_}=e,v=XC(e,nx),{basename:w}=U.useContext(Qn),x,P=!1;if(typeof f=="string"&&ax.test(f)&&(x=f,sx))try{let S=new URL(window.location.href),N=f.startsWith("//")?new URL(S.protocol+f):new URL(f),R=Wd(N.pathname,w);N.origin===S.origin&&R!=null?f=R+N.search+N.hash:P=!0}catch{}let I=LC(f,{relative:r}),C=lx(f,{replace:a,state:u,target:d,preventScrollReset:m,relative:r,viewTransition:_});function T(S){i&&i(S),S.defaultPrevented||C(S)}return U.createElement("a",xc({},v,{href:x||I,onClick:P||s?i:T,ref:n,target:d}))});var Gp;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Gp||(Gp={}));var $p;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})($p||($p={}));function lx(t,e){let{target:n,replace:i,state:r,preventScrollReset:s,relative:a,viewTransition:u}=e===void 0?{}:e,d=es(),f=Xo(),m=vy(t,{relative:a});return U.useCallback(_=>{if(tx(_,n)){_.preventDefault();let v=i!==void 0?i:Ma(f)===Ma(m);d(t,{replace:v,state:r,preventScrollReset:s,relative:a,viewTransition:u})}},[f,d,m,i,r,n,t,s,a,u])}var Pc=function(t,e){return Pc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])},Pc(t,e)};function Ty(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Pc(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var La=function(){return La=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},La.apply(this,arguments)};function kr(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function Sy(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var u=t.length-1;u>=0;u--)(a=t[u])&&(s=(r<3?a(s):r>3?a(e,n,s):a(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s}function Cy(t,e){return function(n,i){e(n,i,t)}}function xy(t,e,n,i,r,s){function a(C){if(C!==void 0&&typeof C!="function")throw new TypeError("Function expected");return C}for(var u=i.kind,d=u==="getter"?"get":u==="setter"?"set":"value",f=!e&&t?i.static?t:t.prototype:null,m=e||(f?Object.getOwnPropertyDescriptor(f,i.name):{}),_,v=!1,w=n.length-1;w>=0;w--){var x={};for(var P in i)x[P]=P==="access"?{}:i[P];for(var P in i.access)x.access[P]=i.access[P];x.addInitializer=function(C){if(v)throw new TypeError("Cannot add initializers after decoration has completed");s.push(a(C||null))};var I=(0,n[w])(u==="accessor"?{get:m.get,set:m.set}:m[d],x);if(u==="accessor"){if(I===void 0)continue;if(I===null||typeof I!="object")throw new TypeError("Object expected");(_=a(I.get))&&(m.get=_),(_=a(I.set))&&(m.set=_),(_=a(I.init))&&r.unshift(_)}else(_=a(I))&&(u==="field"?r.unshift(_):m[d]=_)}f&&Object.defineProperty(f,i.name,m),v=!0}function Py(t,e,n){for(var i=arguments.length>2,r=0;r<e.length;r++)n=i?e[r].call(t,n):e[r].call(t);return i?n:void 0}function Ay(t){return typeof t=="symbol"?t:"".concat(t)}function Iy(t,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function ky(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function K(t,e,n,i){function r(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function u(m){try{f(i.next(m))}catch(_){a(_)}}function d(m){try{f(i.throw(m))}catch(_){a(_)}}function f(m){m.done?s(m.value):r(m.value).then(u,d)}f((i=i.apply(t,e||[])).next())})}function Ry(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,r,s,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(f){return function(m){return d([f,m])}}function d(f){if(i)throw new TypeError("Generator is already executing.");for(;a&&(a=0,f[0]&&(n=0)),n;)try{if(i=1,r&&(s=f[0]&2?r.return:f[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,f[1])).done)return s;switch(r=0,s&&(f=[f[0]&2,s.value]),f[0]){case 0:case 1:s=f;break;case 4:return n.label++,{value:f[1],done:!1};case 5:n.label++,r=f[1],f=[0];continue;case 7:f=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(f[0]===6||f[0]===2)){n=0;continue}if(f[0]===3&&(!s||f[1]>s[0]&&f[1]<s[3])){n.label=f[1];break}if(f[0]===6&&n.label<s[1]){n.label=s[1],s=f;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(f);break}s[2]&&n.ops.pop(),n.trys.pop();continue}f=e.call(t,n)}catch(m){f=[6,m],r=0}finally{i=s=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}var sl=Object.create?function(t,e,n,i){i===void 0&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]};function Ny(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&sl(e,t,n)}function Da(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Yd(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),r,s=[],a;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(u){a={error:u}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return s}function by(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Yd(arguments[e]));return t}function My(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var i=Array(t),r=0,e=0;e<n;e++)for(var s=arguments[e],a=0,u=s.length;a<u;a++,r++)i[r]=s[a];return i}function Ly(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))}function Sr(t){return this instanceof Sr?(this.v=t,this):new Sr(t)}function Dy(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,s=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",a),r[Symbol.asyncIterator]=function(){return this},r;function a(w){return function(x){return Promise.resolve(x).then(w,_)}}function u(w,x){i[w]&&(r[w]=function(P){return new Promise(function(I,C){s.push([w,P,I,C])>1||d(w,P)})},x&&(r[w]=x(r[w])))}function d(w,x){try{f(i[w](x))}catch(P){v(s[0][3],P)}}function f(w){w.value instanceof Sr?Promise.resolve(w.value.v).then(m,_):v(s[0][2],w)}function m(w){d("next",w)}function _(w){d("throw",w)}function v(w,x){w(x),s.shift(),s.length&&d(s[0][0],s[0][1])}}function Oy(t){var e,n;return e={},i("next"),i("throw",function(r){throw r}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(r,s){e[r]=t[r]?function(a){return(n=!n)?{value:Sr(t[r](a)),done:!1}:s?s(a):a}:s}}function Uy(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Da=="function"?Da(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(s){n[s]=t[s]&&function(a){return new Promise(function(u,d){a=t[s](a),r(u,d,a.done,a.value)})}}function r(s,a,u,d){Promise.resolve(d).then(function(f){s({value:f,done:u})},a)}}function Fy(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var ux=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},Ac=function(t){return Ac=Object.getOwnPropertyNames||function(e){var n=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[n.length]=i);return n},Ac(t)};function By(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n=Ac(t),i=0;i<n.length;i++)n[i]!=="default"&&sl(e,t,n[i]);return ux(e,t),e}function zy(t){return t&&t.__esModule?t:{default:t}}function Vy(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)}function qy(t,e,n,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(t,n):r?r.value=n:e.set(t,n),n}function Hy(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function Gy(t,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var i,r;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=e[Symbol.asyncDispose]}if(i===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=e[Symbol.dispose],n&&(r=i)}if(typeof i!="function")throw new TypeError("Object not disposable.");r&&(i=function(){try{r.call(this)}catch(s){return Promise.reject(s)}}),t.stack.push({value:e,dispose:i,async:n})}else n&&t.stack.push({async:!0});return e}var cx=typeof SuppressedError=="function"?SuppressedError:function(t,e,n){var i=new Error(n);return i.name="SuppressedError",i.error=t,i.suppressed=e,i};function $y(t){function e(s){t.error=t.hasError?new cx(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var n,i=0;function r(){for(;n=t.stack.pop();)try{if(!n.async&&i===1)return i=0,t.stack.push(n),Promise.resolve().then(r);if(n.dispose){var s=n.dispose.call(n.value);if(n.async)return i|=2,Promise.resolve(s).then(r,function(a){return e(a),r()})}else i|=1}catch(a){e(a)}if(i===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return r()}function Wy(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,i,r,s,a){return i?e?".jsx":".js":r&&(!s||!a)?n:r+s+"."+a.toLowerCase()+"js"}):t}const dx={__extends:Ty,__assign:La,__rest:kr,__decorate:Sy,__param:Cy,__esDecorate:xy,__runInitializers:Py,__propKey:Ay,__setFunctionName:Iy,__metadata:ky,__awaiter:K,__generator:Ry,__createBinding:sl,__exportStar:Ny,__values:Da,__read:Yd,__spread:by,__spreadArrays:My,__spreadArray:Ly,__await:Sr,__asyncGenerator:Dy,__asyncDelegator:Oy,__asyncValues:Uy,__makeTemplateObject:Fy,__importStar:By,__importDefault:zy,__classPrivateFieldGet:Vy,__classPrivateFieldSet:qy,__classPrivateFieldIn:Hy,__addDisposableResource:Gy,__disposeResources:$y,__rewriteRelativeImportExtension:Wy},fx=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Gy,get __assign(){return La},__asyncDelegator:Oy,__asyncGenerator:Dy,__asyncValues:Uy,__await:Sr,__awaiter:K,__classPrivateFieldGet:Vy,__classPrivateFieldIn:Hy,__classPrivateFieldSet:qy,__createBinding:sl,__decorate:Sy,__disposeResources:$y,__esDecorate:xy,__exportStar:Ny,__extends:Ty,__generator:Ry,__importDefault:zy,__importStar:By,__makeTemplateObject:Fy,__metadata:ky,__param:Cy,__propKey:Ay,__read:Yd,__rest:kr,__rewriteRelativeImportExtension:Wy,__runInitializers:Py,__setFunctionName:Iy,__spread:by,__spreadArray:Ly,__spreadArrays:My,__values:Da,default:dx},Symbol.toStringTag,{value:"Module"})),hx=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class jd extends Error{constructor(e,n="FunctionsError",i){super(e),this.name=n,this.context=i}}class px extends jd{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Wp extends jd{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Jp extends jd{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Ic;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Ic||(Ic={}));class mx{constructor(e,{headers:n={},customFetch:i,region:r=Ic.Any}={}){this.url=e,this.headers=n,this.region=r,this.fetch=hx(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return K(this,arguments,void 0,function*(n,i={}){var r;let s,a;try{const{headers:u,method:d,body:f,signal:m,timeout:_}=i;let v={},{region:w}=i;w||(w=this.region);const x=new URL(`${this.url}/${n}`);w&&w!=="any"&&(v["x-region"]=w,x.searchParams.set("forceFunctionRegion",w));let P;f&&(u&&!Object.prototype.hasOwnProperty.call(u,"Content-Type")||!u)?typeof Blob<"u"&&f instanceof Blob||f instanceof ArrayBuffer?(v["Content-Type"]="application/octet-stream",P=f):typeof f=="string"?(v["Content-Type"]="text/plain",P=f):typeof FormData<"u"&&f instanceof FormData?P=f:(v["Content-Type"]="application/json",P=JSON.stringify(f)):P=f;let I=m;_&&(a=new AbortController,s=setTimeout(()=>a.abort(),_),m?(I=a.signal,m.addEventListener("abort",()=>a.abort())):I=a.signal);const C=yield this.fetch(x.toString(),{method:d||"POST",headers:Object.assign(Object.assign(Object.assign({},v),this.headers),u),body:P,signal:I}).catch(R=>{throw new px(R)}),T=C.headers.get("x-relay-error");if(T&&T==="true")throw new Wp(C);if(!C.ok)throw new Jp(C);let S=((r=C.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),N;return S==="application/json"?N=yield C.json():S==="application/octet-stream"||S==="application/pdf"?N=yield C.blob():S==="text/event-stream"?N=C:S==="multipart/form-data"?N=yield C.formData():N=yield C.text(),{data:N,error:null,response:C}}catch(u){return{data:null,error:u,response:u instanceof Jp||u instanceof Wp?u.context:void 0}}finally{s&&clearTimeout(s)}})}}var ot={};const Rr=ME(fx);var Bs={},zs={},Vs={},qs={},Hs={},Gs={},Kp;function Jy(){if(Kp)return Gs;Kp=1,Object.defineProperty(Gs,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Gs.default=t,Gs}var Zp;function Ky(){if(Zp)return Hs;Zp=1,Object.defineProperty(Hs,"__esModule",{value:!0});const e=Rr.__importDefault(Jy());class n{constructor(r){var s,a;this.shouldThrowOnError=!1,this.method=r.method,this.url=r.url,this.headers=new Headers(r.headers),this.schema=r.schema,this.body=r.body,this.shouldThrowOnError=(s=r.shouldThrowOnError)!==null&&s!==void 0?s:!1,this.signal=r.signal,this.isMaybeSingle=(a=r.isMaybeSingle)!==null&&a!==void 0?a:!1,r.fetch?this.fetch=r.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(r,s){return this.headers=new Headers(this.headers),this.headers.set(r,s),this}then(r,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let u=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async d=>{var f,m,_,v;let w=null,x=null,P=null,I=d.status,C=d.statusText;if(d.ok){if(this.method!=="HEAD"){const R=await d.text();R===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((f=this.headers.get("Accept"))===null||f===void 0)&&f.includes("application/vnd.pgrst.plan+text"))?x=R:x=JSON.parse(R))}const S=(m=this.headers.get("Prefer"))===null||m===void 0?void 0:m.match(/count=(exact|planned|estimated)/),N=(_=d.headers.get("content-range"))===null||_===void 0?void 0:_.split("/");S&&N&&N.length>1&&(P=parseInt(N[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(x)&&(x.length>1?(w={code:"PGRST116",details:`Results contain ${x.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},x=null,P=null,I=406,C="Not Acceptable"):x.length===1?x=x[0]:x=null)}else{const S=await d.text();try{w=JSON.parse(S),Array.isArray(w)&&d.status===404&&(x=[],w=null,I=200,C="OK")}catch{d.status===404&&S===""?(I=204,C="No Content"):w={message:S}}if(w&&this.isMaybeSingle&&(!((v=w==null?void 0:w.details)===null||v===void 0)&&v.includes("0 rows"))&&(w=null,I=200,C="OK"),w&&this.shouldThrowOnError)throw new e.default(w)}return{error:w,data:x,count:P,status:I,statusText:C}});return this.shouldThrowOnError||(u=u.catch(d=>{var f,m,_,v,w,x;let P="";const I=d==null?void 0:d.cause;if(I){const C=(f=I==null?void 0:I.message)!==null&&f!==void 0?f:"",T=(m=I==null?void 0:I.code)!==null&&m!==void 0?m:"";P=`${(_=d==null?void 0:d.name)!==null&&_!==void 0?_:"FetchError"}: ${d==null?void 0:d.message}`,P+=`

Caused by: ${(v=I==null?void 0:I.name)!==null&&v!==void 0?v:"Error"}: ${C}`,T&&(P+=` (${T})`),I!=null&&I.stack&&(P+=`
${I.stack}`)}else P=(w=d==null?void 0:d.stack)!==null&&w!==void 0?w:"";return{error:{message:`${(x=d==null?void 0:d.name)!==null&&x!==void 0?x:"FetchError"}: ${d==null?void 0:d.message}`,details:P,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),u.then(r,s)}returns(){return this}overrideTypes(){return this}}return Hs.default=n,Hs}var Yp;function Zy(){if(Yp)return qs;Yp=1,Object.defineProperty(qs,"__esModule",{value:!0});const e=Rr.__importDefault(Ky());class n extends e.default{select(r){let s=!1;const a=(r??"*").split("").map(u=>/\s/.test(u)&&!s?"":(u==='"'&&(s=!s),u)).join("");return this.url.searchParams.set("select",a),this.headers.append("Prefer","return=representation"),this}order(r,{ascending:s=!0,nullsFirst:a,foreignTable:u,referencedTable:d=u}={}){const f=d?`${d}.order`:"order",m=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${m?`${m},`:""}${r}.${s?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(r,{foreignTable:s,referencedTable:a=s}={}){const u=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(u,`${r}`),this}range(r,s,{foreignTable:a,referencedTable:u=a}={}){const d=typeof u>"u"?"offset":`${u}.offset`,f=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(d,`${r}`),this.url.searchParams.set(f,`${s-r+1}`),this}abortSignal(r){return this.signal=r,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:r=!1,verbose:s=!1,settings:a=!1,buffers:u=!1,wal:d=!1,format:f="text"}={}){var m;const _=[r?"analyze":null,s?"verbose":null,a?"settings":null,u?"buffers":null,d?"wal":null].filter(Boolean).join("|"),v=(m=this.headers.get("Accept"))!==null&&m!==void 0?m:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${f}; for="${v}"; options=${_};`),f==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(r){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${r}`),this}}return qs.default=n,qs}var jp;function Qd(){if(jp)return Vs;jp=1,Object.defineProperty(Vs,"__esModule",{value:!0});const e=Rr.__importDefault(Zy()),n=new RegExp("[,()]");class i extends e.default{eq(s,a){return this.url.searchParams.append(s,`eq.${a}`),this}neq(s,a){return this.url.searchParams.append(s,`neq.${a}`),this}gt(s,a){return this.url.searchParams.append(s,`gt.${a}`),this}gte(s,a){return this.url.searchParams.append(s,`gte.${a}`),this}lt(s,a){return this.url.searchParams.append(s,`lt.${a}`),this}lte(s,a){return this.url.searchParams.append(s,`lte.${a}`),this}like(s,a){return this.url.searchParams.append(s,`like.${a}`),this}likeAllOf(s,a){return this.url.searchParams.append(s,`like(all).{${a.join(",")}}`),this}likeAnyOf(s,a){return this.url.searchParams.append(s,`like(any).{${a.join(",")}}`),this}ilike(s,a){return this.url.searchParams.append(s,`ilike.${a}`),this}ilikeAllOf(s,a){return this.url.searchParams.append(s,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(s,a){return this.url.searchParams.append(s,`ilike(any).{${a.join(",")}}`),this}regexMatch(s,a){return this.url.searchParams.append(s,`match.${a}`),this}regexIMatch(s,a){return this.url.searchParams.append(s,`imatch.${a}`),this}is(s,a){return this.url.searchParams.append(s,`is.${a}`),this}isDistinct(s,a){return this.url.searchParams.append(s,`isdistinct.${a}`),this}in(s,a){const u=Array.from(new Set(a)).map(d=>typeof d=="string"&&n.test(d)?`"${d}"`:`${d}`).join(",");return this.url.searchParams.append(s,`in.(${u})`),this}contains(s,a){return typeof a=="string"?this.url.searchParams.append(s,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(s,`cs.{${a.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(a)}`),this}containedBy(s,a){return typeof a=="string"?this.url.searchParams.append(s,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(s,`cd.{${a.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(a)}`),this}rangeGt(s,a){return this.url.searchParams.append(s,`sr.${a}`),this}rangeGte(s,a){return this.url.searchParams.append(s,`nxl.${a}`),this}rangeLt(s,a){return this.url.searchParams.append(s,`sl.${a}`),this}rangeLte(s,a){return this.url.searchParams.append(s,`nxr.${a}`),this}rangeAdjacent(s,a){return this.url.searchParams.append(s,`adj.${a}`),this}overlaps(s,a){return typeof a=="string"?this.url.searchParams.append(s,`ov.${a}`):this.url.searchParams.append(s,`ov.{${a.join(",")}}`),this}textSearch(s,a,{config:u,type:d}={}){let f="";d==="plain"?f="pl":d==="phrase"?f="ph":d==="websearch"&&(f="w");const m=u===void 0?"":`(${u})`;return this.url.searchParams.append(s,`${f}fts${m}.${a}`),this}match(s){return Object.entries(s).forEach(([a,u])=>{this.url.searchParams.append(a,`eq.${u}`)}),this}not(s,a,u){return this.url.searchParams.append(s,`not.${a}.${u}`),this}or(s,{foreignTable:a,referencedTable:u=a}={}){const d=u?`${u}.or`:"or";return this.url.searchParams.append(d,`(${s})`),this}filter(s,a,u){return this.url.searchParams.append(s,`${a}.${u}`),this}}return Vs.default=i,Vs}var Qp;function Yy(){if(Qp)return zs;Qp=1,Object.defineProperty(zs,"__esModule",{value:!0});const e=Rr.__importDefault(Qd());class n{constructor(r,{headers:s={},schema:a,fetch:u}){this.url=r,this.headers=new Headers(s),this.schema=a,this.fetch=u}select(r,s){const{head:a=!1,count:u}=s??{},d=a?"HEAD":"GET";let f=!1;const m=(r??"*").split("").map(_=>/\s/.test(_)&&!f?"":(_==='"'&&(f=!f),_)).join("");return this.url.searchParams.set("select",m),u&&this.headers.append("Prefer",`count=${u}`),new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(r,{count:s,defaultToNull:a=!0}={}){var u;const d="POST";if(s&&this.headers.append("Prefer",`count=${s}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(r)){const f=r.reduce((m,_)=>m.concat(Object.keys(_)),[]);if(f.length>0){const m=[...new Set(f)].map(_=>`"${_}"`);this.url.searchParams.set("columns",m.join(","))}}return new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}upsert(r,{onConflict:s,ignoreDuplicates:a=!1,count:u,defaultToNull:d=!0}={}){var f;const m="POST";if(this.headers.append("Prefer",`resolution=${a?"ignore":"merge"}-duplicates`),s!==void 0&&this.url.searchParams.set("on_conflict",s),u&&this.headers.append("Prefer",`count=${u}`),d||this.headers.append("Prefer","missing=default"),Array.isArray(r)){const _=r.reduce((v,w)=>v.concat(Object.keys(w)),[]);if(_.length>0){const v=[...new Set(_)].map(w=>`"${w}"`);this.url.searchParams.set("columns",v.join(","))}}return new e.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}update(r,{count:s}={}){var a;const u="PATCH";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}delete({count:r}={}){var s;const a="DELETE";return r&&this.headers.append("Prefer",`count=${r}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}}return zs.default=n,zs}var Xp;function gx(){if(Xp)return Bs;Xp=1,Object.defineProperty(Bs,"__esModule",{value:!0});const t=Rr,e=t.__importDefault(Yy()),n=t.__importDefault(Qd());class i{constructor(s,{headers:a={},schema:u,fetch:d}={}){this.url=s,this.headers=new Headers(a),this.schemaName=u,this.fetch=d}from(s){if(!s||typeof s!="string"||s.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const a=new URL(`${this.url}/${s}`);return new e.default(a,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(s){return new i(this.url,{headers:this.headers,schema:s,fetch:this.fetch})}rpc(s,a={},{head:u=!1,get:d=!1,count:f}={}){var m;let _;const v=new URL(`${this.url}/rpc/${s}`);let w;u||d?(_=u?"HEAD":"GET",Object.entries(a).filter(([P,I])=>I!==void 0).map(([P,I])=>[P,Array.isArray(I)?`{${I.join(",")}}`:`${I}`]).forEach(([P,I])=>{v.searchParams.append(P,I)})):(_="POST",w=a);const x=new Headers(this.headers);return f&&x.set("Prefer",`count=${f}`),new n.default({method:_,url:v,headers:x,schema:this.schemaName,body:w,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}}return Bs.default=i,Bs}Object.defineProperty(ot,"__esModule",{value:!0});var jy=ot.PostgrestError=a0=ot.PostgrestBuilder=o0=ot.PostgrestTransformBuilder=i0=ot.PostgrestFilterBuilder=t0=ot.PostgrestQueryBuilder=Xy=ot.PostgrestClient=void 0;const Nr=Rr,Qy=Nr.__importDefault(gx());var Xy=ot.PostgrestClient=Qy.default;const e0=Nr.__importDefault(Yy());var t0=ot.PostgrestQueryBuilder=e0.default;const n0=Nr.__importDefault(Qd());var i0=ot.PostgrestFilterBuilder=n0.default;const r0=Nr.__importDefault(Zy());var o0=ot.PostgrestTransformBuilder=r0.default;const s0=Nr.__importDefault(Ky());var a0=ot.PostgrestBuilder=s0.default;const l0=Nr.__importDefault(Jy());jy=ot.PostgrestError=l0.default;var u0=ot.default={PostgrestClient:Qy.default,PostgrestQueryBuilder:e0.default,PostgrestFilterBuilder:n0.default,PostgrestTransformBuilder:r0.default,PostgrestBuilder:s0.default,PostgrestError:l0.default};const _x=Qg({__proto__:null,get PostgrestBuilder(){return a0},get PostgrestClient(){return Xy},get PostgrestError(){return jy},get PostgrestFilterBuilder(){return i0},get PostgrestQueryBuilder(){return t0},get PostgrestTransformBuilder(){return o0},default:u0},[ot]),{PostgrestClient:vx,PostgrestQueryBuilder:$L,PostgrestFilterBuilder:WL,PostgrestTransformBuilder:JL,PostgrestBuilder:KL,PostgrestError:ZL}=u0||_x;class yx{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const i=n.node,r=parseInt(i.replace(/^v/,"").split(".")[0]);return r>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const i=this.getWebSocketConstructor();return new i(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const wx="2.86.0",Ex=`realtime-js/${wx}`,c0="1.0.0",Tx="2.0.0",em=c0,kc=1e4,Sx=1e3,Cx=100;var fi;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(fi||(fi={}));var Be;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Be||(Be={}));var qt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(qt||(qt={}));var Rc;(function(t){t.websocket="websocket"})(Rc||(Rc={}));var hi;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(hi||(hi={}));class xx{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let i=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(i))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,i;const r=(i=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&i!==void 0?i:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,r)}_encodeJsonUserBroadcastPush(e){var n,i;const r=(i=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&i!==void 0?i:{},a=new TextEncoder().encode(JSON.stringify(r)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,a)}_encodeUserBroadcastPush(e,n,i){var r,s;const a=e.topic,u=(r=e.ref)!==null&&r!==void 0?r:"",d=(s=e.join_ref)!==null&&s!==void 0?s:"",f=e.payload.event,m=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},_=Object.keys(m).length===0?"":JSON.stringify(m);if(d.length>255)throw new Error(`joinRef length ${d.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`ref length ${u.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`topic length ${a.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`userEvent length ${f.length} exceeds maximum of 255`);if(_.length>255)throw new Error(`metadata length ${_.length} exceeds maximum of 255`);const v=this.USER_BROADCAST_PUSH_META_LENGTH+d.length+u.length+a.length+f.length+_.length,w=new ArrayBuffer(this.HEADER_LENGTH+v);let x=new DataView(w),P=0;x.setUint8(P++,this.KINDS.userBroadcastPush),x.setUint8(P++,d.length),x.setUint8(P++,u.length),x.setUint8(P++,a.length),x.setUint8(P++,f.length),x.setUint8(P++,_.length),x.setUint8(P++,n),Array.from(d,C=>x.setUint8(P++,C.charCodeAt(0))),Array.from(u,C=>x.setUint8(P++,C.charCodeAt(0))),Array.from(a,C=>x.setUint8(P++,C.charCodeAt(0))),Array.from(f,C=>x.setUint8(P++,C.charCodeAt(0))),Array.from(_,C=>x.setUint8(P++,C.charCodeAt(0)));var I=new Uint8Array(w.byteLength+i.byteLength);return I.set(new Uint8Array(w),0),I.set(new Uint8Array(i),w.byteLength),I.buffer}decode(e,n){if(this._isArrayBuffer(e)){let i=this._binaryDecode(e);return n(i)}if(typeof e=="string"){const i=JSON.parse(e),[r,s,a,u,d]=i;return n({join_ref:r,ref:s,topic:a,event:u,payload:d})}return n({})}_binaryDecode(e){const n=new DataView(e),i=n.getUint8(0),r=new TextDecoder;switch(i){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,r)}}_decodeUserBroadcast(e,n,i){const r=n.getUint8(1),s=n.getUint8(2),a=n.getUint8(3),u=n.getUint8(4);let d=this.HEADER_LENGTH+4;const f=i.decode(e.slice(d,d+r));d=d+r;const m=i.decode(e.slice(d,d+s));d=d+s;const _=i.decode(e.slice(d,d+a));d=d+a;const v=e.slice(d,e.byteLength),w=u===this.JSON_ENCODING?JSON.parse(i.decode(v)):v,x={type:this.BROADCAST_EVENT,event:m,payload:w};return a>0&&(x.meta=JSON.parse(_)),{join_ref:null,ref:null,topic:f,event:this.BROADCAST_EVENT,payload:x}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([i])=>n.includes(i)))}}class d0{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ve;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(ve||(ve={}));const tm=(t,e,n={})=>{var i;const r=(i=n.skipTypes)!==null&&i!==void 0?i:[];return e?Object.keys(e).reduce((s,a)=>(s[a]=Px(a,t,e,r),s),{}):{}},Px=(t,e,n,i)=>{const r=e.find(u=>u.name===t),s=r==null?void 0:r.type,a=n[t];return s&&!i.includes(s)?f0(s,a):Nc(a)},f0=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return Rx(e,n)}switch(t){case ve.bool:return Ax(e);case ve.float4:case ve.float8:case ve.int2:case ve.int4:case ve.int8:case ve.numeric:case ve.oid:return Ix(e);case ve.json:case ve.jsonb:return kx(e);case ve.timestamp:return Nx(e);case ve.abstime:case ve.date:case ve.daterange:case ve.int4range:case ve.int8range:case ve.money:case ve.reltime:case ve.text:case ve.time:case ve.timestamptz:case ve.timetz:case ve.tsrange:case ve.tstzrange:return Nc(e);default:return Nc(e)}},Nc=t=>t,Ax=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Ix=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},kx=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Rx=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,i=t[n];if(t[0]==="{"&&i==="}"){let s;const a=t.slice(1,n);try{s=JSON.parse("["+a+"]")}catch{s=a?a.split(","):[]}return s.map(u=>f0(e,u))}return t},Nx=t=>typeof t=="string"?t.replace(" ","T"):t,h0=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Eu{constructor(e,n,i={},r=kc){this.channel=e,this.event=n,this.payload=i,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var i;return this._hasReceived(e)&&n((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(i=>i.status===e).forEach(i=>i.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var nm;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(nm||(nm={}));class Eo{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},r=>{const{onJoin:s,onLeave:a,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Eo.syncState(this.state,r,s,a),this.pendingDiffs.forEach(d=>{this.state=Eo.syncDiff(this.state,d,s,a)}),this.pendingDiffs=[],u()}),this.channel._on(i.diff,{},r=>{const{onJoin:s,onLeave:a,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=Eo.syncDiff(this.state,r,s,a),u())}),this.onJoin((r,s,a)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:s,newPresences:a})}),this.onLeave((r,s,a)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:s,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,i,r){const s=this.cloneDeep(e),a=this.transformState(n),u={},d={};return this.map(s,(f,m)=>{a[f]||(d[f]=m)}),this.map(a,(f,m)=>{const _=s[f];if(_){const v=m.map(I=>I.presence_ref),w=_.map(I=>I.presence_ref),x=m.filter(I=>w.indexOf(I.presence_ref)<0),P=_.filter(I=>v.indexOf(I.presence_ref)<0);x.length>0&&(u[f]=x),P.length>0&&(d[f]=P)}else u[f]=m}),this.syncDiff(s,{joins:u,leaves:d},i,r)}static syncDiff(e,n,i,r){const{joins:s,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return i||(i=()=>{}),r||(r=()=>{}),this.map(s,(u,d)=>{var f;const m=(f=e[u])!==null&&f!==void 0?f:[];if(e[u]=this.cloneDeep(d),m.length>0){const _=e[u].map(w=>w.presence_ref),v=m.filter(w=>_.indexOf(w.presence_ref)<0);e[u].unshift(...v)}i(u,m,d)}),this.map(a,(u,d)=>{let f=e[u];if(!f)return;const m=d.map(_=>_.presence_ref);f=f.filter(_=>m.indexOf(_.presence_ref)<0),e[u]=f,r(u,f,d),f.length===0&&delete e[u]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(i=>n(i,e[i]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,i)=>{const r=e[i];return"metas"in r?n[i]=r.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[i]=r,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var im;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(im||(im={}));var To;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(To||(To={}));var cn;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(cn||(cn={}));class Xd{constructor(e,n={config:{}},i){var r,s;if(this.topic=e,this.params=n,this.socket=i,this.bindings={},this.state=Be.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Eu(this,qt.join,this.params,this.timeout),this.rejoinTimer=new d0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Be.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Be.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Be.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Be.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Be.errored,this.rejoinTimer.scheduleTimeout())}),this._on(qt.reply,{},(a,u)=>{this._trigger(this._replyEventName(u),a)}),this.presence=new Eo(this),this.broadcastEndpointURL=h0(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(r=this.params.config)===null||r===void 0?void 0:r.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var i,r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Be.closed){const{config:{broadcast:a,presence:u,private:d}}=this.params,f=(r=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(w=>w.filter))!==null&&r!==void 0?r:[],m=!!this.bindings[To.PRESENCE]&&this.bindings[To.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,_={},v={broadcast:a,presence:Object.assign(Object.assign({},u),{enabled:m}),postgres_changes:f,private:d};this.socket.accessTokenValue&&(_.access_token=this.socket.accessTokenValue),this._onError(w=>e==null?void 0:e(cn.CHANNEL_ERROR,w)),this._onClose(()=>e==null?void 0:e(cn.CLOSED)),this.updateJoinPayload(Object.assign({config:v},_)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:w})=>{var x;if(this.socket.setAuth(),w===void 0){e==null||e(cn.SUBSCRIBED);return}else{const P=this.bindings.postgres_changes,I=(x=P==null?void 0:P.length)!==null&&x!==void 0?x:0,C=[];for(let T=0;T<I;T++){const S=P[T],{filter:{event:N,schema:R,table:M,filter:O}}=S,z=w&&w[T];if(z&&z.event===N&&z.schema===R&&z.table===M&&z.filter===O)C.push(Object.assign(Object.assign({},S),{id:z.id}));else{this.unsubscribe(),this.state=Be.errored,e==null||e(cn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=C,e&&e(cn.SUBSCRIBED);return}}).receive("error",w=>{this.state=Be.errored,e==null||e(cn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(w).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(cn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,i){return this.state===Be.joined&&e===To.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,i)}async httpSend(e,n,i={}){var r;const s=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const a={method:"POST",headers:{Authorization:s,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},u=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(r=i.timeout)!==null&&r!==void 0?r:this.timeout);if(u.status===202)return{success:!0};let d=u.statusText;try{const f=await u.json();d=f.error||f.message||d}catch{}return Promise.reject(new Error(d))}async send(e,n={}){var i,r;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:a}=e,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);return await((r=f.body)===null||r===void 0?void 0:r.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var a,u,d;const f=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((d=(u=(a=this.params)===null||a===void 0?void 0:a.config)===null||u===void 0?void 0:u.broadcast)===null||d===void 0)&&d.ack)&&s("ok"),f.receive("ok",()=>s("ok")),f.receive("error",()=>s("error")),f.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Be.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(qt.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(r=>{i=new Eu(this,qt.leave,{},e),i.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i==null||i.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Be.closed,this.bindings={}}async _fetchWithTimeout(e,n,i){const r=new AbortController,s=setTimeout(()=>r.abort(),i),a=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:r.signal}));return clearTimeout(s),a}_push(e,n,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new Eu(this,e,n,i);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Cx){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,i){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,i){var r,s;const a=e.toLocaleLowerCase(),{close:u,error:d,leave:f,join:m}=qt;if(i&&[u,d,f,m].indexOf(a)>=0&&i!==this._joinRef())return;let v=this._onMessage(a,n,i);if(n&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(w=>{var x,P,I;return((x=w.filter)===null||x===void 0?void 0:x.event)==="*"||((I=(P=w.filter)===null||P===void 0?void 0:P.event)===null||I===void 0?void 0:I.toLocaleLowerCase())===a}).map(w=>w.callback(v,i)):(s=this.bindings[a])===null||s===void 0||s.filter(w=>{var x,P,I,C,T,S;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in w){const N=w.id,R=(x=w.filter)===null||x===void 0?void 0:x.event;return N&&((P=n.ids)===null||P===void 0?void 0:P.includes(N))&&(R==="*"||(R==null?void 0:R.toLocaleLowerCase())===((I=n.data)===null||I===void 0?void 0:I.type.toLocaleLowerCase()))}else{const N=(T=(C=w==null?void 0:w.filter)===null||C===void 0?void 0:C.event)===null||T===void 0?void 0:T.toLocaleLowerCase();return N==="*"||N===((S=n==null?void 0:n.event)===null||S===void 0?void 0:S.toLocaleLowerCase())}else return w.type.toLocaleLowerCase()===a}).map(w=>{if(typeof v=="object"&&"ids"in v){const x=v.data,{schema:P,table:I,commit_timestamp:C,type:T,errors:S}=x;v=Object.assign(Object.assign({},{schema:P,table:I,commit_timestamp:C,eventType:T,new:{},old:{},errors:S}),this._getPayloadRecords(x))}w.callback(v,i)})}_isClosed(){return this.state===Be.closed}_isJoined(){return this.state===Be.joined}_isJoining(){return this.state===Be.joining}_isLeaving(){return this.state===Be.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,i){const r=e.toLocaleLowerCase(),s={type:r,filter:n,callback:i};return this.bindings[r]?this.bindings[r].push(s):this.bindings[r]=[s],this}_off(e,n){const i=e.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(r=>{var s;return!(((s=r.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===i&&Xd.isEqual(r.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const i in e)if(e[i]!==n[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(qt.close,{},e)}_onError(e){this._on(qt.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Be.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=tm(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=tm(e.columns,e.old_record)),n}}const Tu=()=>{},$s={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},bx=[1e3,2e3,5e3,1e4],Mx=1e4,Lx=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Dx{constructor(e,n){var i;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=kc,this.transport=null,this.heartbeatIntervalMs=$s.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Tu,this.ref=0,this.reconnectTimer=null,this.vsn=em,this.logger=Tu,this.conn=null,this.sendBuffer=[],this.serializer=new xx,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=r=>r?(...s)=>r(...s):(...s)=>fetch(...s),!(!((i=n==null?void 0:n.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Rc.websocket}`,this.httpEndpoint=h0(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=yx.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,i){this.logger(e,n,i)}connectionState(){switch(this.conn&&this.conn.readyState){case fi.connecting:return hi.Connecting;case fi.open:return hi.Open;case fi.closing:return hi.Closing;default:return hi.Closed}}isConnected(){return this.connectionState()===hi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const i=`realtime:${e}`,r=this.getChannels().find(s=>s.topic===i);if(r)return r;{const s=new Xd(`realtime:${e}`,n,this);return this.channels.push(s),s}}push(e){const{topic:n,event:i,payload:r,ref:s}=e,a=()=>{this.encode(e,u=>{var d;(d=this.conn)===null||d===void 0||d.send(u)})};this.log("push",`${n} ${i} (${s})`,r),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Sx,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},$s.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(i=>i.topic===e&&(i._isJoined()||i._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(f){this.log("error","error in heartbeat callback",f)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:r,payload:s,ref:a}=n,u=a?`(${a})`:"",d=s.status||"";this.log("receive",`${d} ${i} ${r} ${u}`.trim(),s),this.channels.filter(f=>f._isMember(i)).forEach(f=>f._trigger(r,s,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===fi.open||this.conn.readyState===fi.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(qt.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const i=e.match(/\?/)?"&":"?",r=new URLSearchParams(n);return`${e}${i}${r}`}_workerObjectUrl(e){let n;if(e)n=e;else{const i=new Blob([Lx],{type:"application/javascript"});n=URL.createObjectURL(i)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const r={access_token:n,version:Ex};n&&i.updateJoinPayload(r),i.joinedOnce&&i._isJoined()&&i._push(qt.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(i=>{try{i(n)}catch(r){this.log("error",`error in ${e} callback`,r)}})}catch(i){this.log("error",`error triggering ${e} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new d0(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},$s.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,i,r,s,a,u,d,f,m,_,v,w;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(i=e==null?void 0:e.timeout)!==null&&i!==void 0?i:kc,this.heartbeatIntervalMs=(r=e==null?void 0:e.heartbeatIntervalMs)!==null&&r!==void 0?r:$s.HEARTBEAT_INTERVAL,this.worker=(s=e==null?void 0:e.worker)!==null&&s!==void 0?s:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(u=e==null?void 0:e.heartbeatCallback)!==null&&u!==void 0?u:Tu,this.vsn=(d=e==null?void 0:e.vsn)!==null&&d!==void 0?d:em,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(f=e==null?void 0:e.reconnectAfterMs)!==null&&f!==void 0?f:x=>bx[x-1]||Mx,this.vsn){case c0:this.encode=(m=e==null?void 0:e.encode)!==null&&m!==void 0?m:(x,P)=>P(JSON.stringify(x)),this.decode=(_=e==null?void 0:e.decode)!==null&&_!==void 0?_:(x,P)=>P(JSON.parse(x));break;case Tx:this.encode=(v=e==null?void 0:e.encode)!==null&&v!==void 0?v:this.serializer.encode.bind(this.serializer),this.decode=(w=e==null?void 0:e.decode)!==null&&w!==void 0?w:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class al extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function xe(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Ox extends al{constructor(e,n,i){super(e),this.name="StorageApiError",this.status=n,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class bc extends al{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}const ef=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Ux=()=>Response,Mc=t=>{if(Array.isArray(t))return t.map(n=>Mc(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,i])=>{const r=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[r]=Mc(i)}),e},Fx=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Bx=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t),Su=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},zx=(t,e,n)=>K(void 0,void 0,void 0,function*(){const i=yield Ux();t instanceof i&&!(n!=null&&n.noResolveJson)?t.json().then(r=>{const s=t.status||500,a=(r==null?void 0:r.statusCode)||s+"";e(new Ox(Su(r),s,a))}).catch(r=>{e(new bc(Su(r),r))}):e(new bc(Su(t),t))}),Vx=(t,e,n,i)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!i?r:(Fx(i)?(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r.body=JSON.stringify(i)):r.body=i,e!=null&&e.duplex&&(r.duplex=e.duplex),Object.assign(Object.assign({},r),n))};function ts(t,e,n,i,r,s){return K(this,void 0,void 0,function*(){return new Promise((a,u)=>{t(n,Vx(e,i,r,s)).then(d=>{if(!d.ok)throw d;return i!=null&&i.noResolveJson?d:d.json()}).then(d=>a(d)).catch(d=>zx(d,u,i))})})}function Go(t,e,n,i){return K(this,void 0,void 0,function*(){return ts(t,"GET",e,n,i)})}function zt(t,e,n,i,r){return K(this,void 0,void 0,function*(){return ts(t,"POST",e,i,r,n)})}function Lc(t,e,n,i,r){return K(this,void 0,void 0,function*(){return ts(t,"PUT",e,i,r,n)})}function qx(t,e,n,i){return K(this,void 0,void 0,function*(){return ts(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),i)})}function tf(t,e,n,i,r){return K(this,void 0,void 0,function*(){return ts(t,"DELETE",e,i,r,n)})}class Hx{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return K(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(xe(e))return{data:null,error:e};throw e}})}}var p0;class Gx{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n,this[p0]="BlobDownloadBuilder",this.promise=null}asStream(){return new Hx(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.getPromise().then(e,n)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return K(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(xe(e))return{data:null,error:e};throw e}})}}p0=Symbol.toStringTag;const $x={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},rm={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Wx{constructor(e,n={},i,r){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=i,this.fetch=ef(r)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,i,r){return K(this,void 0,void 0,function*(){try{let s;const a=Object.assign(Object.assign({},rm),r);let u=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const d=a.metadata;typeof Blob<"u"&&i instanceof Blob?(s=new FormData,s.append("cacheControl",a.cacheControl),d&&s.append("metadata",this.encodeMetadata(d)),s.append("",i)):typeof FormData<"u"&&i instanceof FormData?(s=i,s.has("cacheControl")||s.append("cacheControl",a.cacheControl),d&&!s.has("metadata")&&s.append("metadata",this.encodeMetadata(d))):(s=i,u["cache-control"]=`max-age=${a.cacheControl}`,u["content-type"]=a.contentType,d&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(d))),(typeof ReadableStream<"u"&&s instanceof ReadableStream||s&&typeof s=="object"&&"pipe"in s&&typeof s.pipe=="function")&&!a.duplex&&(a.duplex="half")),r!=null&&r.headers&&(u=Object.assign(Object.assign({},u),r.headers));const f=this._removeEmptyFolders(n),m=this._getFinalPath(f),_=yield(e=="PUT"?Lc:zt)(this.fetch,`${this.url}/object/${m}`,s,Object.assign({headers:u},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:f,id:_.Id,fullPath:_.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(xe(s))return{data:null,error:s};throw s}})}upload(e,n,i){return K(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,i)})}uploadToSignedUrl(e,n,i,r){return K(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),a=this._getFinalPath(s),u=new URL(this.url+`/object/upload/sign/${a}`);u.searchParams.set("token",n);try{let d;const f=Object.assign({upsert:rm.upsert},r),m=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&i instanceof Blob?(d=new FormData,d.append("cacheControl",f.cacheControl),d.append("",i)):typeof FormData<"u"&&i instanceof FormData?(d=i,d.append("cacheControl",f.cacheControl)):(d=i,m["cache-control"]=`max-age=${f.cacheControl}`,m["content-type"]=f.contentType);const _=yield Lc(this.fetch,u.toString(),d,{headers:m});return{data:{path:s,fullPath:_.Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(xe(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(e,n){return K(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e);const r=Object.assign({},this.headers);n!=null&&n.upsert&&(r["x-upsert"]="true");const s=yield zt(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:r}),a=new URL(this.url+s.url),u=a.searchParams.get("token");if(!u)throw new al("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:u},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(xe(i))return{data:null,error:i};throw i}})}update(e,n,i){return K(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,i)})}move(e,n,i){return K(this,void 0,void 0,function*(){try{return{data:yield zt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xe(r))return{data:null,error:r};throw r}})}copy(e,n,i){return K(this,void 0,void 0,function*(){try{return{data:{path:(yield zt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xe(r))return{data:null,error:r};throw r}})}createSignedUrl(e,n,i){return K(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),s=yield zt(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:n},i!=null&&i.transform?{transform:i.transform}:{}),{headers:this.headers});const a=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${a}`)},{data:s,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xe(r))return{data:null,error:r};throw r}})}createSignedUrls(e,n,i){return K(this,void 0,void 0,function*(){try{const r=yield zt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),s=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{data:r.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${s}`):null})),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xe(r))return{data:null,error:r};throw r}})}download(e,n){const r=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),a=s?`?${s}`:"",u=this._getFinalPath(e),d=()=>Go(this.fetch,`${this.url}/${r}/${u}${a}`,{headers:this.headers,noResolveJson:!0});return new Gx(d,this.shouldThrowOnError)}info(e){return K(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const i=yield Go(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Mc(i),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(xe(i))return{data:null,error:i};throw i}})}exists(e){return K(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield qx(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(xe(i)&&i instanceof bc){const r=i.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:i}}throw i}})}getPublicUrl(e,n){const i=this._getFinalPath(e),r=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&r.push(s);const u=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});d!==""&&r.push(d);let f=r.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${i}${f}`)}}}remove(e){return K(this,void 0,void 0,function*(){try{return{data:yield tf(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xe(n))return{data:null,error:n};throw n}})}list(e,n,i){return K(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},$x),n),{prefix:e||""});return{data:yield zt(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},i),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xe(r))return{data:null,error:r};throw r}})}listV2(e,n){return K(this,void 0,void 0,function*(){try{const i=Object.assign({},e);return{data:yield zt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(xe(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const m0="2.86.0",g0={"X-Client-Info":`storage-js/${m0}`};class Jx{constructor(e,n={},i,r){this.shouldThrowOnError=!1;const s=new URL(e);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},g0),n),this.fetch=ef(i)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return K(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(e);return{data:yield Go(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xe(n))return{data:null,error:n};throw n}})}getBucket(e){return K(this,void 0,void 0,function*(){try{return{data:yield Go(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xe(n))return{data:null,error:n};throw n}})}createBucket(e){return K(this,arguments,void 0,function*(n,i={public:!1}){try{return{data:yield zt(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:i.type,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xe(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return K(this,void 0,void 0,function*(){try{return{data:yield Lc(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(xe(i))return{data:null,error:i};throw i}})}emptyBucket(e){return K(this,void 0,void 0,function*(){try{return{data:yield zt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xe(n))return{data:null,error:n};throw n}})}deleteBucket(e){return K(this,void 0,void 0,function*(){try{return{data:yield tf(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xe(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(e){const n={};return e&&("limit"in e&&(n.limit=String(e.limit)),"offset"in e&&(n.offset=String(e.offset)),e.search&&(n.search=e.search),e.sortColumn&&(n.sortColumn=e.sortColumn),e.sortOrder&&(n.sortOrder=e.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}var $o=class extends Error{constructor(t,e){var n;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((n=e.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Kx(t,e,n){const i=new URL(e,t);if(n)for(const[r,s]of Object.entries(n))s!==void 0&&i.searchParams.set(r,s);return i.toString()}async function Zx(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function Yx(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:i,query:r,body:s,headers:a}){const u=Kx(t.baseUrl,i,r),d=await Zx(t.auth),f=await e(u,{method:n,headers:{...s?{"Content-Type":"application/json"}:{},...d,...a},body:s?JSON.stringify(s):void 0}),m=await f.text(),_=(f.headers.get("content-type")||"").includes("application/json"),v=_&&m?JSON.parse(m):m;if(!f.ok){const w=_?v:void 0,x=w==null?void 0:w.error;throw new $o((x==null?void 0:x.message)??`Request failed with status ${f.status}`,{status:f.status,icebergType:x==null?void 0:x.type,icebergCode:x==null?void 0:x.code,details:w})}return{status:f.status,headers:f.headers,data:v}}}}function Ws(t){return t.join("")}var jx=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:Ws(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(i=>({namespace:i}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ws(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ws(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ws(t.namespace)}`}),!0}catch(e){if(e instanceof $o&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof $o&&n.status===409)return;throw n}}};function Bi(t){return t.join("")}var Qx=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Bi(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Bi(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Bi(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Bi(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Bi(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Bi(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof $o&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof $o&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},Xx=class{constructor(t){var i;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=Yx({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(i=t.accessDelegation)==null?void 0:i.join(","),this.namespaceOps=new jx(this.client,e),this.tableOps=new Qx(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}};class eP{constructor(e,n={},i){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},g0),n),this.fetch=ef(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return K(this,void 0,void 0,function*(){try{return{data:yield zt(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xe(n))return{data:null,error:n};throw n}})}listBuckets(e){return K(this,void 0,void 0,function*(){try{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const i=n.toString(),r=i?`${this.url}/bucket?${i}`:`${this.url}/bucket`;return{data:yield Go(this.fetch,r,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xe(n))return{data:null,error:n};throw n}})}deleteBucket(e){return K(this,void 0,void 0,function*(){try{return{data:yield tf(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xe(n))return{data:null,error:n};throw n}})}from(e){if(!Bx(e))throw new al("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new Xx({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>K(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const nf={"X-Client-Info":`storage-js/${m0}`,"Content-Type":"application/json"};class _0 extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function vt(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class Cu extends _0{constructor(e,n,i){super(e),this.name="StorageVectorsApiError",this.status=n,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class tP extends _0{constructor(e,n){super(e),this.name="StorageVectorsUnknownError",this.originalError=n}}var om;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(om||(om={}));const rf=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),nP=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},sm=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),iP=(t,e,n)=>K(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const r=t.status||500,s=t;if(typeof s.json=="function")s.json().then(a=>{const u=(a==null?void 0:a.statusCode)||(a==null?void 0:a.code)||r+"";e(new Cu(sm(a),r,u))}).catch(()=>{const a=r+"",u=s.statusText||`HTTP ${r} error`;e(new Cu(u,r,a))});else{const a=r+"",u=s.statusText||`HTTP ${r} error`;e(new Cu(u,r,a))}}else e(new tP(sm(t),t))}),rP=(t,e,n,i)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return i?(nP(i)?(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r.body=JSON.stringify(i)):r.body=i,Object.assign(Object.assign({},r),n)):r};function oP(t,e,n,i,r,s){return K(this,void 0,void 0,function*(){return new Promise((a,u)=>{t(n,rP(e,i,r,s)).then(d=>{if(!d.ok)throw d;if(i!=null&&i.noResolveJson)return d;const f=d.headers.get("content-type");return!f||!f.includes("application/json")?{}:d.json()}).then(d=>a(d)).catch(d=>iP(d,u,i))})})}function yt(t,e,n,i,r){return K(this,void 0,void 0,function*(){return oP(t,"POST",e,i,r,n)})}class sP{constructor(e,n={},i){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},nf),n),this.fetch=rf(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return K(this,void 0,void 0,function*(){try{return{data:(yield yt(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vt(n))return{data:null,error:n};throw n}})}getIndex(e,n){return K(this,void 0,void 0,function*(){try{return{data:yield yt(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(vt(i))return{data:null,error:i};throw i}})}listIndexes(e){return K(this,void 0,void 0,function*(){try{return{data:yield yt(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vt(n))return{data:null,error:n};throw n}})}deleteIndex(e,n){return K(this,void 0,void 0,function*(){try{return{data:(yield yt(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(vt(i))return{data:null,error:i};throw i}})}}class aP{constructor(e,n={},i){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},nf),n),this.fetch=rf(i)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return K(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield yt(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vt(n))return{data:null,error:n};throw n}})}getVectors(e){return K(this,void 0,void 0,function*(){try{return{data:yield yt(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vt(n))return{data:null,error:n};throw n}})}listVectors(e){return K(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield yt(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vt(n))return{data:null,error:n};throw n}})}queryVectors(e){return K(this,void 0,void 0,function*(){try{return{data:yield yt(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vt(n))return{data:null,error:n};throw n}})}deleteVectors(e){return K(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield yt(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vt(n))return{data:null,error:n};throw n}})}}class lP{constructor(e,n={},i){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},nf),n),this.fetch=rf(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return K(this,void 0,void 0,function*(){try{return{data:(yield yt(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vt(n))return{data:null,error:n};throw n}})}getBucket(e){return K(this,void 0,void 0,function*(){try{return{data:yield yt(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vt(n))return{data:null,error:n};throw n}})}listBuckets(){return K(this,arguments,void 0,function*(e={}){try{return{data:yield yt(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return K(this,void 0,void 0,function*(){try{return{data:(yield yt(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vt(n))return{data:null,error:n};throw n}})}}class uP extends lP{constructor(e,n={}){super(e,n.headers||{},n.fetch)}from(e){return new cP(this.url,this.headers,e,this.fetch)}createBucket(e){const n=Object.create(null,{createBucket:{get:()=>super.createBucket}});return K(this,void 0,void 0,function*(){return n.createBucket.call(this,e)})}getBucket(e){const n=Object.create(null,{getBucket:{get:()=>super.getBucket}});return K(this,void 0,void 0,function*(){return n.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return K(this,arguments,void 0,function*(n={}){return e.listBuckets.call(this,n)})}deleteBucket(e){const n=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return K(this,void 0,void 0,function*(){return n.deleteBucket.call(this,e)})}}class cP extends sP{constructor(e,n,i,r){super(e,n,r),this.vectorBucketName=i}createIndex(e){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return K(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return K(this,arguments,void 0,function*(n={}){return e.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return K(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return K(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new dP(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class dP extends aP{constructor(e,n,i,r,s){super(e,n,s),this.vectorBucketName=i,this.indexName=r}putVectors(e){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return K(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return K(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return K(this,arguments,void 0,function*(n={}){return e.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return K(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return K(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class fP extends Jx{constructor(e,n={},i,r){super(e,n,i,r)}from(e){return new Wx(this.url,this.headers,e,this.fetch)}get vectors(){return new uP(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new eP(this.url+"/iceberg",this.headers,this.fetch)}}const hP="2.86.0";let co="";typeof Deno<"u"?co="deno":typeof document<"u"?co="web":typeof navigator<"u"&&navigator.product==="ReactNative"?co="react-native":co="node";const pP={"X-Client-Info":`supabase-js-${co}/${hP}`},mP={headers:pP},gP={schema:"public"},_P={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},vP={},yP=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),wP=()=>Headers,EP=(t,e,n)=>{const i=yP(n),r=wP();return async(s,a)=>{var u;const d=(u=await e())!==null&&u!==void 0?u:t;let f=new r(a==null?void 0:a.headers);return f.has("apikey")||f.set("apikey",t),f.has("Authorization")||f.set("Authorization",`Bearer ${d}`),i(s,Object.assign(Object.assign({},a),{headers:f}))}};function TP(t){return t.endsWith("/")?t:t+"/"}function SP(t,e){var n,i;const{db:r,auth:s,realtime:a,global:u}=t,{db:d,auth:f,realtime:m,global:_}=e,v={db:Object.assign(Object.assign({},d),r),auth:Object.assign(Object.assign({},f),s),realtime:Object.assign(Object.assign({},m),a),storage:{},global:Object.assign(Object.assign(Object.assign({},_),u),{headers:Object.assign(Object.assign({},(n=_==null?void 0:_.headers)!==null&&n!==void 0?n:{}),(i=u==null?void 0:u.headers)!==null&&i!==void 0?i:{})}),accessToken:async()=>""};return t.accessToken?v.accessToken=t.accessToken:delete v.accessToken,v}function CP(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(TP(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const v0="2.86.0",$i=30*1e3,Dc=3,xu=Dc*$i,xP="http://localhost:9999",PP="supabase.auth.token",AP={"X-Client-Info":`gotrue-js/${v0}`},Oc="X-Supabase-Api-Version",y0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},IP=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,kP=10*60*1e3;class Wo extends Error{constructor(e,n,i){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=i}}function Z(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class RP extends Wo{constructor(e,n,i){super(e,n,i),this.name="AuthApiError",this.status=n,this.code=i}}function NP(t){return Z(t)&&t.name==="AuthApiError"}class pi extends Wo{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class ei extends Wo{constructor(e,n,i,r){super(e,i,r),this.name=n,this.status=i}}class gt extends ei{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function bP(t){return Z(t)&&t.name==="AuthSessionMissingError"}class zi extends ei{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Js extends ei{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ks extends ei{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function MP(t){return Z(t)&&t.name==="AuthImplicitGrantRedirectError"}class am extends ei{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Uc extends ei{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Pu(t){return Z(t)&&t.name==="AuthRetryableFetchError"}class lm extends ei{constructor(e,n,i){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=i}}class Fc extends ei{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Oa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),um=` 	
\r=`.split(""),LP=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<um.length;e+=1)t[um[e].charCodeAt(0)]=-2;for(let e=0;e<Oa.length;e+=1)t[Oa[e].charCodeAt(0)]=e;return t})();function cm(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;n(Oa[i]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;n(Oa[i]),e.queuedBits-=6}}function w0(t,e,n){const i=LP[t];if(i>-1)for(e.queue=e.queue<<6|i,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function dm(t){const e=[],n=a=>{e.push(String.fromCodePoint(a))},i={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},s=a=>{UP(a,i,n)};for(let a=0;a<t.length;a+=1)w0(t.charCodeAt(a),r,s);return e.join("")}function DP(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function OP(t,e){for(let n=0;n<t.length;n+=1){let i=t.charCodeAt(n);if(i>55295&&i<=56319){const r=(i-55296)*1024&65535;i=(t.charCodeAt(n+1)-56320&65535|r)+65536,n+=1}DP(i,e)}}function UP(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let i=1;i<6;i+=1)if(!(t>>7-i&1)){e.utf8seq=i;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function fr(t){const e=[],n={queue:0,queuedBits:0},i=r=>{e.push(r)};for(let r=0;r<t.length;r+=1)w0(t.charCodeAt(r),n,i);return new Uint8Array(e)}function FP(t){const e=[];return OP(t,n=>e.push(n)),new Uint8Array(e)}function vi(t){const e=[],n={queue:0,queuedBits:0},i=r=>{e.push(r)};return t.forEach(r=>cm(r,n,i)),cm(null,n,i),e.join("")}function BP(t){return Math.round(Date.now()/1e3)+t}function zP(){return Symbol("auth-callback")}const Je=()=>typeof window<"u"&&typeof document<"u",ai={tested:!1,writable:!1},E0=()=>{if(!Je())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ai.tested)return ai.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),ai.tested=!0,ai.writable=!0}catch{ai.tested=!0,ai.writable=!1}return ai.writable};function VP(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((r,s)=>{e[s]=r})}catch{}return n.searchParams.forEach((i,r)=>{e[r]=i}),e}const T0=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),qP=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Wi=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},li=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},An=async(t,e)=>{await t.removeItem(e)};class ll{constructor(){this.promise=new ll.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}ll.promiseConstructor=Promise;function Au(t){const e=t.split(".");if(e.length!==3)throw new Fc("Invalid JWT structure");for(let i=0;i<e.length;i++)if(!IP.test(e[i]))throw new Fc("JWT not in base64url format");return{header:JSON.parse(dm(e[0])),payload:JSON.parse(dm(e[1])),signature:fr(e[2]),raw:{header:e[0],payload:e[1]}}}async function HP(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function GP(t,e){return new Promise((i,r)=>{(async()=>{for(let s=0;s<1/0;s++)try{const a=await t(s);if(!e(s,null,a)){i(a);return}}catch(a){if(!e(s,a)){r(a);return}}})()})}function $P(t){return("0"+t.toString(16)).substr(-2)}function WP(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=n.length;let r="";for(let s=0;s<56;s++)r+=n.charAt(Math.floor(Math.random()*i));return r}return crypto.getRandomValues(e),Array.from(e,$P).join("")}async function JP(t){const n=new TextEncoder().encode(t),i=await crypto.subtle.digest("SHA-256",n),r=new Uint8Array(i);return Array.from(r).map(s=>String.fromCharCode(s)).join("")}async function KP(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await JP(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Vi(t,e,n=!1){const i=WP();let r=i;n&&(r+="/PASSWORD_RECOVERY"),await Wi(t,`${e}-code-verifier`,r);const s=await KP(i);return[s,i===s?"plain":"s256"]}const ZP=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function YP(t){const e=t.headers.get(Oc);if(!e||!e.match(ZP))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function jP(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function QP(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const XP=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function qi(t){if(!XP.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Iu(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function eA(t,e){return new Proxy(t,{get:(n,i,r)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const s=i.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,i,r)}return!e.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,i,r)}})}function fm(t){return JSON.parse(JSON.stringify(t))}const di=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),tA=[502,503,504];async function hm(t){var e;if(!qP(t))throw new Uc(di(t),0);if(tA.includes(t.status))throw new Uc(di(t),t.status);let n;try{n=await t.json()}catch(s){throw new pi(di(s),s)}let i;const r=YP(t);if(r&&r.getTime()>=y0["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?i=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(i=n.error_code),i){if(i==="weak_password")throw new lm(di(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(i==="session_not_found")throw new gt}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0))throw new lm(di(n),t.status,n.weak_password.reasons);throw new RP(di(n),t.status||500,i)}const nA=(t,e,n,i)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(i),Object.assign(Object.assign({},r),n))};async function Q(t,e,n,i){var r;const s=Object.assign({},i==null?void 0:i.headers);s[Oc]||(s[Oc]=y0["2024-01-01"].name),i!=null&&i.jwt&&(s.Authorization=`Bearer ${i.jwt}`);const a=(r=i==null?void 0:i.query)!==null&&r!==void 0?r:{};i!=null&&i.redirectTo&&(a.redirect_to=i.redirectTo);const u=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",d=await iA(t,e,n+u,{headers:s,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(d):{data:Object.assign({},d),error:null}}async function iA(t,e,n,i,r,s){const a=nA(e,i,r,s);let u;try{u=await t(n,Object.assign({},a))}catch(d){throw console.error(d),new Uc(di(d),0)}if(u.ok||await hm(u),i!=null&&i.noResolveJson)return u;try{return await u.json()}catch(d){await hm(d)}}function Ft(t){var e;let n=null;sA(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=BP(t.expires_in)));const i=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:i},error:null}}function pm(t){const e=Ft(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,i)=>n&&typeof i=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Mn(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function rA(t){return{data:t,error:null}}function oA(t){const{action_link:e,email_otp:n,hashed_token:i,redirect_to:r,verification_type:s}=t,a=kr(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:e,email_otp:n,hashed_token:i,redirect_to:r,verification_type:s},d=Object.assign({},a);return{data:{properties:u,user:d},error:null}}function mm(t){return t}function sA(t){return t.access_token&&t.refresh_token&&t.expires_in}const ku=["global","local","others"];class aA{constructor({url:e="",headers:n={},fetch:i}){this.url=e,this.headers=n,this.fetch=T0(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=ku[0]){if(ku.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ku.join(", ")}`);try{return await Q(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(i){if(Z(i))return{data:null,error:i};throw i}}async inviteUserByEmail(e,n={}){try{return await Q(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Mn})}catch(i){if(Z(i))return{data:{user:null},error:i};throw i}}async generateLink(e){try{const{options:n}=e,i=kr(e,["options"]),r=Object.assign(Object.assign({},i),n);return"newEmail"in i&&(r.new_email=i==null?void 0:i.newEmail,delete r.newEmail),await Q(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:oA,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Z(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Q(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Mn})}catch(n){if(Z(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,i,r,s,a,u,d;try{const f={nextPage:null,lastPage:0,total:0},m=await Q(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(s=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:""},xform:mm});if(m.error)throw m.error;const _=await m.json(),v=(a=m.headers.get("x-total-count"))!==null&&a!==void 0?a:0,w=(d=(u=m.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return w.length>0&&(w.forEach(x=>{const P=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),I=JSON.parse(x.split(";")[1].split("=")[1]);f[`${I}Page`]=P}),f.total=parseInt(v)),{data:Object.assign(Object.assign({},_),f),error:null}}catch(f){if(Z(f))return{data:{users:[]},error:f};throw f}}async getUserById(e){qi(e);try{return await Q(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Mn})}catch(n){if(Z(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){qi(e);try{return await Q(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Mn})}catch(i){if(Z(i))return{data:{user:null},error:i};throw i}}async deleteUser(e,n=!1){qi(e);try{return await Q(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Mn})}catch(i){if(Z(i))return{data:{user:null},error:i};throw i}}async _listFactors(e){qi(e.userId);try{const{data:n,error:i}=await Q(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:n,error:i}}catch(n){if(Z(n))return{data:null,error:n};throw n}}async _deleteFactor(e){qi(e.userId),qi(e.id);try{return{data:await Q(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Z(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,i,r,s,a,u,d;try{const f={nextPage:null,lastPage:0,total:0},m=await Q(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(s=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:""},xform:mm});if(m.error)throw m.error;const _=await m.json(),v=(a=m.headers.get("x-total-count"))!==null&&a!==void 0?a:0,w=(d=(u=m.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return w.length>0&&(w.forEach(x=>{const P=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),I=JSON.parse(x.split(";")[1].split("=")[1]);f[`${I}Page`]=P}),f.total=parseInt(v)),{data:Object.assign(Object.assign({},_),f),error:null}}catch(f){if(Z(f))return{data:{clients:[]},error:f};throw f}}async _createOAuthClient(e){try{return await Q(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Z(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await Q(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Z(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await Q(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(Z(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(e){try{return await Q(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Z(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await Q(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Z(n))return{data:null,error:n};throw n}}}function gm(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const Hi={debug:!!(globalThis&&E0()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class S0 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class lA extends S0{}async function uA(t,e,n){Hi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const i=new globalThis.AbortController;return e>0&&setTimeout(()=>{i.abort(),Hi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async r=>{if(r){Hi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,r.name);try{return await n()}finally{Hi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,r.name)}}else{if(e===0)throw Hi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new lA(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Hi.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function cA(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function C0(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function dA(t){return parseInt(t,16)}function fA(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,i=>i.toString(16).padStart(2,"0")).join("")}function hA(t){var e;const{chainId:n,domain:i,expirationTime:r,issuedAt:s=new Date,nonce:a,notBefore:u,requestId:d,resources:f,scheme:m,uri:_,version:v}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!_)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const w=C0(t.address),x=m?`${m}://${i}`:i,P=t.statement?`${t.statement}
`:"",I=`${x} wants you to sign in with your Ethereum account:
${w}

${P}`;let C=`URI: ${_}
Version: ${v}
Chain ID: ${n}${a?`
Nonce: ${a}`:""}
Issued At: ${s.toISOString()}`;if(r&&(C+=`
Expiration Time: ${r.toISOString()}`),u&&(C+=`
Not Before: ${u.toISOString()}`),d&&(C+=`
Request ID: ${d}`),f){let T=`
Resources:`;for(const S of f){if(!S||typeof S!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${S}`);T+=`
- ${S}`}C+=T}return`${I}
${C}`}class Oe extends Error{constructor({message:e,code:n,cause:i,name:r}){var s;super(e,{cause:i}),this.__isWebAuthnError=!0,this.name=(s=r??(i instanceof Error?i.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=n}}class Ua extends Oe{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function pA({error:t,options:e}){var n,i,r;const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Oe({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=s.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Oe({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Oe({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((r=s.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Oe({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Oe({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Oe({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return s.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new Oe({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Oe({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const a=window.location.hostname;if(x0(a)){if(s.rp.id!==a)return new Oe({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Oe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new Oe({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Oe({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Oe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function mA({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Oe({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Oe({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const i=window.location.hostname;if(x0(i)){if(n.rpId!==i)return new Oe({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Oe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Oe({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Oe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class gA{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const _A=new gA;function vA(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:i}=t,r=kr(t,["challenge","user","excludeCredentials"]),s=fr(e).buffer,a=Object.assign(Object.assign({},n),{id:fr(n.id).buffer}),u=Object.assign(Object.assign({},r),{challenge:s,user:a});if(i&&i.length>0){u.excludeCredentials=new Array(i.length);for(let d=0;d<i.length;d++){const f=i[d];u.excludeCredentials[d]=Object.assign(Object.assign({},f),{id:fr(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return u}function yA(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,i=kr(t,["challenge","allowCredentials"]),r=fr(e).buffer,s=Object.assign(Object.assign({},i),{challenge:r});if(n&&n.length>0){s.allowCredentials=new Array(n.length);for(let a=0;a<n.length;a++){const u=n[a];s.allowCredentials[a]=Object.assign(Object.assign({},u),{id:fr(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return s}function wA(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:vi(new Uint8Array(t.response.attestationObject)),clientDataJSON:vi(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function EA(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,i=t.getClientExtensionResults(),r=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:vi(new Uint8Array(r.authenticatorData)),clientDataJSON:vi(new Uint8Array(r.clientDataJSON)),signature:vi(new Uint8Array(r.signature)),userHandle:r.userHandle?vi(new Uint8Array(r.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function x0(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function _m(){var t,e;return!!(Je()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function TA(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Ua("Browser returned unexpected credential type",e)}:{data:null,error:new Ua("Empty credential response",e)}}catch(e){return{data:null,error:pA({error:e,options:t})}}}async function SA(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Ua("Browser returned unexpected credential type",e)}:{data:null,error:new Ua("Empty credential response",e)}}catch(e){return{data:null,error:mA({error:e,options:t})}}}const CA={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},xA={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Fa(...t){const e=r=>r!==null&&typeof r=="object"&&!Array.isArray(r),n=r=>r instanceof ArrayBuffer||ArrayBuffer.isView(r),i={};for(const r of t)if(r)for(const s in r){const a=r[s];if(a!==void 0)if(Array.isArray(a))i[s]=a;else if(n(a))i[s]=a;else if(e(a)){const u=i[s];e(u)?i[s]=Fa(u,a):i[s]=Fa(a)}else i[s]=a}return i}function PA(t,e){return Fa(CA,t,e||{})}function AA(t,e){return Fa(xA,t,e||{})}class IA{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:i,signal:r},s){try{const{data:a,error:u}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!a)return{data:null,error:u};const d=r??_A.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:f}=a.webauthn.credential_options.publicKey;f.name||(f.name=`${f.id}:${i}`),f.displayName||(f.displayName=f.name)}switch(a.webauthn.type){case"create":{const f=PA(a.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:m,error:_}=await TA({publicKey:f,signal:d});return m?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:m}},error:null}:{data:null,error:_}}case"request":{const f=AA(a.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:m,error:_}=await SA(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:f,signal:d}));return m?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:m}},error:null}:{data:null,error:_}}}}catch(a){return Z(a)?{data:null,error:a}:{data:null,error:new pi("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:n,webauthn:i}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:i})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:r}={}},s){if(!n)return{data:null,error:new Wo("rpId is required for WebAuthn authentication")};try{if(!_m())return{data:null,error:new pi("Browser does not support WebAuthn",null)};const{data:a,error:u}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:i},signal:r},{request:s});if(!a)return{data:null,error:u};const{webauthn:d}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:d.type,rpId:n,rpOrigins:i,credential_response:d.credential_response}})}catch(a){return Z(a)?{data:null,error:a}:{data:null,error:new pi("Unexpected error in authenticate",a)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:r}={}},s){if(!n)return{data:null,error:new Wo("rpId is required for WebAuthn registration")};try{if(!_m())return{data:null,error:new pi("Browser does not support WebAuthn",null)};const{data:a,error:u}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(m=>{var _;return(_=m.data)===null||_===void 0?void 0:_.all.find(v=>v.factor_type==="webauthn"&&v.friendly_name===e&&v.status!=="unverified")}).then(m=>m?this.client.mfa.unenroll({factorId:m==null?void 0:m.id}):void 0),{data:null,error:u};const{data:d,error:f}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:n,rpOrigins:i},signal:r},{create:s});return d?this._verify({factorId:a.id,challengeId:d.challengeId,webauthn:{rpId:n,rpOrigins:i,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:f}}catch(a){return Z(a)?{data:null,error:a}:{data:null,error:new pi("Unexpected error in register",a)}}}}cA();const kA={url:xP,storageKey:PP,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:AP,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function vm(t,e,n){return await n()}const Gi={};class Jo{get jwks(){var e,n;return(n=(e=Gi[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Gi[this.storageKey]=Object.assign(Object.assign({},Gi[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Gi[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Gi[this.storageKey]=Object.assign(Object.assign({},Gi[this.storageKey]),{cachedAt:e})}constructor(e){var n,i,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const s=Object.assign(Object.assign({},kA),e);if(this.storageKey=s.storageKey,this.instanceID=(n=Jo.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Jo.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&Je()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new aA({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=T0(s.fetch),this.lock=s.lock||vm,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,s.lock?this.lock=s.lock:Je()&&(!((i=globalThis==null?void 0:globalThis.navigator)===null||i===void 0)&&i.locks)?this.lock=uA:this.lock=vm,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new IA(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:E0()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=gm(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=gm(this.memoryStorage)),Je()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${v0}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},i="none";if(Je()&&(n=VP(window.location.href),this._isImplicitGrantCallback(n)?i="implicit":await this._isPKCECallback(n)&&(i="pkce")),Je()&&this.detectSessionInUrl&&i!=="none"){const{data:r,error:s}=await this._getSessionFromURL(n,i);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),MP(s)){const d=(e=s.details)===null||e===void 0?void 0:e.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:a,redirectType:u}=r;return this._debug("#_initialize()","detected session in URL",a,"redirect type",u),await this._saveSession(a),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Z(n)?this._returnResult({error:n}):this._returnResult({error:new pi("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,i,r;try{const s=await Q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:Ft}),{data:a,error:u}=s;if(u||!a)return this._returnResult({data:{user:null,session:null},error:u});const d=a.session,f=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:f,session:d},error:null})}catch(s){if(Z(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(e){var n,i,r;try{let s;if("email"in e){const{email:m,password:_,options:v}=e;let w=null,x=null;this.flowType==="pkce"&&([w,x]=await Vi(this.storage,this.storageKey)),s=await Q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v==null?void 0:v.emailRedirectTo,body:{email:m,password:_,data:(n=v==null?void 0:v.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},code_challenge:w,code_challenge_method:x},xform:Ft})}else if("phone"in e){const{phone:m,password:_,options:v}=e;s=await Q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:m,password:_,data:(i=v==null?void 0:v.data)!==null&&i!==void 0?i:{},channel:(r=v==null?void 0:v.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken}},xform:Ft})}else throw new Js("You must provide either an email or phone number and a password");const{data:a,error:u}=s;if(u||!a)return this._returnResult({data:{user:null,session:null},error:u});const d=a.session,f=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:f,session:d},error:null})}catch(s){if(Z(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(e){try{let n;if("email"in e){const{email:s,password:a,options:u}=e;n=await Q(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:pm})}else if("phone"in e){const{phone:s,password:a,options:u}=e;n=await Q(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:pm})}else throw new Js("You must provide either an email or phone number and a password");const{data:i,error:r}=n;if(r)return this._returnResult({data:{user:null,session:null},error:r});if(!i||!i.session||!i.user){const s=new zi;return this._returnResult({data:{user:null,session:null},error:s})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:r})}catch(n){if(Z(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,i,r,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,i,r,s,a,u,d,f,m,_,v;let w,x;if("message"in e)w=e.message,x=e.signature;else{const{chain:P,wallet:I,statement:C,options:T}=e;let S;if(Je())if(typeof I=="object")S=I;else{const q=window;if("ethereum"in q&&typeof q.ethereum=="object"&&"request"in q.ethereum&&typeof q.ethereum.request=="function")S=q.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof I!="object"||!(T!=null&&T.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=I}const N=new URL((n=T==null?void 0:T.url)!==null&&n!==void 0?n:window.location.href),R=await S.request({method:"eth_requestAccounts"}).then(q=>q).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!R||R.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const M=C0(R[0]);let O=(i=T==null?void 0:T.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!O){const q=await S.request({method:"eth_chainId"});O=dA(q)}const z={domain:N.host,address:M,statement:C,uri:N.href,version:"1",chainId:O,nonce:(r=T==null?void 0:T.signInWithEthereum)===null||r===void 0?void 0:r.nonce,issuedAt:(a=(s=T==null?void 0:T.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(u=T==null?void 0:T.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(d=T==null?void 0:T.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(f=T==null?void 0:T.signInWithEthereum)===null||f===void 0?void 0:f.requestId,resources:(m=T==null?void 0:T.signInWithEthereum)===null||m===void 0?void 0:m.resources};w=hA(z),x=await S.request({method:"personal_sign",params:[fA(w),M]})}try{const{data:P,error:I}=await Q(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:w,signature:x},!((_=e.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:Ft});if(I)throw I;if(!P||!P.session||!P.user){const C=new zi;return this._returnResult({data:{user:null,session:null},error:C})}return P.session&&(await this._saveSession(P.session),await this._notifyAllSubscribers("SIGNED_IN",P.session)),this._returnResult({data:Object.assign({},P),error:I})}catch(P){if(Z(P))return this._returnResult({data:{user:null,session:null},error:P});throw P}}async signInWithSolana(e){var n,i,r,s,a,u,d,f,m,_,v,w;let x,P;if("message"in e)x=e.message,P=e.signature;else{const{chain:I,wallet:C,statement:T,options:S}=e;let N;if(Je())if(typeof C=="object")N=C;else{const M=window;if("solana"in M&&typeof M.solana=="object"&&("signIn"in M.solana&&typeof M.solana.signIn=="function"||"signMessage"in M.solana&&typeof M.solana.signMessage=="function"))N=M.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!(S!=null&&S.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=C}const R=new URL((n=S==null?void 0:S.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in N&&N.signIn){const M=await N.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},S==null?void 0:S.signInWithSolana),{version:"1",domain:R.host,uri:R.href}),T?{statement:T}:null));let O;if(Array.isArray(M)&&M[0]&&typeof M[0]=="object")O=M[0];else if(M&&typeof M=="object"&&"signedMessage"in M&&"signature"in M)O=M;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in O&&"signature"in O&&(typeof O.signedMessage=="string"||O.signedMessage instanceof Uint8Array)&&O.signature instanceof Uint8Array)x=typeof O.signedMessage=="string"?O.signedMessage:new TextDecoder().decode(O.signedMessage),P=O.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in N)||typeof N.signMessage!="function"||!("publicKey"in N)||typeof N!="object"||!N.publicKey||!("toBase58"in N.publicKey)||typeof N.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${R.host} wants you to sign in with your Solana account:`,N.publicKey.toBase58(),...T?["",T,""]:[""],"Version: 1",`URI: ${R.href}`,`Issued At: ${(r=(i=S==null?void 0:S.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()}`,...!((s=S==null?void 0:S.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${S.signInWithSolana.notBefore}`]:[],...!((a=S==null?void 0:S.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${S.signInWithSolana.expirationTime}`]:[],...!((u=S==null?void 0:S.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${S.signInWithSolana.chainId}`]:[],...!((d=S==null?void 0:S.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${S.signInWithSolana.nonce}`]:[],...!((f=S==null?void 0:S.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${S.signInWithSolana.requestId}`]:[],...!((_=(m=S==null?void 0:S.signInWithSolana)===null||m===void 0?void 0:m.resources)===null||_===void 0)&&_.length?["Resources",...S.signInWithSolana.resources.map(O=>`- ${O}`)]:[]].join(`
`);const M=await N.signMessage(new TextEncoder().encode(x),"utf8");if(!M||!(M instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");P=M}}try{const{data:I,error:C}=await Q(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:vi(P)},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(w=e.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:Ft});if(C)throw C;if(!I||!I.session||!I.user){const T=new zi;return this._returnResult({data:{user:null,session:null},error:T})}return I.session&&(await this._saveSession(I.session),await this._notifyAllSubscribers("SIGNED_IN",I.session)),this._returnResult({data:Object.assign({},I),error:C})}catch(I){if(Z(I))return this._returnResult({data:{user:null,session:null},error:I});throw I}}async _exchangeCodeForSession(e){const n=await li(this.storage,`${this.storageKey}-code-verifier`),[i,r]=(n??"").split("/");try{const{data:s,error:a}=await Q(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:Ft});if(await An(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!s||!s.session||!s.user){const u=new zi;return this._returnResult({data:{user:null,session:null,redirectType:null},error:u})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:r??null}),error:a})}catch(s){if(Z(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(e){try{const{options:n,provider:i,token:r,access_token:s,nonce:a}=e,u=await Q(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:r,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Ft}),{data:d,error:f}=u;if(f)return this._returnResult({data:{user:null,session:null},error:f});if(!d||!d.session||!d.user){const m=new zi;return this._returnResult({data:{user:null,session:null},error:m})}return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),this._returnResult({data:d,error:f})}catch(n){if(Z(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,i,r,s,a;try{if("email"in e){const{email:u,options:d}=e;let f=null,m=null;this.flowType==="pkce"&&([f,m]=await Vi(this.storage,this.storageKey));const{error:_}=await Q(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(n=d==null?void 0:d.data)!==null&&n!==void 0?n:{},create_user:(i=d==null?void 0:d.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:f,code_challenge_method:m},redirectTo:d==null?void 0:d.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:_})}if("phone"in e){const{phone:u,options:d}=e,{data:f,error:m}=await Q(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(r=d==null?void 0:d.data)!==null&&r!==void 0?r:{},create_user:(s=d==null?void 0:d.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(a=d==null?void 0:d.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:m})}throw new Js("You must provide either an email or phone number.")}catch(u){if(Z(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async verifyOtp(e){var n,i;try{let r,s;"options"in e&&(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo,s=(i=e.options)===null||i===void 0?void 0:i.captchaToken);const{data:a,error:u}=await Q(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:r,xform:Ft});if(u)throw u;if(!a)throw new Error("An error occurred on token verification.");const d=a.session,f=a.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),this._returnResult({data:{user:f,session:d},error:null})}catch(r){if(Z(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithSSO(e){var n,i,r,s,a;try{let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Vi(this.storage,this.storageKey));const f=await Q(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&i!==void 0?i:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:d}),headers:this.headers,xform:rA});return!((s=f.data)===null||s===void 0)&&s.url&&Je()&&!(!((a=e.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(f.data.url),this._returnResult(f)}catch(u){if(Z(u))return this._returnResult({data:null,error:u});throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:i}=e;if(i)throw i;if(!n)throw new gt;const{error:r}=await Q(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:r})})}catch(e){if(Z(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:i,type:r,options:s}=e,{error:a}=await Q(this.fetch,"POST",n,{headers:this.headers,body:{email:i,type:r,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in e){const{phone:i,type:r,options:s}=e,{data:a,error:u}=await Q(this.fetch,"POST",n,{headers:this.headers,body:{phone:i,type:r,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:u})}throw new Js("You must provide either an email or phone number and a type")}catch(n){if(Z(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await i,await n()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=n();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await li(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const i=e.expires_at?e.expires_at*1e3-Date.now()<xu:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.userStorage){const a=await li(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=Iu()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};e.user=eA(e.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:r,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:r},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Q(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Mn}):await this._useSession(async n=>{var i,r,s;const{data:a,error:u}=n;if(u)throw u;return!(!((i=a.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new gt}:await Q(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0,xform:Mn})})}catch(n){if(Z(n))return bP(n)&&(await this._removeSession(),await An(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async i=>{const{data:r,error:s}=i;if(s)throw s;if(!r.session)throw new gt;const a=r.session;let u=null,d=null;this.flowType==="pkce"&&e.email!=null&&([u,d]=await Vi(this.storage,this.storageKey));const{data:f,error:m}=await Q(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:u,code_challenge_method:d}),jwt:a.access_token,xform:Mn});if(m)throw m;return a.user=f.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(i){if(Z(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new gt;const n=Date.now()/1e3;let i=n,r=!0,s=null;const{payload:a}=Au(e.access_token);if(a.exp&&(i=a.exp,r=i<=n),r){const{data:u,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!u)return{data:{user:null,session:null},error:null};s=u}else{const{data:u,error:d}=await this._getUser(e.access_token);if(d)throw d;s={access_token:e.access_token,refresh_token:e.refresh_token,user:u.user,token_type:"bearer",expires_in:i-n,expires_at:i},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(n){if(Z(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var i;if(!e){const{data:a,error:u}=n;if(u)throw u;e=(i=a.session)!==null&&i!==void 0?i:void 0}if(!(e!=null&&e.refresh_token))throw new gt;const{data:r,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):r?this._returnResult({data:{user:r.user,session:r},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(Z(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!Je())throw new Ks("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ks(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new am("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ks("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new am("No code detected.");const{data:T,error:S}=await this._exchangeCodeForSession(e.code);if(S)throw S;const N=new URL(window.location.href);return N.searchParams.delete("code"),window.history.replaceState(window.history.state,"",N.toString()),{data:{session:T.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:r,access_token:s,refresh_token:a,expires_in:u,expires_at:d,token_type:f}=e;if(!s||!u||!a||!f)throw new Ks("No session defined in URL");const m=Math.round(Date.now()/1e3),_=parseInt(u);let v=m+_;d&&(v=parseInt(d));const w=v-m;w*1e3<=$i&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${w}s, should have been closer to ${_}s`);const x=v-_;m-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,v,m):m-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,v,m);const{data:P,error:I}=await this._getUser(s);if(I)throw I;const C={provider_token:i,provider_refresh_token:r,access_token:s,expires_in:_,expires_at:v,refresh_token:a,token_type:f,user:P.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:C,redirectType:e.type},error:null})}catch(i){if(Z(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await li(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var i;const{data:r,error:s}=n;if(s)return this._returnResult({error:s});const a=(i=r.session)===null||i===void 0?void 0:i.access_token;if(a){const{error:u}=await this.admin.signOut(a,e);if(u&&!(NP(u)&&(u.status===404||u.status===401||u.status===403)))return this._returnResult({error:u})}return e!=="others"&&(await this._removeSession(),await An(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=zP(),i={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async n=>{var i,r;try{const{data:{session:s},error:a}=n;if(a)throw a;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,n={}){let i=null,r=null;this.flowType==="pkce"&&([i,r]=await Vi(this.storage,this.storageKey,!0));try{return await Q(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:r,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(Z(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var e;try{const{data:n,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(Z(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:i,error:r}=await this._useSession(async s=>{var a,u,d,f,m;const{data:_,error:v}=s;if(v)throw v;const w=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(u=e.options)===null||u===void 0?void 0:u.scopes,queryParams:(d=e.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await Q(this.fetch,"GET",w,{headers:this.headers,jwt:(m=(f=_.session)===null||f===void 0?void 0:f.access_token)!==null&&m!==void 0?m:void 0})});if(r)throw r;return Je()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),this._returnResult({data:{provider:e.provider,url:i==null?void 0:i.url},error:null})}catch(i){if(Z(i))return this._returnResult({data:{provider:e.provider,url:null},error:i});throw i}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var i;try{const{error:r,data:{session:s}}=n;if(r)throw r;const{options:a,provider:u,token:d,access_token:f,nonce:m}=e,_=await Q(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=s==null?void 0:s.access_token)!==null&&i!==void 0?i:void 0,body:{provider:u,id_token:d,access_token:f,nonce:m,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Ft}),{data:v,error:w}=_;return w?this._returnResult({data:{user:null,session:null},error:w}):!v||!v.session||!v.user?this._returnResult({data:{user:null,session:null},error:new zi}):(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("USER_UPDATED",v.session)),this._returnResult({data:v,error:w}))}catch(r){if(Z(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var i,r;const{data:s,error:a}=n;if(a)throw a;return await Q(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&r!==void 0?r:void 0})})}catch(n){if(Z(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const i=Date.now();return await GP(async r=>(r>0&&await HP(200*Math.pow(2,r-1)),this._debug(n,"refreshing attempt",r),await Q(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ft})),(r,s)=>{const a=200*Math.pow(2,r);return s&&Pu(s)&&Date.now()+a-i<$i})}catch(i){if(this._debug(n,"error",i),Z(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",i),Je()&&!n.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e,n;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const r=await li(this.storage,this.storageKey);if(r&&this.userStorage){let a=await li(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:r.user},await Wi(this.userStorage,this.storageKey+"-user",a)),r.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:Iu()}else if(r&&!r.user&&!r.user){const a=await li(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(r.user=a.user,await An(this.storage,this.storageKey+"-user"),await Wi(this.storage,this.storageKey,r)):r.user=Iu()}if(this._debug(i,"session from storage",r),!this._isValidSession(r)){this._debug(i,"session is not valid"),r!==null&&await this._removeSession();return}const s=((n=r.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<xu;if(this._debug(i,`session has${s?"":" not"} expired with margin of ${xu}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:a}=await this._callRefreshToken(r.refresh_token);a&&(console.error(a),Pu(a)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(r.user&&r.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:u}=await this._getUser(r.access_token);!u&&(a!=null&&a.user)?(r.user=a.user,await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(i,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(i,"error",r),console.error(r);return}finally{this._debug(i,"end")}}async _callRefreshToken(e){var n,i;if(!e)throw new gt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new ll;const{data:s,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!s.session)throw new gt;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const u={data:s.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(s){if(this._debug(r,"error",s),Z(s)){const a={data:null,error:s};return Pu(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(s),s}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,n,i=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",n,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:n});const s=[],a=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(e,n)}catch(d){s.push(d)}});if(await Promise.all(a),s.length>0){for(let u=0;u<s.length;u+=1)console.error(s[u]);throw s[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),i=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&n.user&&await Wi(this.userStorage,this.storageKey+"-user",{user:n.user});const r=Object.assign({},n);delete r.user;const s=fm(r);await Wi(this.storage,this.storageKey,s)}else{const r=fm(n);await Wi(this.storage,this.storageKey,r)}}async _removeSession(){this._debug("#_removeSession()"),await An(this.storage,this.storageKey),await An(this.storage,this.storageKey+"-code-verifier"),await An(this.storage,this.storageKey+"-user"),this.userStorage&&await An(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Je()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),$i);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:i}}=n;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((i.expires_at*1e3-e)/$i);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${$i}ms, refresh threshold is ${Dc} ticks`),r<=Dc&&await this._callRefreshToken(i.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof S0)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Je()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,i){const r=[`provider=${encodeURIComponent(n)}`];if(i!=null&&i.redirectTo&&r.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&r.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[s,a]=await Vi(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});r.push(u.toString())}if(i!=null&&i.queryParams){const s=new URLSearchParams(i.queryParams);r.push(s.toString())}return i!=null&&i.skipBrowserRedirect&&r.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var i;const{data:r,error:s}=n;return s?this._returnResult({data:null,error:s}):await Q(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(Z(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var i,r;const{data:s,error:a}=n;if(a)return this._returnResult({data:null,error:a});const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:d,error:f}=await Q(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(i=s==null?void 0:s.session)===null||i===void 0?void 0:i.access_token});return f?this._returnResult({data:null,error:f}):(e.factorType==="totp"&&d.type==="totp"&&(!((r=d==null?void 0:d.totp)===null||r===void 0)&&r.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),this._returnResult({data:d,error:null}))})}catch(n){if(Z(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:r,error:s}=n;if(s)return this._returnResult({data:null,error:s});const a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?wA(e.webauthn.credential_response):EA(e.webauthn.credential_response)})}:{code:e.code}),{data:u,error:d}=await Q(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token});return d?this._returnResult({data:null,error:d}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),this._returnResult({data:u,error:d}))})}catch(n){if(Z(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:r,error:s}=n;if(s)return this._returnResult({data:null,error:s});const a=await Q(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token});if(a.error)return a;const{data:u}=a;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:vA(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:yA(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Z(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:i}=await this._challenge({factorId:e.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:i}=await this.getUser();if(i)return{data:null,error:i};const r={all:[],phone:[],totp:[],webauthn:[]};for(const s of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])r.all.push(s),s.status==="verified"&&r[s.factor_type].push(s);return{data:r,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:i},error:r}=await this.getSession();if(r)return this._returnResult({data:null,error:r});if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=Au(i.access_token);let a=null;s.aal&&(a=s.aal);let u=a;((n=(e=i.user.factors)===null||e===void 0?void 0:e.filter(m=>m.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(u="aal2");const f=s.amr||[];return{data:{currentLevel:a,nextLevel:u,currentAuthenticationMethods:f},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:i},error:r}=n;return r?this._returnResult({data:null,error:r}):i?await Q(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:i.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new gt})})}catch(n){if(Z(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async i=>{const{data:{session:r},error:s}=i;if(s)return this._returnResult({data:null,error:s});if(!r)return this._returnResult({data:null,error:new gt});const a=await Q(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"approve"},xform:u=>({data:u,error:null})});return a.data&&a.data.redirect_url&&Je()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(i){if(Z(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(e,n){try{return await this._useSession(async i=>{const{data:{session:r},error:s}=i;if(s)return this._returnResult({data:null,error:s});if(!r)return this._returnResult({data:null,error:new gt});const a=await Q(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"deny"},xform:u=>({data:u,error:null})});return a.data&&a.data.redirect_url&&Je()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(i){if(Z(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:i}=e;return i?this._returnResult({data:null,error:i}):n?await Q(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:r=>({data:r,error:null})}):this._returnResult({data:null,error:new gt})})}catch(e){if(Z(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:i},error:r}=n;return r?this._returnResult({data:null,error:r}):i?(await Q(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new gt})})}catch(n){if(Z(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let i=n.keys.find(u=>u.kid===e);if(i)return i;const r=Date.now();if(i=this.jwks.keys.find(u=>u.kid===e),i&&this.jwks_cached_at+kP>r)return i;const{data:s,error:a}=await Q(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=r,i=s.keys.find(u=>u.kid===e),!i)?null:i}async getClaims(e,n={}){try{let i=e;if(!i){const{data:w,error:x}=await this.getSession();if(x||!w.session)return this._returnResult({data:null,error:x});i=w.session.access_token}const{header:r,payload:s,signature:a,raw:{header:u,payload:d}}=Au(i);n!=null&&n.allowExpired||jP(s.exp);const f=!r.alg||r.alg.startsWith("HS")||!r.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(r.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!f){const{error:w}=await this.getUser(i);if(w)throw w;return{data:{claims:s,header:r,signature:a},error:null}}const m=QP(r.alg),_=await crypto.subtle.importKey("jwk",f,m,!0,["verify"]);if(!await crypto.subtle.verify(m,_,a,FP(`${u}.${d}`)))throw new Fc("Invalid JWT signature");return{data:{claims:s,header:r,signature:a},error:null}}catch(i){if(Z(i))return this._returnResult({data:null,error:i});throw i}}}Jo.nextInstanceID={};const RA=Jo;class NA extends RA{constructor(e){super(e)}}class bA{constructor(e,n,i){var r,s,a;this.supabaseUrl=e,this.supabaseKey=n;const u=CP(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const d=`sb-${u.hostname.split(".")[0]}-auth-token`,f={db:gP,realtime:vP,auth:Object.assign(Object.assign({},_P),{storageKey:d}),global:mP},m=SP(i??{},f);this.storageKey=(r=m.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(s=m.global.headers)!==null&&s!==void 0?s:{},m.accessToken?(this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(_,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=m.auth)!==null&&a!==void 0?a:{},this.headers,m.global.fetch),this.fetch=EP(n,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.accessToken&&this.accessToken().then(_=>this.realtime.setAuth(_)).catch(_=>console.warn("Failed to set initial Realtime auth token:",_)),this.rest=new vx(new URL("rest/v1",u).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),this.storage=new fP(this.storageUrl.href,this.headers,this.fetch,i==null?void 0:i.storage),m.accessToken||this._listenForAuthEvents()}get functions(){return new mx(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},i={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,i)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,n;if(this.accessToken)return await this.accessToken();const{data:i}=await this.auth.getSession();return(n=(e=i.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:i,storage:r,userStorage:s,storageKey:a,flowType:u,lock:d,debug:f,throwOnError:m},_,v){const w={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new NA({url:this.authUrl.href,headers:Object.assign(Object.assign({},w),_),storageKey:a,autoRefreshToken:e,persistSession:n,detectSessionInUrl:i,storage:r,userStorage:s,flowType:u,lock:d,debug:f,throwOnError:m,fetch:v,hasCustomAuthorizationHeader:Object.keys(this.headers).some(x=>x.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Dx(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,i)=>{this._handleTokenChanged(n,"CLIENT",i==null?void 0:i.access_token)})}_handleTokenChanged(e,n,i){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==i?(this.changedAccessToken=i,this.realtime.setAuth(i)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const MA=(t,e,n)=>new bA(t,e,n);function LA(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}LA()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const DA="https://ulqcefqohvuqrpncdhoj.supabase.co",OA="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVscWNlZnFvaHZ1cXJwbmNkaG9qIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ0MjEyMDgsImV4cCI6MjA3OTk5NzIwOH0.bKh6bupmzzjmJIXpKjSLyNm_-j0mo6h9BpUG7sp6_Mk",io=MA(DA,OA),P0=U.createContext({}),ul=()=>{const t=U.useContext(P0);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},UA=({children:t})=>{const[e,n]=U.useState(null),[i,r]=U.useState(!0);U.useEffect(()=>{io.auth.getSession().then(({data:{session:m}})=>{n((m==null?void 0:m.user)??null),r(!1)});const{data:{subscription:f}}=io.auth.onAuthStateChange((m,_)=>{n((_==null?void 0:_.user)??null),r(!1)});return()=>f.unsubscribe()},[]);const d={user:e,loading:i,signUp:async(f,m)=>{const{data:_,error:v}=await io.auth.signUp({email:f,password:m});return{data:_,error:v}},signIn:async(f,m)=>{const{data:_,error:v}=await io.auth.signInWithPassword({email:f,password:m});return{data:_,error:v}},signOut:async()=>{const{error:f}=await io.auth.signOut();return{error:f}}};return A.jsx(P0.Provider,{value:d,children:t})};function A0(t,e){const n=U.useRef(e);U.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const FA=1;function BA(t){return Object.freeze({__version:FA,map:t})}function zA(t,e){return Object.freeze({...t,...e})}const I0=U.createContext(null),k0=I0.Provider;function of(){const t=U.useContext(I0);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function VA(t){function e(n,i){const{instance:r,context:s}=t(n).current;return U.useImperativeHandle(i,()=>r),n.children==null?null:Co.createElement(k0,{value:s},n.children)}return U.forwardRef(e)}function qA(t){function e(n,i){const[r,s]=U.useState(!1),{instance:a}=t(n,s).current;U.useImperativeHandle(i,()=>a),U.useEffect(function(){r&&a.update()},[a,r,n.children]);const u=a._contentNode;return u?fy.createPortal(n.children,u):null}return U.forwardRef(e)}function HA(t){function e(n,i){const{instance:r}=t(n).current;return U.useImperativeHandle(i,()=>r),null}return U.forwardRef(e)}function R0(t,e){const n=U.useRef();U.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function sf(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function GA(t,e){return function(i,r){const s=of(),a=t(sf(i,s),s);return A0(s.map,i.attribution),R0(a.current,i.eventHandlers),e(a.current,s,i,r),a}}var Bc={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(bE,function(n){var i="1.9.4";function r(o){var l,p,g,y;for(p=1,g=arguments.length;p<g;p++){y=arguments[p];for(l in y)o[l]=y[l]}return o}var s=Object.create||function(){function o(){}return function(l){return o.prototype=l,new o}}();function a(o,l){var p=Array.prototype.slice;if(o.bind)return o.bind.apply(o,p.call(arguments,1));var g=p.call(arguments,2);return function(){return o.apply(l,g.length?g.concat(p.call(arguments)):arguments)}}var u=0;function d(o){return"_leaflet_id"in o||(o._leaflet_id=++u),o._leaflet_id}function f(o,l,p){var g,y,E,k;return k=function(){g=!1,y&&(E.apply(p,y),y=!1)},E=function(){g?y=arguments:(o.apply(p,arguments),setTimeout(k,l),g=!0)},E}function m(o,l,p){var g=l[1],y=l[0],E=g-y;return o===g&&p?o:((o-y)%E+E)%E+y}function _(){return!1}function v(o,l){if(l===!1)return o;var p=Math.pow(10,l===void 0?6:l);return Math.round(o*p)/p}function w(o){return o.trim?o.trim():o.replace(/^\s+|\s+$/g,"")}function x(o){return w(o).split(/\s+/)}function P(o,l){Object.prototype.hasOwnProperty.call(o,"options")||(o.options=o.options?s(o.options):{});for(var p in l)o.options[p]=l[p];return o.options}function I(o,l,p){var g=[];for(var y in o)g.push(encodeURIComponent(p?y.toUpperCase():y)+"="+encodeURIComponent(o[y]));return(!l||l.indexOf("?")===-1?"?":"&")+g.join("&")}var C=/\{ *([\w_ -]+) *\}/g;function T(o,l){return o.replace(C,function(p,g){var y=l[g];if(y===void 0)throw new Error("No value provided for variable "+p);return typeof y=="function"&&(y=y(l)),y})}var S=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"};function N(o,l){for(var p=0;p<o.length;p++)if(o[p]===l)return p;return-1}var R="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function M(o){return window["webkit"+o]||window["moz"+o]||window["ms"+o]}var O=0;function z(o){var l=+new Date,p=Math.max(0,16-(l-O));return O=l+p,window.setTimeout(o,p)}var q=window.requestAnimationFrame||M("RequestAnimationFrame")||z,G=window.cancelAnimationFrame||M("CancelAnimationFrame")||M("CancelRequestAnimationFrame")||function(o){window.clearTimeout(o)};function j(o,l,p){if(p&&q===z)o.call(l);else return q.call(window,a(o,l))}function te(o){o&&G.call(window,o)}var Re={__proto__:null,extend:r,create:s,bind:a,get lastId(){return u},stamp:d,throttle:f,wrapNum:m,falseFn:_,formatNum:v,trim:w,splitWords:x,setOptions:P,getParamString:I,template:T,isArray:S,indexOf:N,emptyImageUrl:R,requestFn:q,cancelFn:G,requestAnimFrame:j,cancelAnimFrame:te};function qe(){}qe.extend=function(o){var l=function(){P(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},p=l.__super__=this.prototype,g=s(p);g.constructor=l,l.prototype=g;for(var y in this)Object.prototype.hasOwnProperty.call(this,y)&&y!=="prototype"&&y!=="__super__"&&(l[y]=this[y]);return o.statics&&r(l,o.statics),o.includes&&(rn(o.includes),r.apply(null,[g].concat(o.includes))),r(g,o),delete g.statics,delete g.includes,g.options&&(g.options=p.options?s(p.options):{},r(g.options,o.options)),g._initHooks=[],g.callInitHooks=function(){if(!this._initHooksCalled){p.callInitHooks&&p.callInitHooks.call(this),this._initHooksCalled=!0;for(var E=0,k=g._initHooks.length;E<k;E++)g._initHooks[E].call(this)}},l},qe.include=function(o){var l=this.prototype.options;return r(this.prototype,o),o.options&&(this.prototype.options=l,this.mergeOptions(o.options)),this},qe.mergeOptions=function(o){return r(this.prototype.options,o),this},qe.addInitHook=function(o){var l=Array.prototype.slice.call(arguments,1),p=typeof o=="function"?o:function(){this[o].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(p),this};function rn(o){if(!(typeof L>"u"||!L||!L.Mixin)){o=S(o)?o:[o];for(var l=0;l<o.length;l++)o[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ie={on:function(o,l,p){if(typeof o=="object")for(var g in o)this._on(g,o[g],l);else{o=x(o);for(var y=0,E=o.length;y<E;y++)this._on(o[y],l,p)}return this},off:function(o,l,p){if(!arguments.length)delete this._events;else if(typeof o=="object")for(var g in o)this._off(g,o[g],l);else{o=x(o);for(var y=arguments.length===1,E=0,k=o.length;E<k;E++)y?this._off(o[E]):this._off(o[E],l,p)}return this},_on:function(o,l,p,g){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(o,l,p)===!1){p===this&&(p=void 0);var y={fn:l,ctx:p};g&&(y.once=!0),this._events=this._events||{},this._events[o]=this._events[o]||[],this._events[o].push(y)}},_off:function(o,l,p){var g,y,E;if(this._events&&(g=this._events[o],!!g)){if(arguments.length===1){if(this._firingCount)for(y=0,E=g.length;y<E;y++)g[y].fn=_;delete this._events[o];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var k=this._listens(o,l,p);if(k!==!1){var b=g[k];this._firingCount&&(b.fn=_,this._events[o]=g=g.slice()),g.splice(k,1)}}},fire:function(o,l,p){if(!this.listens(o,p))return this;var g=r({},l,{type:o,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var y=this._events[o];if(y){this._firingCount=this._firingCount+1||1;for(var E=0,k=y.length;E<k;E++){var b=y[E],D=b.fn;b.once&&this.off(o,D,b.ctx),D.call(b.ctx||this,g)}this._firingCount--}}return p&&this._propagateEvent(g),this},listens:function(o,l,p,g){typeof o!="string"&&console.warn('"string" type argument expected');var y=l;typeof l!="function"&&(g=!!l,y=void 0,p=void 0);var E=this._events&&this._events[o];if(E&&E.length&&this._listens(o,y,p)!==!1)return!0;if(g){for(var k in this._eventParents)if(this._eventParents[k].listens(o,l,p,g))return!0}return!1},_listens:function(o,l,p){if(!this._events)return!1;var g=this._events[o]||[];if(!l)return!!g.length;p===this&&(p=void 0);for(var y=0,E=g.length;y<E;y++)if(g[y].fn===l&&g[y].ctx===p)return y;return!1},once:function(o,l,p){if(typeof o=="object")for(var g in o)this._on(g,o[g],l,!0);else{o=x(o);for(var y=0,E=o.length;y<E;y++)this._on(o[y],l,p,!0)}return this},addEventParent:function(o){return this._eventParents=this._eventParents||{},this._eventParents[d(o)]=o,this},removeEventParent:function(o){return this._eventParents&&delete this._eventParents[d(o)],this},_propagateEvent:function(o){for(var l in this._eventParents)this._eventParents[l].fire(o.type,r({layer:o.target,propagatedFrom:o.target},o),!0)}};ie.addEventListener=ie.on,ie.removeEventListener=ie.clearAllEventListeners=ie.off,ie.addOneTimeEventListener=ie.once,ie.fireEvent=ie.fire,ie.hasEventListeners=ie.listens;var je=qe.extend(ie);function F(o,l,p){this.x=p?Math.round(o):o,this.y=p?Math.round(l):l}var ne=Math.trunc||function(o){return o>0?Math.floor(o):Math.ceil(o)};F.prototype={clone:function(){return new F(this.x,this.y)},add:function(o){return this.clone()._add(H(o))},_add:function(o){return this.x+=o.x,this.y+=o.y,this},subtract:function(o){return this.clone()._subtract(H(o))},_subtract:function(o){return this.x-=o.x,this.y-=o.y,this},divideBy:function(o){return this.clone()._divideBy(o)},_divideBy:function(o){return this.x/=o,this.y/=o,this},multiplyBy:function(o){return this.clone()._multiplyBy(o)},_multiplyBy:function(o){return this.x*=o,this.y*=o,this},scaleBy:function(o){return new F(this.x*o.x,this.y*o.y)},unscaleBy:function(o){return new F(this.x/o.x,this.y/o.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ne(this.x),this.y=ne(this.y),this},distanceTo:function(o){o=H(o);var l=o.x-this.x,p=o.y-this.y;return Math.sqrt(l*l+p*p)},equals:function(o){return o=H(o),o.x===this.x&&o.y===this.y},contains:function(o){return o=H(o),Math.abs(o.x)<=Math.abs(this.x)&&Math.abs(o.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function H(o,l,p){return o instanceof F?o:S(o)?new F(o[0],o[1]):o==null?o:typeof o=="object"&&"x"in o&&"y"in o?new F(o.x,o.y):new F(o,l,p)}function ee(o,l){if(o)for(var p=l?[o,l]:o,g=0,y=p.length;g<y;g++)this.extend(p[g])}ee.prototype={extend:function(o){var l,p;if(!o)return this;if(o instanceof F||typeof o[0]=="number"||"x"in o)l=p=H(o);else if(o=ce(o),l=o.min,p=o.max,!l||!p)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=p.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(p.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(p.y,this.max.y)),this},getCenter:function(o){return H((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,o)},getBottomLeft:function(){return H(this.min.x,this.max.y)},getTopRight:function(){return H(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(o){var l,p;return typeof o[0]=="number"||o instanceof F?o=H(o):o=ce(o),o instanceof ee?(l=o.min,p=o.max):l=p=o,l.x>=this.min.x&&p.x<=this.max.x&&l.y>=this.min.y&&p.y<=this.max.y},intersects:function(o){o=ce(o);var l=this.min,p=this.max,g=o.min,y=o.max,E=y.x>=l.x&&g.x<=p.x,k=y.y>=l.y&&g.y<=p.y;return E&&k},overlaps:function(o){o=ce(o);var l=this.min,p=this.max,g=o.min,y=o.max,E=y.x>l.x&&g.x<p.x,k=y.y>l.y&&g.y<p.y;return E&&k},isValid:function(){return!!(this.min&&this.max)},pad:function(o){var l=this.min,p=this.max,g=Math.abs(l.x-p.x)*o,y=Math.abs(l.y-p.y)*o;return ce(H(l.x-g,l.y-y),H(p.x+g,p.y+y))},equals:function(o){return o?(o=ce(o),this.min.equals(o.getTopLeft())&&this.max.equals(o.getBottomRight())):!1}};function ce(o,l){return!o||o instanceof ee?o:new ee(o,l)}function Fe(o,l){if(o)for(var p=l?[o,l]:o,g=0,y=p.length;g<y;g++)this.extend(p[g])}Fe.prototype={extend:function(o){var l=this._southWest,p=this._northEast,g,y;if(o instanceof fe)g=o,y=o;else if(o instanceof Fe){if(g=o._southWest,y=o._northEast,!g||!y)return this}else return o?this.extend(re(o)||ge(o)):this;return!l&&!p?(this._southWest=new fe(g.lat,g.lng),this._northEast=new fe(y.lat,y.lng)):(l.lat=Math.min(g.lat,l.lat),l.lng=Math.min(g.lng,l.lng),p.lat=Math.max(y.lat,p.lat),p.lng=Math.max(y.lng,p.lng)),this},pad:function(o){var l=this._southWest,p=this._northEast,g=Math.abs(l.lat-p.lat)*o,y=Math.abs(l.lng-p.lng)*o;return new Fe(new fe(l.lat-g,l.lng-y),new fe(p.lat+g,p.lng+y))},getCenter:function(){return new fe((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new fe(this.getNorth(),this.getWest())},getSouthEast:function(){return new fe(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(o){typeof o[0]=="number"||o instanceof fe||"lat"in o?o=re(o):o=ge(o);var l=this._southWest,p=this._northEast,g,y;return o instanceof Fe?(g=o.getSouthWest(),y=o.getNorthEast()):g=y=o,g.lat>=l.lat&&y.lat<=p.lat&&g.lng>=l.lng&&y.lng<=p.lng},intersects:function(o){o=ge(o);var l=this._southWest,p=this._northEast,g=o.getSouthWest(),y=o.getNorthEast(),E=y.lat>=l.lat&&g.lat<=p.lat,k=y.lng>=l.lng&&g.lng<=p.lng;return E&&k},overlaps:function(o){o=ge(o);var l=this._southWest,p=this._northEast,g=o.getSouthWest(),y=o.getNorthEast(),E=y.lat>l.lat&&g.lat<p.lat,k=y.lng>l.lng&&g.lng<p.lng;return E&&k},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(o,l){return o?(o=ge(o),this._southWest.equals(o.getSouthWest(),l)&&this._northEast.equals(o.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ge(o,l){return o instanceof Fe?o:new Fe(o,l)}function fe(o,l,p){if(isNaN(o)||isNaN(l))throw new Error("Invalid LatLng object: ("+o+", "+l+")");this.lat=+o,this.lng=+l,p!==void 0&&(this.alt=+p)}fe.prototype={equals:function(o,l){if(!o)return!1;o=re(o);var p=Math.max(Math.abs(this.lat-o.lat),Math.abs(this.lng-o.lng));return p<=(l===void 0?1e-9:l)},toString:function(o){return"LatLng("+v(this.lat,o)+", "+v(this.lng,o)+")"},distanceTo:function(o){return Sn.distance(this,re(o))},wrap:function(){return Sn.wrapLatLng(this)},toBounds:function(o){var l=180*o/40075017,p=l/Math.cos(Math.PI/180*this.lat);return ge([this.lat-l,this.lng-p],[this.lat+l,this.lng+p])},clone:function(){return new fe(this.lat,this.lng,this.alt)}};function re(o,l,p){return o instanceof fe?o:S(o)&&typeof o[0]!="object"?o.length===3?new fe(o[0],o[1],o[2]):o.length===2?new fe(o[0],o[1]):null:o==null?o:typeof o=="object"&&"lat"in o?new fe(o.lat,"lng"in o?o.lng:o.lon,o.alt):l===void 0?null:new fe(o,l,p)}var ut={latLngToPoint:function(o,l){var p=this.projection.project(o),g=this.scale(l);return this.transformation._transform(p,g)},pointToLatLng:function(o,l){var p=this.scale(l),g=this.transformation.untransform(o,p);return this.projection.unproject(g)},project:function(o){return this.projection.project(o)},unproject:function(o){return this.projection.unproject(o)},scale:function(o){return 256*Math.pow(2,o)},zoom:function(o){return Math.log(o/256)/Math.LN2},getProjectedBounds:function(o){if(this.infinite)return null;var l=this.projection.bounds,p=this.scale(o),g=this.transformation.transform(l.min,p),y=this.transformation.transform(l.max,p);return new ee(g,y)},infinite:!1,wrapLatLng:function(o){var l=this.wrapLng?m(o.lng,this.wrapLng,!0):o.lng,p=this.wrapLat?m(o.lat,this.wrapLat,!0):o.lat,g=o.alt;return new fe(p,l,g)},wrapLatLngBounds:function(o){var l=o.getCenter(),p=this.wrapLatLng(l),g=l.lat-p.lat,y=l.lng-p.lng;if(g===0&&y===0)return o;var E=o.getSouthWest(),k=o.getNorthEast(),b=new fe(E.lat-g,E.lng-y),D=new fe(k.lat-g,k.lng-y);return new Fe(b,D)}},Sn=r({},ut,{wrapLng:[-180,180],R:6371e3,distance:function(o,l){var p=Math.PI/180,g=o.lat*p,y=l.lat*p,E=Math.sin((l.lat-o.lat)*p/2),k=Math.sin((l.lng-o.lng)*p/2),b=E*E+Math.cos(g)*Math.cos(y)*k*k,D=2*Math.atan2(Math.sqrt(b),Math.sqrt(1-b));return this.R*D}}),vf=6378137,pl={R:vf,MAX_LATITUDE:85.0511287798,project:function(o){var l=Math.PI/180,p=this.MAX_LATITUDE,g=Math.max(Math.min(p,o.lat),-p),y=Math.sin(g*l);return new F(this.R*o.lng*l,this.R*Math.log((1+y)/(1-y))/2)},unproject:function(o){var l=180/Math.PI;return new fe((2*Math.atan(Math.exp(o.y/this.R))-Math.PI/2)*l,o.x*l/this.R)},bounds:function(){var o=vf*Math.PI;return new ee([-o,-o],[o,o])}()};function ml(o,l,p,g){if(S(o)){this._a=o[0],this._b=o[1],this._c=o[2],this._d=o[3];return}this._a=o,this._b=l,this._c=p,this._d=g}ml.prototype={transform:function(o,l){return this._transform(o.clone(),l)},_transform:function(o,l){return l=l||1,o.x=l*(this._a*o.x+this._b),o.y=l*(this._c*o.y+this._d),o},untransform:function(o,l){return l=l||1,new F((o.x/l-this._b)/this._a,(o.y/l-this._d)/this._c)}};function Dr(o,l,p,g){return new ml(o,l,p,g)}var gl=r({},Sn,{code:"EPSG:3857",projection:pl,transformation:function(){var o=.5/(Math.PI*pl.R);return Dr(o,.5,-o,.5)}()}),lw=r({},gl,{code:"EPSG:900913"});function yf(o){return document.createElementNS("http://www.w3.org/2000/svg",o)}function wf(o,l){var p="",g,y,E,k,b,D;for(g=0,E=o.length;g<E;g++){for(b=o[g],y=0,k=b.length;y<k;y++)D=b[y],p+=(y?"L":"M")+D.x+" "+D.y;p+=l?Y.svg?"z":"x":""}return p||"M0 0"}var _l=document.documentElement.style,is="ActiveXObject"in window,uw=is&&!document.addEventListener,Ef="msLaunchUri"in navigator&&!("documentMode"in document),vl=Kt("webkit"),Tf=Kt("android"),Sf=Kt("android 2")||Kt("android 3"),cw=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),dw=Tf&&Kt("Google")&&cw<537&&!("AudioNode"in window),yl=!!window.opera,Cf=!Ef&&Kt("chrome"),xf=Kt("gecko")&&!vl&&!yl&&!is,fw=!Cf&&Kt("safari"),Pf=Kt("phantom"),Af="OTransition"in _l,hw=navigator.platform.indexOf("Win")===0,If=is&&"transition"in _l,wl="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Sf,kf="MozPerspective"in _l,pw=!window.L_DISABLE_3D&&(If||wl||kf)&&!Af&&!Pf,Or=typeof orientation<"u"||Kt("mobile"),mw=Or&&vl,gw=Or&&wl,Rf=!window.PointerEvent&&window.MSPointerEvent,Nf=!!(window.PointerEvent||Rf),bf="ontouchstart"in window||!!window.TouchEvent,_w=!window.L_NO_TOUCH&&(bf||Nf),vw=Or&&yl,yw=Or&&xf,ww=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ew=function(){var o=!1;try{var l=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("testPassiveEventSupport",_,l),window.removeEventListener("testPassiveEventSupport",_,l)}catch{}return o}(),Tw=function(){return!!document.createElement("canvas").getContext}(),El=!!(document.createElementNS&&yf("svg").createSVGRect),Sw=!!El&&function(){var o=document.createElement("div");return o.innerHTML="<svg/>",(o.firstChild&&o.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Cw=!El&&function(){try{var o=document.createElement("div");o.innerHTML='<v:shape adj="1"/>';var l=o.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),xw=navigator.platform.indexOf("Mac")===0,Pw=navigator.platform.indexOf("Linux")===0;function Kt(o){return navigator.userAgent.toLowerCase().indexOf(o)>=0}var Y={ie:is,ielt9:uw,edge:Ef,webkit:vl,android:Tf,android23:Sf,androidStock:dw,opera:yl,chrome:Cf,gecko:xf,safari:fw,phantom:Pf,opera12:Af,win:hw,ie3d:If,webkit3d:wl,gecko3d:kf,any3d:pw,mobile:Or,mobileWebkit:mw,mobileWebkit3d:gw,msPointer:Rf,pointer:Nf,touch:_w,touchNative:bf,mobileOpera:vw,mobileGecko:yw,retina:ww,passiveEvents:Ew,canvas:Tw,svg:El,vml:Cw,inlineSvg:Sw,mac:xw,linux:Pw},Mf=Y.msPointer?"MSPointerDown":"pointerdown",Lf=Y.msPointer?"MSPointerMove":"pointermove",Df=Y.msPointer?"MSPointerUp":"pointerup",Of=Y.msPointer?"MSPointerCancel":"pointercancel",Tl={touchstart:Mf,touchmove:Lf,touchend:Df,touchcancel:Of},Uf={touchstart:bw,touchmove:rs,touchend:rs,touchcancel:rs},ki={},Ff=!1;function Aw(o,l,p){return l==="touchstart"&&Nw(),Uf[l]?(p=Uf[l].bind(this,p),o.addEventListener(Tl[l],p,!1),p):(console.warn("wrong event specified:",l),_)}function Iw(o,l,p){if(!Tl[l]){console.warn("wrong event specified:",l);return}o.removeEventListener(Tl[l],p,!1)}function kw(o){ki[o.pointerId]=o}function Rw(o){ki[o.pointerId]&&(ki[o.pointerId]=o)}function Bf(o){delete ki[o.pointerId]}function Nw(){Ff||(document.addEventListener(Mf,kw,!0),document.addEventListener(Lf,Rw,!0),document.addEventListener(Df,Bf,!0),document.addEventListener(Of,Bf,!0),Ff=!0)}function rs(o,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var p in ki)l.touches.push(ki[p]);l.changedTouches=[l],o(l)}}function bw(o,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&We(l),rs(o,l)}function Mw(o){var l={},p,g;for(g in o)p=o[g],l[g]=p&&p.bind?p.bind(o):p;return o=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var Lw=200;function Dw(o,l){o.addEventListener("dblclick",l);var p=0,g;function y(E){if(E.detail!==1){g=E.detail;return}if(!(E.pointerType==="mouse"||E.sourceCapabilities&&!E.sourceCapabilities.firesTouchEvents)){var k=Gf(E);if(!(k.some(function(D){return D instanceof HTMLLabelElement&&D.attributes.for})&&!k.some(function(D){return D instanceof HTMLInputElement||D instanceof HTMLSelectElement}))){var b=Date.now();b-p<=Lw?(g++,g===2&&l(Mw(E))):g=1,p=b}}}return o.addEventListener("click",y),{dblclick:l,simDblclick:y}}function Ow(o,l){o.removeEventListener("dblclick",l.dblclick),o.removeEventListener("click",l.simDblclick)}var Sl=as(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ur=as(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),zf=Ur==="webkitTransition"||Ur==="OTransition"?Ur+"End":"transitionend";function Vf(o){return typeof o=="string"?document.getElementById(o):o}function Fr(o,l){var p=o.style[l]||o.currentStyle&&o.currentStyle[l];if((!p||p==="auto")&&document.defaultView){var g=document.defaultView.getComputedStyle(o,null);p=g?g[l]:null}return p==="auto"?null:p}function he(o,l,p){var g=document.createElement(o);return g.className=l||"",p&&p.appendChild(g),g}function Ce(o){var l=o.parentNode;l&&l.removeChild(o)}function os(o){for(;o.firstChild;)o.removeChild(o.firstChild)}function Ri(o){var l=o.parentNode;l&&l.lastChild!==o&&l.appendChild(o)}function Ni(o){var l=o.parentNode;l&&l.firstChild!==o&&l.insertBefore(o,l.firstChild)}function Cl(o,l){if(o.classList!==void 0)return o.classList.contains(l);var p=ss(o);return p.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(p)}function se(o,l){if(o.classList!==void 0)for(var p=x(l),g=0,y=p.length;g<y;g++)o.classList.add(p[g]);else if(!Cl(o,l)){var E=ss(o);xl(o,(E?E+" ":"")+l)}}function Ne(o,l){o.classList!==void 0?o.classList.remove(l):xl(o,w((" "+ss(o)+" ").replace(" "+l+" "," ")))}function xl(o,l){o.className.baseVal===void 0?o.className=l:o.className.baseVal=l}function ss(o){return o.correspondingElement&&(o=o.correspondingElement),o.className.baseVal===void 0?o.className:o.className.baseVal}function xt(o,l){"opacity"in o.style?o.style.opacity=l:"filter"in o.style&&Uw(o,l)}function Uw(o,l){var p=!1,g="DXImageTransform.Microsoft.Alpha";try{p=o.filters.item(g)}catch{if(l===1)return}l=Math.round(l*100),p?(p.Enabled=l!==100,p.Opacity=l):o.style.filter+=" progid:"+g+"(opacity="+l+")"}function as(o){for(var l=document.documentElement.style,p=0;p<o.length;p++)if(o[p]in l)return o[p];return!1}function ni(o,l,p){var g=l||new F(0,0);o.style[Sl]=(Y.ie3d?"translate("+g.x+"px,"+g.y+"px)":"translate3d("+g.x+"px,"+g.y+"px,0)")+(p?" scale("+p+")":"")}function Le(o,l){o._leaflet_pos=l,Y.any3d?ni(o,l):(o.style.left=l.x+"px",o.style.top=l.y+"px")}function ii(o){return o._leaflet_pos||new F(0,0)}var Br,zr,Pl;if("onselectstart"in document)Br=function(){oe(window,"selectstart",We)},zr=function(){_e(window,"selectstart",We)};else{var Vr=as(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Br=function(){if(Vr){var o=document.documentElement.style;Pl=o[Vr],o[Vr]="none"}},zr=function(){Vr&&(document.documentElement.style[Vr]=Pl,Pl=void 0)}}function Al(){oe(window,"dragstart",We)}function Il(){_e(window,"dragstart",We)}var ls,kl;function Rl(o){for(;o.tabIndex===-1;)o=o.parentNode;o.style&&(us(),ls=o,kl=o.style.outlineStyle,o.style.outlineStyle="none",oe(window,"keydown",us))}function us(){ls&&(ls.style.outlineStyle=kl,ls=void 0,kl=void 0,_e(window,"keydown",us))}function qf(o){do o=o.parentNode;while((!o.offsetWidth||!o.offsetHeight)&&o!==document.body);return o}function Nl(o){var l=o.getBoundingClientRect();return{x:l.width/o.offsetWidth||1,y:l.height/o.offsetHeight||1,boundingClientRect:l}}var Fw={__proto__:null,TRANSFORM:Sl,TRANSITION:Ur,TRANSITION_END:zf,get:Vf,getStyle:Fr,create:he,remove:Ce,empty:os,toFront:Ri,toBack:Ni,hasClass:Cl,addClass:se,removeClass:Ne,setClass:xl,getClass:ss,setOpacity:xt,testProp:as,setTransform:ni,setPosition:Le,getPosition:ii,get disableTextSelection(){return Br},get enableTextSelection(){return zr},disableImageDrag:Al,enableImageDrag:Il,preventOutline:Rl,restoreOutline:us,getSizedParentNode:qf,getScale:Nl};function oe(o,l,p,g){if(l&&typeof l=="object")for(var y in l)Ml(o,y,l[y],p);else{l=x(l);for(var E=0,k=l.length;E<k;E++)Ml(o,l[E],p,g)}return this}var Zt="_leaflet_events";function _e(o,l,p,g){if(arguments.length===1)Hf(o),delete o[Zt];else if(l&&typeof l=="object")for(var y in l)Ll(o,y,l[y],p);else if(l=x(l),arguments.length===2)Hf(o,function(b){return N(l,b)!==-1});else for(var E=0,k=l.length;E<k;E++)Ll(o,l[E],p,g);return this}function Hf(o,l){for(var p in o[Zt]){var g=p.split(/\d/)[0];(!l||l(g))&&Ll(o,g,null,null,p)}}var bl={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ml(o,l,p,g){var y=l+d(p)+(g?"_"+d(g):"");if(o[Zt]&&o[Zt][y])return this;var E=function(b){return p.call(g||o,b||window.event)},k=E;!Y.touchNative&&Y.pointer&&l.indexOf("touch")===0?E=Aw(o,l,E):Y.touch&&l==="dblclick"?E=Dw(o,E):"addEventListener"in o?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?o.addEventListener(bl[l]||l,E,Y.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(E=function(b){b=b||window.event,Ol(o,b)&&k(b)},o.addEventListener(bl[l],E,!1)):o.addEventListener(l,k,!1):o.attachEvent("on"+l,E),o[Zt]=o[Zt]||{},o[Zt][y]=E}function Ll(o,l,p,g,y){y=y||l+d(p)+(g?"_"+d(g):"");var E=o[Zt]&&o[Zt][y];if(!E)return this;!Y.touchNative&&Y.pointer&&l.indexOf("touch")===0?Iw(o,l,E):Y.touch&&l==="dblclick"?Ow(o,E):"removeEventListener"in o?o.removeEventListener(bl[l]||l,E,!1):o.detachEvent("on"+l,E),o[Zt][y]=null}function ri(o){return o.stopPropagation?o.stopPropagation():o.originalEvent?o.originalEvent._stopped=!0:o.cancelBubble=!0,this}function Dl(o){return Ml(o,"wheel",ri),this}function qr(o){return oe(o,"mousedown touchstart dblclick contextmenu",ri),o._leaflet_disable_click=!0,this}function We(o){return o.preventDefault?o.preventDefault():o.returnValue=!1,this}function oi(o){return We(o),ri(o),this}function Gf(o){if(o.composedPath)return o.composedPath();for(var l=[],p=o.target;p;)l.push(p),p=p.parentNode;return l}function $f(o,l){if(!l)return new F(o.clientX,o.clientY);var p=Nl(l),g=p.boundingClientRect;return new F((o.clientX-g.left)/p.x-l.clientLeft,(o.clientY-g.top)/p.y-l.clientTop)}var Bw=Y.linux&&Y.chrome?window.devicePixelRatio:Y.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Wf(o){return Y.edge?o.wheelDeltaY/2:o.deltaY&&o.deltaMode===0?-o.deltaY/Bw:o.deltaY&&o.deltaMode===1?-o.deltaY*20:o.deltaY&&o.deltaMode===2?-o.deltaY*60:o.deltaX||o.deltaZ?0:o.wheelDelta?(o.wheelDeltaY||o.wheelDelta)/2:o.detail&&Math.abs(o.detail)<32765?-o.detail*20:o.detail?o.detail/-32765*60:0}function Ol(o,l){var p=l.relatedTarget;if(!p)return!0;try{for(;p&&p!==o;)p=p.parentNode}catch{return!1}return p!==o}var zw={__proto__:null,on:oe,off:_e,stopPropagation:ri,disableScrollPropagation:Dl,disableClickPropagation:qr,preventDefault:We,stop:oi,getPropagationPath:Gf,getMousePosition:$f,getWheelDelta:Wf,isExternalTarget:Ol,addListener:oe,removeListener:_e},Jf=je.extend({run:function(o,l,p,g){this.stop(),this._el=o,this._inProgress=!0,this._duration=p||.25,this._easeOutPower=1/Math.max(g||.5,.2),this._startPos=ii(o),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=j(this._animate,this),this._step()},_step:function(o){var l=+new Date-this._startTime,p=this._duration*1e3;l<p?this._runFrame(this._easeOut(l/p),o):(this._runFrame(1),this._complete())},_runFrame:function(o,l){var p=this._startPos.add(this._offset.multiplyBy(o));l&&p._round(),Le(this._el,p),this.fire("step")},_complete:function(){te(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(o){return 1-Math.pow(1-o,this._easeOutPower)}}),ue=je.extend({options:{crs:gl,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(o,l){l=P(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(o),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(re(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ur&&Y.any3d&&!Y.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),oe(this._proxy,zf,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(o,l,p){if(l=l===void 0?this._zoom:this._limitZoom(l),o=this._limitCenter(re(o),l,this.options.maxBounds),p=p||{},this._stop(),this._loaded&&!p.reset&&p!==!0){p.animate!==void 0&&(p.zoom=r({animate:p.animate},p.zoom),p.pan=r({animate:p.animate,duration:p.duration},p.pan));var g=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(o,l,p.zoom):this._tryAnimatedPan(o,p.pan);if(g)return clearTimeout(this._sizeTimer),this}return this._resetView(o,l,p.pan&&p.pan.noMoveStart),this},setZoom:function(o,l){return this._loaded?this.setView(this.getCenter(),o,{zoom:l}):(this._zoom=o,this)},zoomIn:function(o,l){return o=o||(Y.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+o,l)},zoomOut:function(o,l){return o=o||(Y.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-o,l)},setZoomAround:function(o,l,p){var g=this.getZoomScale(l),y=this.getSize().divideBy(2),E=o instanceof F?o:this.latLngToContainerPoint(o),k=E.subtract(y).multiplyBy(1-1/g),b=this.containerPointToLatLng(y.add(k));return this.setView(b,l,{zoom:p})},_getBoundsCenterZoom:function(o,l){l=l||{},o=o.getBounds?o.getBounds():ge(o);var p=H(l.paddingTopLeft||l.padding||[0,0]),g=H(l.paddingBottomRight||l.padding||[0,0]),y=this.getBoundsZoom(o,!1,p.add(g));if(y=typeof l.maxZoom=="number"?Math.min(l.maxZoom,y):y,y===1/0)return{center:o.getCenter(),zoom:y};var E=g.subtract(p).divideBy(2),k=this.project(o.getSouthWest(),y),b=this.project(o.getNorthEast(),y),D=this.unproject(k.add(b).divideBy(2).add(E),y);return{center:D,zoom:y}},fitBounds:function(o,l){if(o=ge(o),!o.isValid())throw new Error("Bounds are not valid.");var p=this._getBoundsCenterZoom(o,l);return this.setView(p.center,p.zoom,l)},fitWorld:function(o){return this.fitBounds([[-90,-180],[90,180]],o)},panTo:function(o,l){return this.setView(o,this._zoom,{pan:l})},panBy:function(o,l){if(o=H(o).round(),l=l||{},!o.x&&!o.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(o))return this._resetView(this.unproject(this.project(this.getCenter()).add(o)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Jf,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){se(this._mapPane,"leaflet-pan-anim");var p=this._getMapPanePos().subtract(o).round();this._panAnim.run(this._mapPane,p,l.duration||.25,l.easeLinearity)}else this._rawPanBy(o),this.fire("move").fire("moveend");return this},flyTo:function(o,l,p){if(p=p||{},p.animate===!1||!Y.any3d)return this.setView(o,l,p);this._stop();var g=this.project(this.getCenter()),y=this.project(o),E=this.getSize(),k=this._zoom;o=re(o),l=l===void 0?k:l;var b=Math.max(E.x,E.y),D=b*this.getZoomScale(k,l),B=y.distanceTo(g)||1,W=1.42,X=W*W;function ae(De){var Es=De?-1:1,IE=De?D:b,kE=D*D-b*b+Es*X*X*B*B,RE=2*IE*X*B,Jl=kE/RE,Ah=Math.sqrt(Jl*Jl+1)-Jl,NE=Ah<1e-9?-18:Math.log(Ah);return NE}function it(De){return(Math.exp(De)-Math.exp(-De))/2}function He(De){return(Math.exp(De)+Math.exp(-De))/2}function At(De){return it(De)/He(De)}var ct=ae(0);function Ui(De){return b*(He(ct)/He(ct+W*De))}function CE(De){return b*(He(ct)*At(ct+W*De)-it(ct))/X}function xE(De){return 1-Math.pow(1-De,1.5)}var PE=Date.now(),xh=(ae(1)-ct)/W,AE=p.duration?1e3*p.duration:1e3*xh*.8;function Ph(){var De=(Date.now()-PE)/AE,Es=xE(De)*xh;De<=1?(this._flyToFrame=j(Ph,this),this._move(this.unproject(g.add(y.subtract(g).multiplyBy(CE(Es)/B)),k),this.getScaleZoom(b/Ui(Es),k),{flyTo:!0})):this._move(o,l)._moveEnd(!0)}return this._moveStart(!0,p.noMoveStart),Ph.call(this),this},flyToBounds:function(o,l){var p=this._getBoundsCenterZoom(o,l);return this.flyTo(p.center,p.zoom,l)},setMaxBounds:function(o){return o=ge(o),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),o.isValid()?(this.options.maxBounds=o,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(o){var l=this.options.minZoom;return this.options.minZoom=o,this._loaded&&l!==o&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(o):this},setMaxZoom:function(o){var l=this.options.maxZoom;return this.options.maxZoom=o,this._loaded&&l!==o&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(o):this},panInsideBounds:function(o,l){this._enforcingBounds=!0;var p=this.getCenter(),g=this._limitCenter(p,this._zoom,ge(o));return p.equals(g)||this.panTo(g,l),this._enforcingBounds=!1,this},panInside:function(o,l){l=l||{};var p=H(l.paddingTopLeft||l.padding||[0,0]),g=H(l.paddingBottomRight||l.padding||[0,0]),y=this.project(this.getCenter()),E=this.project(o),k=this.getPixelBounds(),b=ce([k.min.add(p),k.max.subtract(g)]),D=b.getSize();if(!b.contains(E)){this._enforcingBounds=!0;var B=E.subtract(b.getCenter()),W=b.extend(E).getSize().subtract(D);y.x+=B.x<0?-W.x:W.x,y.y+=B.y<0?-W.y:W.y,this.panTo(this.unproject(y),l),this._enforcingBounds=!1}return this},invalidateSize:function(o){if(!this._loaded)return this;o=r({animate:!1,pan:!0},o===!0?{animate:!0}:o);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var p=this.getSize(),g=l.divideBy(2).round(),y=p.divideBy(2).round(),E=g.subtract(y);return!E.x&&!E.y?this:(o.animate&&o.pan?this.panBy(E):(o.pan&&this._rawPanBy(E),this.fire("move"),o.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:p}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(o){if(o=this._locateOptions=r({timeout:1e4,watch:!1},o),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=a(this._handleGeolocationResponse,this),p=a(this._handleGeolocationError,this);return o.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,p,o):navigator.geolocation.getCurrentPosition(l,p,o),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(o){if(this._container._leaflet_id){var l=o.code,p=o.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+p+"."})}},_handleGeolocationResponse:function(o){if(this._container._leaflet_id){var l=o.coords.latitude,p=o.coords.longitude,g=new fe(l,p),y=g.toBounds(o.coords.accuracy*2),E=this._locateOptions;if(E.setView){var k=this.getBoundsZoom(y);this.setView(g,E.maxZoom?Math.min(k,E.maxZoom):k)}var b={latlng:g,bounds:y,timestamp:o.timestamp};for(var D in o.coords)typeof o.coords[D]=="number"&&(b[D]=o.coords[D]);this.fire("locationfound",b)}},addHandler:function(o,l){if(!l)return this;var p=this[o]=new l(this);return this._handlers.push(p),this.options[o]&&p.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ce(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(te(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var o;for(o in this._layers)this._layers[o].remove();for(o in this._panes)Ce(this._panes[o]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(o,l){var p="leaflet-pane"+(o?" leaflet-"+o.replace("Pane","")+"-pane":""),g=he("div",p,l||this._mapPane);return o&&(this._panes[o]=g),g},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var o=this.getPixelBounds(),l=this.unproject(o.getBottomLeft()),p=this.unproject(o.getTopRight());return new Fe(l,p)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(o,l,p){o=ge(o),p=H(p||[0,0]);var g=this.getZoom()||0,y=this.getMinZoom(),E=this.getMaxZoom(),k=o.getNorthWest(),b=o.getSouthEast(),D=this.getSize().subtract(p),B=ce(this.project(b,g),this.project(k,g)).getSize(),W=Y.any3d?this.options.zoomSnap:1,X=D.x/B.x,ae=D.y/B.y,it=l?Math.max(X,ae):Math.min(X,ae);return g=this.getScaleZoom(it,g),W&&(g=Math.round(g/(W/100))*(W/100),g=l?Math.ceil(g/W)*W:Math.floor(g/W)*W),Math.max(y,Math.min(E,g))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new F(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(o,l){var p=this._getTopLeftPoint(o,l);return new ee(p,p.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(o){return this.options.crs.getProjectedBounds(o===void 0?this.getZoom():o)},getPane:function(o){return typeof o=="string"?this._panes[o]:o},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(o,l){var p=this.options.crs;return l=l===void 0?this._zoom:l,p.scale(o)/p.scale(l)},getScaleZoom:function(o,l){var p=this.options.crs;l=l===void 0?this._zoom:l;var g=p.zoom(o*p.scale(l));return isNaN(g)?1/0:g},project:function(o,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(re(o),l)},unproject:function(o,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(H(o),l)},layerPointToLatLng:function(o){var l=H(o).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(o){var l=this.project(re(o))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(o){return this.options.crs.wrapLatLng(re(o))},wrapLatLngBounds:function(o){return this.options.crs.wrapLatLngBounds(ge(o))},distance:function(o,l){return this.options.crs.distance(re(o),re(l))},containerPointToLayerPoint:function(o){return H(o).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(o){return H(o).add(this._getMapPanePos())},containerPointToLatLng:function(o){var l=this.containerPointToLayerPoint(H(o));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(o){return this.layerPointToContainerPoint(this.latLngToLayerPoint(re(o)))},mouseEventToContainerPoint:function(o){return $f(o,this._container)},mouseEventToLayerPoint:function(o){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(o))},mouseEventToLatLng:function(o){return this.layerPointToLatLng(this.mouseEventToLayerPoint(o))},_initContainer:function(o){var l=this._container=Vf(o);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");oe(l,"scroll",this._onScroll,this),this._containerId=d(l)},_initLayout:function(){var o=this._container;this._fadeAnimated=this.options.fadeAnimation&&Y.any3d,se(o,"leaflet-container"+(Y.touch?" leaflet-touch":"")+(Y.retina?" leaflet-retina":"")+(Y.ielt9?" leaflet-oldie":"")+(Y.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=Fr(o,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(o.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var o=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Le(this._mapPane,new F(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(se(o.markerPane,"leaflet-zoom-hide"),se(o.shadowPane,"leaflet-zoom-hide"))},_resetView:function(o,l,p){Le(this._mapPane,new F(0,0));var g=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var y=this._zoom!==l;this._moveStart(y,p)._move(o,l)._moveEnd(y),this.fire("viewreset"),g&&this.fire("load")},_moveStart:function(o,l){return o&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(o,l,p,g){l===void 0&&(l=this._zoom);var y=this._zoom!==l;return this._zoom=l,this._lastCenter=o,this._pixelOrigin=this._getNewPixelOrigin(o),g?p&&p.pinch&&this.fire("zoom",p):((y||p&&p.pinch)&&this.fire("zoom",p),this.fire("move",p)),this},_moveEnd:function(o){return o&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return te(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(o){Le(this._mapPane,this._getMapPanePos().subtract(o))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(o){this._targets={},this._targets[d(this._container)]=this;var l=o?_e:oe;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),Y.any3d&&this.options.transform3DLimit&&(o?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){te(this._resizeRequest),this._resizeRequest=j(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var o=this._getMapPanePos();Math.max(Math.abs(o.x),Math.abs(o.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(o,l){for(var p=[],g,y=l==="mouseout"||l==="mouseover",E=o.target||o.srcElement,k=!1;E;){if(g=this._targets[d(E)],g&&(l==="click"||l==="preclick")&&this._draggableMoved(g)){k=!0;break}if(g&&g.listens(l,!0)&&(y&&!Ol(E,o)||(p.push(g),y))||E===this._container)break;E=E.parentNode}return!p.length&&!k&&!y&&this.listens(l,!0)&&(p=[this]),p},_isClickDisabled:function(o){for(;o&&o!==this._container;){if(o._leaflet_disable_click)return!0;o=o.parentNode}},_handleDOMEvent:function(o){var l=o.target||o.srcElement;if(!(!this._loaded||l._leaflet_disable_events||o.type==="click"&&this._isClickDisabled(l))){var p=o.type;p==="mousedown"&&Rl(l),this._fireDOMEvent(o,p)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(o,l,p){if(o.type==="click"){var g=r({},o);g.type="preclick",this._fireDOMEvent(g,g.type,p)}var y=this._findEventTargets(o,l);if(p){for(var E=[],k=0;k<p.length;k++)p[k].listens(l,!0)&&E.push(p[k]);y=E.concat(y)}if(y.length){l==="contextmenu"&&We(o);var b=y[0],D={originalEvent:o};if(o.type!=="keypress"&&o.type!=="keydown"&&o.type!=="keyup"){var B=b.getLatLng&&(!b._radius||b._radius<=10);D.containerPoint=B?this.latLngToContainerPoint(b.getLatLng()):this.mouseEventToContainerPoint(o),D.layerPoint=this.containerPointToLayerPoint(D.containerPoint),D.latlng=B?b.getLatLng():this.layerPointToLatLng(D.layerPoint)}for(k=0;k<y.length;k++)if(y[k].fire(l,D,!0),D.originalEvent._stopped||y[k].options.bubblingMouseEvents===!1&&N(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(o){return o=o.dragging&&o.dragging.enabled()?o:this,o.dragging&&o.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var o=0,l=this._handlers.length;o<l;o++)this._handlers[o].disable()},whenReady:function(o,l){return this._loaded?o.call(l||this,{target:this}):this.on("load",o,l),this},_getMapPanePos:function(){return ii(this._mapPane)||new F(0,0)},_moved:function(){var o=this._getMapPanePos();return o&&!o.equals([0,0])},_getTopLeftPoint:function(o,l){var p=o&&l!==void 0?this._getNewPixelOrigin(o,l):this.getPixelOrigin();return p.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(o,l){var p=this.getSize()._divideBy(2);return this.project(o,l)._subtract(p)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(o,l,p){var g=this._getNewPixelOrigin(p,l);return this.project(o,l)._subtract(g)},_latLngBoundsToNewLayerBounds:function(o,l,p){var g=this._getNewPixelOrigin(p,l);return ce([this.project(o.getSouthWest(),l)._subtract(g),this.project(o.getNorthWest(),l)._subtract(g),this.project(o.getSouthEast(),l)._subtract(g),this.project(o.getNorthEast(),l)._subtract(g)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(o){return this.latLngToLayerPoint(o).subtract(this._getCenterLayerPoint())},_limitCenter:function(o,l,p){if(!p)return o;var g=this.project(o,l),y=this.getSize().divideBy(2),E=new ee(g.subtract(y),g.add(y)),k=this._getBoundsOffset(E,p,l);return Math.abs(k.x)<=1&&Math.abs(k.y)<=1?o:this.unproject(g.add(k),l)},_limitOffset:function(o,l){if(!l)return o;var p=this.getPixelBounds(),g=new ee(p.min.add(o),p.max.add(o));return o.add(this._getBoundsOffset(g,l))},_getBoundsOffset:function(o,l,p){var g=ce(this.project(l.getNorthEast(),p),this.project(l.getSouthWest(),p)),y=g.min.subtract(o.min),E=g.max.subtract(o.max),k=this._rebound(y.x,-E.x),b=this._rebound(y.y,-E.y);return new F(k,b)},_rebound:function(o,l){return o+l>0?Math.round(o-l)/2:Math.max(0,Math.ceil(o))-Math.max(0,Math.floor(l))},_limitZoom:function(o){var l=this.getMinZoom(),p=this.getMaxZoom(),g=Y.any3d?this.options.zoomSnap:1;return g&&(o=Math.round(o/g)*g),Math.max(l,Math.min(p,o))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ne(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(o,l){var p=this._getCenterOffset(o)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(p)?!1:(this.panBy(p,l),!0)},_createAnimProxy:function(){var o=this._proxy=he("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(o),this.on("zoomanim",function(l){var p=Sl,g=this._proxy.style[p];ni(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),g===this._proxy.style[p]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ce(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var o=this.getCenter(),l=this.getZoom();ni(this._proxy,this.project(o,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(o){this._animatingZoom&&o.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(o,l,p){if(this._animatingZoom)return!0;if(p=p||{},!this._zoomAnimated||p.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var g=this.getZoomScale(l),y=this._getCenterOffset(o)._divideBy(1-1/g);return p.animate!==!0&&!this.getSize().contains(y)?!1:(j(function(){this._moveStart(!0,p.noMoveStart||!1)._animateZoom(o,l,!0)},this),!0)},_animateZoom:function(o,l,p,g){this._mapPane&&(p&&(this._animatingZoom=!0,this._animateToCenter=o,this._animateToZoom=l,se(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:o,zoom:l,noUpdate:g}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ne(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Vw(o,l){return new ue(o,l)}var Dt=qe.extend({options:{position:"topright"},initialize:function(o){P(this,o)},getPosition:function(){return this.options.position},setPosition:function(o){var l=this._map;return l&&l.removeControl(this),this.options.position=o,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(o){this.remove(),this._map=o;var l=this._container=this.onAdd(o),p=this.getPosition(),g=o._controlCorners[p];return se(l,"leaflet-control"),p.indexOf("bottom")!==-1?g.insertBefore(l,g.firstChild):g.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ce(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(o){this._map&&o&&o.screenX>0&&o.screenY>0&&this._map.getContainer().focus()}}),Hr=function(o){return new Dt(o)};ue.include({addControl:function(o){return o.addTo(this),this},removeControl:function(o){return o.remove(),this},_initControlPos:function(){var o=this._controlCorners={},l="leaflet-",p=this._controlContainer=he("div",l+"control-container",this._container);function g(y,E){var k=l+y+" "+l+E;o[y+E]=he("div",k,p)}g("top","left"),g("top","right"),g("bottom","left"),g("bottom","right")},_clearControlPos:function(){for(var o in this._controlCorners)Ce(this._controlCorners[o]);Ce(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Kf=Dt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(o,l,p,g){return p<g?-1:g<p?1:0}},initialize:function(o,l,p){P(this,p),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var g in o)this._addLayer(o[g],g);for(g in l)this._addLayer(l[g],g,!0)},onAdd:function(o){this._initLayout(),this._update(),this._map=o,o.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(o){return Dt.prototype.addTo.call(this,o),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(o,l){return this._addLayer(o,l),this._map?this._update():this},addOverlay:function(o,l){return this._addLayer(o,l,!0),this._map?this._update():this},removeLayer:function(o){o.off("add remove",this._onLayerChange,this);var l=this._getLayer(d(o));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){se(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var o=this._map.getSize().y-(this._container.offsetTop+50);return o<this._section.clientHeight?(se(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=o+"px"):Ne(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ne(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var o="leaflet-control-layers",l=this._container=he("div",o),p=this.options.collapsed;l.setAttribute("aria-haspopup",!0),qr(l),Dl(l);var g=this._section=he("section",o+"-list");p&&(this._map.on("click",this.collapse,this),oe(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var y=this._layersLink=he("a",o+"-toggle",l);y.href="#",y.title="Layers",y.setAttribute("role","button"),oe(y,{keydown:function(E){E.keyCode===13&&this._expandSafely()},click:function(E){We(E),this._expandSafely()}},this),p||this.expand(),this._baseLayersList=he("div",o+"-base",g),this._separator=he("div",o+"-separator",g),this._overlaysList=he("div",o+"-overlays",g),l.appendChild(g)},_getLayer:function(o){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&d(this._layers[l].layer)===o)return this._layers[l]},_addLayer:function(o,l,p){this._map&&o.on("add remove",this._onLayerChange,this),this._layers.push({layer:o,name:l,overlay:p}),this.options.sortLayers&&this._layers.sort(a(function(g,y){return this.options.sortFunction(g.layer,y.layer,g.name,y.name)},this)),this.options.autoZIndex&&o.setZIndex&&(this._lastZIndex++,o.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;os(this._baseLayersList),os(this._overlaysList),this._layerControlInputs=[];var o,l,p,g,y=0;for(p=0;p<this._layers.length;p++)g=this._layers[p],this._addItem(g),l=l||g.overlay,o=o||!g.overlay,y+=g.overlay?0:1;return this.options.hideSingleBase&&(o=o&&y>1,this._baseLayersList.style.display=o?"":"none"),this._separator.style.display=l&&o?"":"none",this},_onLayerChange:function(o){this._handlingClick||this._update();var l=this._getLayer(d(o.target)),p=l.overlay?o.type==="add"?"overlayadd":"overlayremove":o.type==="add"?"baselayerchange":null;p&&this._map.fire(p,l)},_createRadioElement:function(o,l){var p='<input type="radio" class="leaflet-control-layers-selector" name="'+o+'"'+(l?' checked="checked"':"")+"/>",g=document.createElement("div");return g.innerHTML=p,g.firstChild},_addItem:function(o){var l=document.createElement("label"),p=this._map.hasLayer(o.layer),g;o.overlay?(g=document.createElement("input"),g.type="checkbox",g.className="leaflet-control-layers-selector",g.defaultChecked=p):g=this._createRadioElement("leaflet-base-layers_"+d(this),p),this._layerControlInputs.push(g),g.layerId=d(o.layer),oe(g,"click",this._onInputClick,this);var y=document.createElement("span");y.innerHTML=" "+o.name;var E=document.createElement("span");l.appendChild(E),E.appendChild(g),E.appendChild(y);var k=o.overlay?this._overlaysList:this._baseLayersList;return k.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var o=this._layerControlInputs,l,p,g=[],y=[];this._handlingClick=!0;for(var E=o.length-1;E>=0;E--)l=o[E],p=this._getLayer(l.layerId).layer,l.checked?g.push(p):l.checked||y.push(p);for(E=0;E<y.length;E++)this._map.hasLayer(y[E])&&this._map.removeLayer(y[E]);for(E=0;E<g.length;E++)this._map.hasLayer(g[E])||this._map.addLayer(g[E]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var o=this._layerControlInputs,l,p,g=this._map.getZoom(),y=o.length-1;y>=0;y--)l=o[y],p=this._getLayer(l.layerId).layer,l.disabled=p.options.minZoom!==void 0&&g<p.options.minZoom||p.options.maxZoom!==void 0&&g>p.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var o=this._section;this._preventClick=!0,oe(o,"click",We),this.expand();var l=this;setTimeout(function(){_e(o,"click",We),l._preventClick=!1})}}),qw=function(o,l,p){return new Kf(o,l,p)},Ul=Dt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(o){var l="leaflet-control-zoom",p=he("div",l+" leaflet-bar"),g=this.options;return this._zoomInButton=this._createButton(g.zoomInText,g.zoomInTitle,l+"-in",p,this._zoomIn),this._zoomOutButton=this._createButton(g.zoomOutText,g.zoomOutTitle,l+"-out",p,this._zoomOut),this._updateDisabled(),o.on("zoomend zoomlevelschange",this._updateDisabled,this),p},onRemove:function(o){o.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(o){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(o.shiftKey?3:1))},_zoomOut:function(o){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(o.shiftKey?3:1))},_createButton:function(o,l,p,g,y){var E=he("a",p,g);return E.innerHTML=o,E.href="#",E.title=l,E.setAttribute("role","button"),E.setAttribute("aria-label",l),qr(E),oe(E,"click",oi),oe(E,"click",y,this),oe(E,"click",this._refocusOnMap,this),E},_updateDisabled:function(){var o=this._map,l="leaflet-disabled";Ne(this._zoomInButton,l),Ne(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||o._zoom===o.getMinZoom())&&(se(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||o._zoom===o.getMaxZoom())&&(se(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});ue.mergeOptions({zoomControl:!0}),ue.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ul,this.addControl(this.zoomControl))});var Hw=function(o){return new Ul(o)},Zf=Dt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(o){var l="leaflet-control-scale",p=he("div",l),g=this.options;return this._addScales(g,l+"-line",p),o.on(g.updateWhenIdle?"moveend":"move",this._update,this),o.whenReady(this._update,this),p},onRemove:function(o){o.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(o,l,p){o.metric&&(this._mScale=he("div",l,p)),o.imperial&&(this._iScale=he("div",l,p))},_update:function(){var o=this._map,l=o.getSize().y/2,p=o.distance(o.containerPointToLatLng([0,l]),o.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(p)},_updateScales:function(o){this.options.metric&&o&&this._updateMetric(o),this.options.imperial&&o&&this._updateImperial(o)},_updateMetric:function(o){var l=this._getRoundNum(o),p=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,p,l/o)},_updateImperial:function(o){var l=o*3.2808399,p,g,y;l>5280?(p=l/5280,g=this._getRoundNum(p),this._updateScale(this._iScale,g+" mi",g/p)):(y=this._getRoundNum(l),this._updateScale(this._iScale,y+" ft",y/l))},_updateScale:function(o,l,p){o.style.width=Math.round(this.options.maxWidth*p)+"px",o.innerHTML=l},_getRoundNum:function(o){var l=Math.pow(10,(Math.floor(o)+"").length-1),p=o/l;return p=p>=10?10:p>=5?5:p>=3?3:p>=2?2:1,l*p}}),Gw=function(o){return new Zf(o)},$w='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Fl=Dt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Y.inlineSvg?$w+" ":"")+"Leaflet</a>"},initialize:function(o){P(this,o),this._attributions={}},onAdd:function(o){o.attributionControl=this,this._container=he("div","leaflet-control-attribution"),qr(this._container);for(var l in o._layers)o._layers[l].getAttribution&&this.addAttribution(o._layers[l].getAttribution());return this._update(),o.on("layeradd",this._addAttribution,this),this._container},onRemove:function(o){o.off("layeradd",this._addAttribution,this)},_addAttribution:function(o){o.layer.getAttribution&&(this.addAttribution(o.layer.getAttribution()),o.layer.once("remove",function(){this.removeAttribution(o.layer.getAttribution())},this))},setPrefix:function(o){return this.options.prefix=o,this._update(),this},addAttribution:function(o){return o?(this._attributions[o]||(this._attributions[o]=0),this._attributions[o]++,this._update(),this):this},removeAttribution:function(o){return o?(this._attributions[o]&&(this._attributions[o]--,this._update()),this):this},_update:function(){if(this._map){var o=[];for(var l in this._attributions)this._attributions[l]&&o.push(l);var p=[];this.options.prefix&&p.push(this.options.prefix),o.length&&p.push(o.join(", ")),this._container.innerHTML=p.join(' <span aria-hidden="true">|</span> ')}}});ue.mergeOptions({attributionControl:!0}),ue.addInitHook(function(){this.options.attributionControl&&new Fl().addTo(this)});var Ww=function(o){return new Fl(o)};Dt.Layers=Kf,Dt.Zoom=Ul,Dt.Scale=Zf,Dt.Attribution=Fl,Hr.layers=qw,Hr.zoom=Hw,Hr.scale=Gw,Hr.attribution=Ww;var Yt=qe.extend({initialize:function(o){this._map=o},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Yt.addTo=function(o,l){return o.addHandler(l,this),this};var Jw={Events:ie},Yf=Y.touch?"touchstart mousedown":"mousedown",Cn=je.extend({options:{clickTolerance:3},initialize:function(o,l,p,g){P(this,g),this._element=o,this._dragStartTarget=l||o,this._preventOutline=p},enable:function(){this._enabled||(oe(this._dragStartTarget,Yf,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Cn._dragging===this&&this.finishDrag(!0),_e(this._dragStartTarget,Yf,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(o){if(this._enabled&&(this._moved=!1,!Cl(this._element,"leaflet-zoom-anim"))){if(o.touches&&o.touches.length!==1){Cn._dragging===this&&this.finishDrag();return}if(!(Cn._dragging||o.shiftKey||o.which!==1&&o.button!==1&&!o.touches)&&(Cn._dragging=this,this._preventOutline&&Rl(this._element),Al(),Br(),!this._moving)){this.fire("down");var l=o.touches?o.touches[0]:o,p=qf(this._element);this._startPoint=new F(l.clientX,l.clientY),this._startPos=ii(this._element),this._parentScale=Nl(p);var g=o.type==="mousedown";oe(document,g?"mousemove":"touchmove",this._onMove,this),oe(document,g?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(o){if(this._enabled){if(o.touches&&o.touches.length>1){this._moved=!0;return}var l=o.touches&&o.touches.length===1?o.touches[0]:o,p=new F(l.clientX,l.clientY)._subtract(this._startPoint);!p.x&&!p.y||Math.abs(p.x)+Math.abs(p.y)<this.options.clickTolerance||(p.x/=this._parentScale.x,p.y/=this._parentScale.y,We(o),this._moved||(this.fire("dragstart"),this._moved=!0,se(document.body,"leaflet-dragging"),this._lastTarget=o.target||o.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),se(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(p),this._moving=!0,this._lastEvent=o,this._updatePosition())}},_updatePosition:function(){var o={originalEvent:this._lastEvent};this.fire("predrag",o),Le(this._element,this._newPos),this.fire("drag",o)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(o){Ne(document.body,"leaflet-dragging"),this._lastTarget&&(Ne(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),_e(document,"mousemove touchmove",this._onMove,this),_e(document,"mouseup touchend touchcancel",this._onUp,this),Il(),zr();var l=this._moved&&this._moving;this._moving=!1,Cn._dragging=!1,l&&this.fire("dragend",{noInertia:o,distance:this._newPos.distanceTo(this._startPos)})}});function jf(o,l,p){var g,y=[1,4,2,8],E,k,b,D,B,W,X,ae;for(E=0,W=o.length;E<W;E++)o[E]._code=si(o[E],l);for(b=0;b<4;b++){for(X=y[b],g=[],E=0,W=o.length,k=W-1;E<W;k=E++)D=o[E],B=o[k],D._code&X?B._code&X||(ae=cs(B,D,X,l,p),ae._code=si(ae,l),g.push(ae)):(B._code&X&&(ae=cs(B,D,X,l,p),ae._code=si(ae,l),g.push(ae)),g.push(D));o=g}return o}function Qf(o,l){var p,g,y,E,k,b,D,B,W;if(!o||o.length===0)throw new Error("latlngs not passed");Pt(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var X=re([0,0]),ae=ge(o),it=ae.getNorthWest().distanceTo(ae.getSouthWest())*ae.getNorthEast().distanceTo(ae.getNorthWest());it<1700&&(X=Bl(o));var He=o.length,At=[];for(p=0;p<He;p++){var ct=re(o[p]);At.push(l.project(re([ct.lat-X.lat,ct.lng-X.lng])))}for(b=D=B=0,p=0,g=He-1;p<He;g=p++)y=At[p],E=At[g],k=y.y*E.x-E.y*y.x,D+=(y.x+E.x)*k,B+=(y.y+E.y)*k,b+=k*3;b===0?W=At[0]:W=[D/b,B/b];var Ui=l.unproject(H(W));return re([Ui.lat+X.lat,Ui.lng+X.lng])}function Bl(o){for(var l=0,p=0,g=0,y=0;y<o.length;y++){var E=re(o[y]);l+=E.lat,p+=E.lng,g++}return re([l/g,p/g])}var Kw={__proto__:null,clipPolygon:jf,polygonCenter:Qf,centroid:Bl};function Xf(o,l){if(!l||!o.length)return o.slice();var p=l*l;return o=jw(o,p),o=Yw(o,p),o}function eh(o,l,p){return Math.sqrt(Gr(o,l,p,!0))}function Zw(o,l,p){return Gr(o,l,p)}function Yw(o,l){var p=o.length,g=typeof Uint8Array<"u"?Uint8Array:Array,y=new g(p);y[0]=y[p-1]=1,zl(o,y,l,0,p-1);var E,k=[];for(E=0;E<p;E++)y[E]&&k.push(o[E]);return k}function zl(o,l,p,g,y){var E=0,k,b,D;for(b=g+1;b<=y-1;b++)D=Gr(o[b],o[g],o[y],!0),D>E&&(k=b,E=D);E>p&&(l[k]=1,zl(o,l,p,g,k),zl(o,l,p,k,y))}function jw(o,l){for(var p=[o[0]],g=1,y=0,E=o.length;g<E;g++)Qw(o[g],o[y])>l&&(p.push(o[g]),y=g);return y<E-1&&p.push(o[E-1]),p}var th;function nh(o,l,p,g,y){var E=g?th:si(o,p),k=si(l,p),b,D,B;for(th=k;;){if(!(E|k))return[o,l];if(E&k)return!1;b=E||k,D=cs(o,l,b,p,y),B=si(D,p),b===E?(o=D,E=B):(l=D,k=B)}}function cs(o,l,p,g,y){var E=l.x-o.x,k=l.y-o.y,b=g.min,D=g.max,B,W;return p&8?(B=o.x+E*(D.y-o.y)/k,W=D.y):p&4?(B=o.x+E*(b.y-o.y)/k,W=b.y):p&2?(B=D.x,W=o.y+k*(D.x-o.x)/E):p&1&&(B=b.x,W=o.y+k*(b.x-o.x)/E),new F(B,W,y)}function si(o,l){var p=0;return o.x<l.min.x?p|=1:o.x>l.max.x&&(p|=2),o.y<l.min.y?p|=4:o.y>l.max.y&&(p|=8),p}function Qw(o,l){var p=l.x-o.x,g=l.y-o.y;return p*p+g*g}function Gr(o,l,p,g){var y=l.x,E=l.y,k=p.x-y,b=p.y-E,D=k*k+b*b,B;return D>0&&(B=((o.x-y)*k+(o.y-E)*b)/D,B>1?(y=p.x,E=p.y):B>0&&(y+=k*B,E+=b*B)),k=o.x-y,b=o.y-E,g?k*k+b*b:new F(y,E)}function Pt(o){return!S(o[0])||typeof o[0][0]!="object"&&typeof o[0][0]<"u"}function ih(o){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Pt(o)}function rh(o,l){var p,g,y,E,k,b,D,B;if(!o||o.length===0)throw new Error("latlngs not passed");Pt(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var W=re([0,0]),X=ge(o),ae=X.getNorthWest().distanceTo(X.getSouthWest())*X.getNorthEast().distanceTo(X.getNorthWest());ae<1700&&(W=Bl(o));var it=o.length,He=[];for(p=0;p<it;p++){var At=re(o[p]);He.push(l.project(re([At.lat-W.lat,At.lng-W.lng])))}for(p=0,g=0;p<it-1;p++)g+=He[p].distanceTo(He[p+1])/2;if(g===0)B=He[0];else for(p=0,E=0;p<it-1;p++)if(k=He[p],b=He[p+1],y=k.distanceTo(b),E+=y,E>g){D=(E-g)/y,B=[b.x-D*(b.x-k.x),b.y-D*(b.y-k.y)];break}var ct=l.unproject(H(B));return re([ct.lat+W.lat,ct.lng+W.lng])}var Xw={__proto__:null,simplify:Xf,pointToSegmentDistance:eh,closestPointOnSegment:Zw,clipSegment:nh,_getEdgeIntersection:cs,_getBitCode:si,_sqClosestPointOnSegment:Gr,isFlat:Pt,_flat:ih,polylineCenter:rh},Vl={project:function(o){return new F(o.lng,o.lat)},unproject:function(o){return new fe(o.y,o.x)},bounds:new ee([-180,-90],[180,90])},ql={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ee([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(o){var l=Math.PI/180,p=this.R,g=o.lat*l,y=this.R_MINOR/p,E=Math.sqrt(1-y*y),k=E*Math.sin(g),b=Math.tan(Math.PI/4-g/2)/Math.pow((1-k)/(1+k),E/2);return g=-p*Math.log(Math.max(b,1e-10)),new F(o.lng*l*p,g)},unproject:function(o){for(var l=180/Math.PI,p=this.R,g=this.R_MINOR/p,y=Math.sqrt(1-g*g),E=Math.exp(-o.y/p),k=Math.PI/2-2*Math.atan(E),b=0,D=.1,B;b<15&&Math.abs(D)>1e-7;b++)B=y*Math.sin(k),B=Math.pow((1-B)/(1+B),y/2),D=Math.PI/2-2*Math.atan(E*B)-k,k+=D;return new fe(k*l,o.x*l/p)}},eE={__proto__:null,LonLat:Vl,Mercator:ql,SphericalMercator:pl},tE=r({},Sn,{code:"EPSG:3395",projection:ql,transformation:function(){var o=.5/(Math.PI*ql.R);return Dr(o,.5,-o,.5)}()}),oh=r({},Sn,{code:"EPSG:4326",projection:Vl,transformation:Dr(1/180,1,-1/180,.5)}),nE=r({},ut,{projection:Vl,transformation:Dr(1,0,-1,0),scale:function(o){return Math.pow(2,o)},zoom:function(o){return Math.log(o)/Math.LN2},distance:function(o,l){var p=l.lng-o.lng,g=l.lat-o.lat;return Math.sqrt(p*p+g*g)},infinite:!0});ut.Earth=Sn,ut.EPSG3395=tE,ut.EPSG3857=gl,ut.EPSG900913=lw,ut.EPSG4326=oh,ut.Simple=nE;var Ot=je.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(o){return o.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(o){return o&&o.removeLayer(this),this},getPane:function(o){return this._map.getPane(o?this.options[o]||o:this.options.pane)},addInteractiveTarget:function(o){return this._map._targets[d(o)]=this,this},removeInteractiveTarget:function(o){return delete this._map._targets[d(o)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(o){var l=o.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var p=this.getEvents();l.on(p,this),this.once("remove",function(){l.off(p,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});ue.include({addLayer:function(o){if(!o._layerAdd)throw new Error("The provided object is not a Layer.");var l=d(o);return this._layers[l]?this:(this._layers[l]=o,o._mapToAdd=this,o.beforeAdd&&o.beforeAdd(this),this.whenReady(o._layerAdd,o),this)},removeLayer:function(o){var l=d(o);return this._layers[l]?(this._loaded&&o.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:o}),o.fire("remove")),o._map=o._mapToAdd=null,this):this},hasLayer:function(o){return d(o)in this._layers},eachLayer:function(o,l){for(var p in this._layers)o.call(l,this._layers[p]);return this},_addLayers:function(o){o=o?S(o)?o:[o]:[];for(var l=0,p=o.length;l<p;l++)this.addLayer(o[l])},_addZoomLimit:function(o){(!isNaN(o.options.maxZoom)||!isNaN(o.options.minZoom))&&(this._zoomBoundLayers[d(o)]=o,this._updateZoomLevels())},_removeZoomLimit:function(o){var l=d(o);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var o=1/0,l=-1/0,p=this._getZoomSpan();for(var g in this._zoomBoundLayers){var y=this._zoomBoundLayers[g].options;o=y.minZoom===void 0?o:Math.min(o,y.minZoom),l=y.maxZoom===void 0?l:Math.max(l,y.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=o===1/0?void 0:o,p!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var bi=Ot.extend({initialize:function(o,l){P(this,l),this._layers={};var p,g;if(o)for(p=0,g=o.length;p<g;p++)this.addLayer(o[p])},addLayer:function(o){var l=this.getLayerId(o);return this._layers[l]=o,this._map&&this._map.addLayer(o),this},removeLayer:function(o){var l=o in this._layers?o:this.getLayerId(o);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(o){var l=typeof o=="number"?o:this.getLayerId(o);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(o){var l=Array.prototype.slice.call(arguments,1),p,g;for(p in this._layers)g=this._layers[p],g[o]&&g[o].apply(g,l);return this},onAdd:function(o){this.eachLayer(o.addLayer,o)},onRemove:function(o){this.eachLayer(o.removeLayer,o)},eachLayer:function(o,l){for(var p in this._layers)o.call(l,this._layers[p]);return this},getLayer:function(o){return this._layers[o]},getLayers:function(){var o=[];return this.eachLayer(o.push,o),o},setZIndex:function(o){return this.invoke("setZIndex",o)},getLayerId:function(o){return d(o)}}),iE=function(o,l){return new bi(o,l)},on=bi.extend({addLayer:function(o){return this.hasLayer(o)?this:(o.addEventParent(this),bi.prototype.addLayer.call(this,o),this.fire("layeradd",{layer:o}))},removeLayer:function(o){return this.hasLayer(o)?(o in this._layers&&(o=this._layers[o]),o.removeEventParent(this),bi.prototype.removeLayer.call(this,o),this.fire("layerremove",{layer:o})):this},setStyle:function(o){return this.invoke("setStyle",o)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var o=new Fe;for(var l in this._layers){var p=this._layers[l];o.extend(p.getBounds?p.getBounds():p.getLatLng())}return o}}),rE=function(o,l){return new on(o,l)},Mi=qe.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(o){P(this,o)},createIcon:function(o){return this._createIcon("icon",o)},createShadow:function(o){return this._createIcon("shadow",o)},_createIcon:function(o,l){var p=this._getIconUrl(o);if(!p){if(o==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var g=this._createImg(p,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(g,o),(this.options.crossOrigin||this.options.crossOrigin==="")&&(g.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),g},_setIconStyles:function(o,l){var p=this.options,g=p[l+"Size"];typeof g=="number"&&(g=[g,g]);var y=H(g),E=H(l==="shadow"&&p.shadowAnchor||p.iconAnchor||y&&y.divideBy(2,!0));o.className="leaflet-marker-"+l+" "+(p.className||""),E&&(o.style.marginLeft=-E.x+"px",o.style.marginTop=-E.y+"px"),y&&(o.style.width=y.x+"px",o.style.height=y.y+"px")},_createImg:function(o,l){return l=l||document.createElement("img"),l.src=o,l},_getIconUrl:function(o){return Y.retina&&this.options[o+"RetinaUrl"]||this.options[o+"Url"]}});function oE(o){return new Mi(o)}var $r=Mi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(o){return typeof $r.imagePath!="string"&&($r.imagePath=this._detectIconPath()),(this.options.imagePath||$r.imagePath)+Mi.prototype._getIconUrl.call(this,o)},_stripUrl:function(o){var l=function(p,g,y){var E=g.exec(p);return E&&E[y]};return o=l(o,/^url\((['"])?(.+)\1\)$/,2),o&&l(o,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var o=he("div","leaflet-default-icon-path",document.body),l=Fr(o,"background-image")||Fr(o,"backgroundImage");if(document.body.removeChild(o),l=this._stripUrl(l),l)return l;var p=document.querySelector('link[href$="leaflet.css"]');return p?p.href.substring(0,p.href.length-11-1):""}}),sh=Yt.extend({initialize:function(o){this._marker=o},addHooks:function(){var o=this._marker._icon;this._draggable||(this._draggable=new Cn(o,o,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),se(o,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ne(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(o){var l=this._marker,p=l._map,g=this._marker.options.autoPanSpeed,y=this._marker.options.autoPanPadding,E=ii(l._icon),k=p.getPixelBounds(),b=p.getPixelOrigin(),D=ce(k.min._subtract(b).add(y),k.max._subtract(b).subtract(y));if(!D.contains(E)){var B=H((Math.max(D.max.x,E.x)-D.max.x)/(k.max.x-D.max.x)-(Math.min(D.min.x,E.x)-D.min.x)/(k.min.x-D.min.x),(Math.max(D.max.y,E.y)-D.max.y)/(k.max.y-D.max.y)-(Math.min(D.min.y,E.y)-D.min.y)/(k.min.y-D.min.y)).multiplyBy(g);p.panBy(B,{animate:!1}),this._draggable._newPos._add(B),this._draggable._startPos._add(B),Le(l._icon,this._draggable._newPos),this._onDrag(o),this._panRequest=j(this._adjustPan.bind(this,o))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(o){this._marker.options.autoPan&&(te(this._panRequest),this._panRequest=j(this._adjustPan.bind(this,o)))},_onDrag:function(o){var l=this._marker,p=l._shadow,g=ii(l._icon),y=l._map.layerPointToLatLng(g);p&&Le(p,g),l._latlng=y,o.latlng=y,o.oldLatLng=this._oldLatLng,l.fire("move",o).fire("drag",o)},_onDragEnd:function(o){te(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",o)}}),ds=Ot.extend({options:{icon:new $r,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(o,l){P(this,l),this._latlng=re(o)},onAdd:function(o){this._zoomAnimated=this._zoomAnimated&&o.options.markerZoomAnimation,this._zoomAnimated&&o.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(o){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&o.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(o){var l=this._latlng;return this._latlng=re(o),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(o){return this.options.zIndexOffset=o,this.update()},getIcon:function(){return this.options.icon},setIcon:function(o){return this.options.icon=o,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var o=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(o)}return this},_initIcon:function(){var o=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),p=o.icon.createIcon(this._icon),g=!1;p!==this._icon&&(this._icon&&this._removeIcon(),g=!0,o.title&&(p.title=o.title),p.tagName==="IMG"&&(p.alt=o.alt||"")),se(p,l),o.keyboard&&(p.tabIndex="0",p.setAttribute("role","button")),this._icon=p,o.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&oe(p,"focus",this._panOnFocus,this);var y=o.icon.createShadow(this._shadow),E=!1;y!==this._shadow&&(this._removeShadow(),E=!0),y&&(se(y,l),y.alt=""),this._shadow=y,o.opacity<1&&this._updateOpacity(),g&&this.getPane().appendChild(this._icon),this._initInteraction(),y&&E&&this.getPane(o.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&_e(this._icon,"focus",this._panOnFocus,this),Ce(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ce(this._shadow),this._shadow=null},_setPos:function(o){this._icon&&Le(this._icon,o),this._shadow&&Le(this._shadow,o),this._zIndex=o.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(o){this._icon&&(this._icon.style.zIndex=this._zIndex+o)},_animateZoom:function(o){var l=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(se(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),sh)){var o=this.options.draggable;this.dragging&&(o=this.dragging.enabled(),this.dragging.disable()),this.dragging=new sh(this),o&&this.dragging.enable()}},setOpacity:function(o){return this.options.opacity=o,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var o=this.options.opacity;this._icon&&xt(this._icon,o),this._shadow&&xt(this._shadow,o)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var o=this._map;if(o){var l=this.options.icon.options,p=l.iconSize?H(l.iconSize):H(0,0),g=l.iconAnchor?H(l.iconAnchor):H(0,0);o.panInside(this._latlng,{paddingTopLeft:g,paddingBottomRight:p.subtract(g)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function sE(o,l){return new ds(o,l)}var xn=Ot.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(o){this._renderer=o.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(o){return P(this,o),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&o&&Object.prototype.hasOwnProperty.call(o,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),fs=xn.extend({options:{fill:!0,radius:10},initialize:function(o,l){P(this,l),this._latlng=re(o),this._radius=this.options.radius},setLatLng:function(o){var l=this._latlng;return this._latlng=re(o),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(o){return this.options.radius=this._radius=o,this.redraw()},getRadius:function(){return this._radius},setStyle:function(o){var l=o&&o.radius||this._radius;return xn.prototype.setStyle.call(this,o),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var o=this._radius,l=this._radiusY||o,p=this._clickTolerance(),g=[o+p,l+p];this._pxBounds=new ee(this._point.subtract(g),this._point.add(g))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(o){return o.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function aE(o,l){return new fs(o,l)}var Hl=fs.extend({initialize:function(o,l,p){if(typeof l=="number"&&(l=r({},p,{radius:l})),P(this,l),this._latlng=re(o),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(o){return this._mRadius=o,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var o=[this._radius,this._radiusY||this._radius];return new Fe(this._map.layerPointToLatLng(this._point.subtract(o)),this._map.layerPointToLatLng(this._point.add(o)))},setStyle:xn.prototype.setStyle,_project:function(){var o=this._latlng.lng,l=this._latlng.lat,p=this._map,g=p.options.crs;if(g.distance===Sn.distance){var y=Math.PI/180,E=this._mRadius/Sn.R/y,k=p.project([l+E,o]),b=p.project([l-E,o]),D=k.add(b).divideBy(2),B=p.unproject(D).lat,W=Math.acos((Math.cos(E*y)-Math.sin(l*y)*Math.sin(B*y))/(Math.cos(l*y)*Math.cos(B*y)))/y;(isNaN(W)||W===0)&&(W=E/Math.cos(Math.PI/180*l)),this._point=D.subtract(p.getPixelOrigin()),this._radius=isNaN(W)?0:D.x-p.project([B,o-W]).x,this._radiusY=D.y-k.y}else{var X=g.unproject(g.project(this._latlng).subtract([this._mRadius,0]));this._point=p.latLngToLayerPoint(this._latlng),this._radius=this._point.x-p.latLngToLayerPoint(X).x}this._updateBounds()}});function lE(o,l,p){return new Hl(o,l,p)}var sn=xn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(o,l){P(this,l),this._setLatLngs(o)},getLatLngs:function(){return this._latlngs},setLatLngs:function(o){return this._setLatLngs(o),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(o){for(var l=1/0,p=null,g=Gr,y,E,k=0,b=this._parts.length;k<b;k++)for(var D=this._parts[k],B=1,W=D.length;B<W;B++){y=D[B-1],E=D[B];var X=g(o,y,E,!0);X<l&&(l=X,p=g(o,y,E))}return p&&(p.distance=Math.sqrt(l)),p},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return rh(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(o,l){return l=l||this._defaultShape(),o=re(o),l.push(o),this._bounds.extend(o),this.redraw()},_setLatLngs:function(o){this._bounds=new Fe,this._latlngs=this._convertLatLngs(o)},_defaultShape:function(){return Pt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(o){for(var l=[],p=Pt(o),g=0,y=o.length;g<y;g++)p?(l[g]=re(o[g]),this._bounds.extend(l[g])):l[g]=this._convertLatLngs(o[g]);return l},_project:function(){var o=new ee;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,o),this._bounds.isValid()&&o.isValid()&&(this._rawPxBounds=o,this._updateBounds())},_updateBounds:function(){var o=this._clickTolerance(),l=new F(o,o);this._rawPxBounds&&(this._pxBounds=new ee([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(o,l,p){var g=o[0]instanceof fe,y=o.length,E,k;if(g){for(k=[],E=0;E<y;E++)k[E]=this._map.latLngToLayerPoint(o[E]),p.extend(k[E]);l.push(k)}else for(E=0;E<y;E++)this._projectLatlngs(o[E],l,p)},_clipPoints:function(){var o=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,p,g,y,E,k,b,D;for(p=0,y=0,E=this._rings.length;p<E;p++)for(D=this._rings[p],g=0,k=D.length;g<k-1;g++)b=nh(D[g],D[g+1],o,g,!0),b&&(l[y]=l[y]||[],l[y].push(b[0]),(b[1]!==D[g+1]||g===k-2)&&(l[y].push(b[1]),y++))}},_simplifyPoints:function(){for(var o=this._parts,l=this.options.smoothFactor,p=0,g=o.length;p<g;p++)o[p]=Xf(o[p],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(o,l){var p,g,y,E,k,b,D=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(p=0,E=this._parts.length;p<E;p++)for(b=this._parts[p],g=0,k=b.length,y=k-1;g<k;y=g++)if(!(!l&&g===0)&&eh(o,b[y],b[g])<=D)return!0;return!1}});function uE(o,l){return new sn(o,l)}sn._flat=ih;var Li=sn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Qf(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(o){var l=sn.prototype._convertLatLngs.call(this,o),p=l.length;return p>=2&&l[0]instanceof fe&&l[0].equals(l[p-1])&&l.pop(),l},_setLatLngs:function(o){sn.prototype._setLatLngs.call(this,o),Pt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Pt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var o=this._renderer._bounds,l=this.options.weight,p=new F(l,l);if(o=new ee(o.min.subtract(p),o.max.add(p)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}for(var g=0,y=this._rings.length,E;g<y;g++)E=jf(this._rings[g],o,!0),E.length&&this._parts.push(E)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(o){var l=!1,p,g,y,E,k,b,D,B;if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(E=0,D=this._parts.length;E<D;E++)for(p=this._parts[E],k=0,B=p.length,b=B-1;k<B;b=k++)g=p[k],y=p[b],g.y>o.y!=y.y>o.y&&o.x<(y.x-g.x)*(o.y-g.y)/(y.y-g.y)+g.x&&(l=!l);return l||sn.prototype._containsPoint.call(this,o,!0)}});function cE(o,l){return new Li(o,l)}var an=on.extend({initialize:function(o,l){P(this,l),this._layers={},o&&this.addData(o)},addData:function(o){var l=S(o)?o:o.features,p,g,y;if(l){for(p=0,g=l.length;p<g;p++)y=l[p],(y.geometries||y.geometry||y.features||y.coordinates)&&this.addData(y);return this}var E=this.options;if(E.filter&&!E.filter(o))return this;var k=hs(o,E);return k?(k.feature=gs(o),k.defaultOptions=k.options,this.resetStyle(k),E.onEachFeature&&E.onEachFeature(o,k),this.addLayer(k)):this},resetStyle:function(o){return o===void 0?this.eachLayer(this.resetStyle,this):(o.options=r({},o.defaultOptions),this._setLayerStyle(o,this.options.style),this)},setStyle:function(o){return this.eachLayer(function(l){this._setLayerStyle(l,o)},this)},_setLayerStyle:function(o,l){o.setStyle&&(typeof l=="function"&&(l=l(o.feature)),o.setStyle(l))}});function hs(o,l){var p=o.type==="Feature"?o.geometry:o,g=p?p.coordinates:null,y=[],E=l&&l.pointToLayer,k=l&&l.coordsToLatLng||Gl,b,D,B,W;if(!g&&!p)return null;switch(p.type){case"Point":return b=k(g),ah(E,o,b,l);case"MultiPoint":for(B=0,W=g.length;B<W;B++)b=k(g[B]),y.push(ah(E,o,b,l));return new on(y);case"LineString":case"MultiLineString":return D=ps(g,p.type==="LineString"?0:1,k),new sn(D,l);case"Polygon":case"MultiPolygon":return D=ps(g,p.type==="Polygon"?1:2,k),new Li(D,l);case"GeometryCollection":for(B=0,W=p.geometries.length;B<W;B++){var X=hs({geometry:p.geometries[B],type:"Feature",properties:o.properties},l);X&&y.push(X)}return new on(y);case"FeatureCollection":for(B=0,W=p.features.length;B<W;B++){var ae=hs(p.features[B],l);ae&&y.push(ae)}return new on(y);default:throw new Error("Invalid GeoJSON object.")}}function ah(o,l,p,g){return o?o(l,p):new ds(p,g&&g.markersInheritOptions&&g)}function Gl(o){return new fe(o[1],o[0],o[2])}function ps(o,l,p){for(var g=[],y=0,E=o.length,k;y<E;y++)k=l?ps(o[y],l-1,p):(p||Gl)(o[y]),g.push(k);return g}function $l(o,l){return o=re(o),o.alt!==void 0?[v(o.lng,l),v(o.lat,l),v(o.alt,l)]:[v(o.lng,l),v(o.lat,l)]}function ms(o,l,p,g){for(var y=[],E=0,k=o.length;E<k;E++)y.push(l?ms(o[E],Pt(o[E])?0:l-1,p,g):$l(o[E],g));return!l&&p&&y.length>0&&y.push(y[0].slice()),y}function Di(o,l){return o.feature?r({},o.feature,{geometry:l}):gs(l)}function gs(o){return o.type==="Feature"||o.type==="FeatureCollection"?o:{type:"Feature",properties:{},geometry:o}}var Wl={toGeoJSON:function(o){return Di(this,{type:"Point",coordinates:$l(this.getLatLng(),o)})}};ds.include(Wl),Hl.include(Wl),fs.include(Wl),sn.include({toGeoJSON:function(o){var l=!Pt(this._latlngs),p=ms(this._latlngs,l?1:0,!1,o);return Di(this,{type:(l?"Multi":"")+"LineString",coordinates:p})}}),Li.include({toGeoJSON:function(o){var l=!Pt(this._latlngs),p=l&&!Pt(this._latlngs[0]),g=ms(this._latlngs,p?2:l?1:0,!0,o);return l||(g=[g]),Di(this,{type:(p?"Multi":"")+"Polygon",coordinates:g})}}),bi.include({toMultiPoint:function(o){var l=[];return this.eachLayer(function(p){l.push(p.toGeoJSON(o).geometry.coordinates)}),Di(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(o){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(o);var p=l==="GeometryCollection",g=[];return this.eachLayer(function(y){if(y.toGeoJSON){var E=y.toGeoJSON(o);if(p)g.push(E.geometry);else{var k=gs(E);k.type==="FeatureCollection"?g.push.apply(g,k.features):g.push(k)}}}),p?Di(this,{geometries:g,type:"GeometryCollection"}):{type:"FeatureCollection",features:g}}});function lh(o,l){return new an(o,l)}var dE=lh,_s=Ot.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(o,l,p){this._url=o,this._bounds=ge(l),P(this,p)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(se(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ce(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(o){return this.options.opacity=o,this._image&&this._updateOpacity(),this},setStyle:function(o){return o.opacity&&this.setOpacity(o.opacity),this},bringToFront:function(){return this._map&&Ri(this._image),this},bringToBack:function(){return this._map&&Ni(this._image),this},setUrl:function(o){return this._url=o,this._image&&(this._image.src=o),this},setBounds:function(o){return this._bounds=ge(o),this._map&&this._reset(),this},getEvents:function(){var o={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var o=this._url.tagName==="IMG",l=this._image=o?this._url:he("img");if(se(l,"leaflet-image-layer"),this._zoomAnimated&&se(l,"leaflet-zoom-animated"),this.options.className&&se(l,this.options.className),l.onselectstart=_,l.onmousemove=_,l.onload=a(this.fire,this,"load"),l.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),o){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(o){var l=this._map.getZoomScale(o.zoom),p=this._map._latLngBoundsToNewLayerBounds(this._bounds,o.zoom,o.center).min;ni(this._image,p,l)},_reset:function(){var o=this._image,l=new ee(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),p=l.getSize();Le(o,l.min),o.style.width=p.x+"px",o.style.height=p.y+"px"},_updateOpacity:function(){xt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var o=this.options.errorOverlayUrl;o&&this._url!==o&&(this._url=o,this._image.src=o)},getCenter:function(){return this._bounds.getCenter()}}),fE=function(o,l,p){return new _s(o,l,p)},uh=_s.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var o=this._url.tagName==="VIDEO",l=this._image=o?this._url:he("video");if(se(l,"leaflet-image-layer"),this._zoomAnimated&&se(l,"leaflet-zoom-animated"),this.options.className&&se(l,this.options.className),l.onselectstart=_,l.onmousemove=_,l.onloadeddata=a(this.fire,this,"load"),o){for(var p=l.getElementsByTagName("source"),g=[],y=0;y<p.length;y++)g.push(p[y].src);this._url=p.length>0?g:[l.src];return}S(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var E=0;E<this._url.length;E++){var k=he("source");k.src=this._url[E],l.appendChild(k)}}});function hE(o,l,p){return new uh(o,l,p)}var ch=_s.extend({_initImage:function(){var o=this._image=this._url;se(o,"leaflet-image-layer"),this._zoomAnimated&&se(o,"leaflet-zoom-animated"),this.options.className&&se(o,this.options.className),o.onselectstart=_,o.onmousemove=_}});function pE(o,l,p){return new ch(o,l,p)}var jt=Ot.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(o,l){o&&(o instanceof fe||S(o))?(this._latlng=re(o),P(this,l)):(P(this,o),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(o){return o=arguments.length?o:this._source._map,o.hasLayer(this)||o.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(o){return this._map?this.close():(arguments.length?this._source=o:o=this._source,this._prepareOpen(),this.openOn(o._map)),this},onAdd:function(o){this._zoomAnimated=o._zoomAnimated,this._container||this._initLayout(),o._fadeAnimated&&xt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),o._fadeAnimated&&xt(this._container,1),this.bringToFront(),this.options.interactive&&(se(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(o){o._fadeAnimated?(xt(this._container,0),this._removeTimeout=setTimeout(a(Ce,void 0,this._container),200)):Ce(this._container),this.options.interactive&&(Ne(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(o){return this._latlng=re(o),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(o){return this._content=o,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var o={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ri(this._container),this},bringToBack:function(){return this._map&&Ni(this._container),this},_prepareOpen:function(o){var l=this._source;if(!l._map)return!1;if(l instanceof on){l=null;var p=this._source._layers;for(var g in p)if(p[g]._map){l=p[g];break}if(!l)return!1;this._source=l}if(!o)if(l.getCenter)o=l.getCenter();else if(l.getLatLng)o=l.getLatLng();else if(l.getBounds)o=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(o),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var o=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")o.innerHTML=l;else{for(;o.hasChildNodes();)o.removeChild(o.firstChild);o.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var o=this._map.latLngToLayerPoint(this._latlng),l=H(this.options.offset),p=this._getAnchor();this._zoomAnimated?Le(this._container,o.add(p)):l=l.add(o).add(p);var g=this._containerBottom=-l.y,y=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=g+"px",this._container.style.left=y+"px"}},_getAnchor:function(){return[0,0]}});ue.include({_initOverlay:function(o,l,p,g){var y=l;return y instanceof o||(y=new o(g).setContent(l)),p&&y.setLatLng(p),y}}),Ot.include({_initOverlay:function(o,l,p,g){var y=p;return y instanceof o?(P(y,g),y._source=this):(y=l&&!g?l:new o(g,this),y.setContent(p)),y}});var vs=jt.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(o){return o=arguments.length?o:this._source._map,!o.hasLayer(this)&&o._popup&&o._popup.options.autoClose&&o.removeLayer(o._popup),o._popup=this,jt.prototype.openOn.call(this,o)},onAdd:function(o){jt.prototype.onAdd.call(this,o),o.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof xn||this._source.on("preclick",ri))},onRemove:function(o){jt.prototype.onRemove.call(this,o),o.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof xn||this._source.off("preclick",ri))},getEvents:function(){var o=jt.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(o.preclick=this.close),this.options.keepInView&&(o.moveend=this._adjustPan),o},_initLayout:function(){var o="leaflet-popup",l=this._container=he("div",o+" "+(this.options.className||"")+" leaflet-zoom-animated"),p=this._wrapper=he("div",o+"-content-wrapper",l);if(this._contentNode=he("div",o+"-content",p),qr(l),Dl(this._contentNode),oe(l,"contextmenu",ri),this._tipContainer=he("div",o+"-tip-container",l),this._tip=he("div",o+"-tip",this._tipContainer),this.options.closeButton){var g=this._closeButton=he("a",o+"-close-button",l);g.setAttribute("role","button"),g.setAttribute("aria-label","Close popup"),g.href="#close",g.innerHTML='<span aria-hidden="true">&#215;</span>',oe(g,"click",function(y){We(y),this.close()},this)}},_updateLayout:function(){var o=this._contentNode,l=o.style;l.width="",l.whiteSpace="nowrap";var p=o.offsetWidth;p=Math.min(p,this.options.maxWidth),p=Math.max(p,this.options.minWidth),l.width=p+1+"px",l.whiteSpace="",l.height="";var g=o.offsetHeight,y=this.options.maxHeight,E="leaflet-popup-scrolled";y&&g>y?(l.height=y+"px",se(o,E)):Ne(o,E),this._containerWidth=this._container.offsetWidth},_animateZoom:function(o){var l=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center),p=this._getAnchor();Le(this._container,l.add(p))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var o=this._map,l=parseInt(Fr(this._container,"marginBottom"),10)||0,p=this._container.offsetHeight+l,g=this._containerWidth,y=new F(this._containerLeft,-p-this._containerBottom);y._add(ii(this._container));var E=o.layerPointToContainerPoint(y),k=H(this.options.autoPanPadding),b=H(this.options.autoPanPaddingTopLeft||k),D=H(this.options.autoPanPaddingBottomRight||k),B=o.getSize(),W=0,X=0;E.x+g+D.x>B.x&&(W=E.x+g-B.x+D.x),E.x-W-b.x<0&&(W=E.x-b.x),E.y+p+D.y>B.y&&(X=E.y+p-B.y+D.y),E.y-X-b.y<0&&(X=E.y-b.y),(W||X)&&(this.options.keepInView&&(this._autopanning=!0),o.fire("autopanstart").panBy([W,X]))}},_getAnchor:function(){return H(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),mE=function(o,l){return new vs(o,l)};ue.mergeOptions({closePopupOnClick:!0}),ue.include({openPopup:function(o,l,p){return this._initOverlay(vs,o,l,p).openOn(this),this},closePopup:function(o){return o=arguments.length?o:this._popup,o&&o.close(),this}}),Ot.include({bindPopup:function(o,l){return this._popup=this._initOverlay(vs,this._popup,o,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(o){return this._popup&&(this instanceof on||(this._popup._source=this),this._popup._prepareOpen(o||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(o){return this._popup&&this._popup.setContent(o),this},getPopup:function(){return this._popup},_openPopup:function(o){if(!(!this._popup||!this._map)){oi(o);var l=o.layer||o.target;if(this._popup._source===l&&!(l instanceof xn)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(o.latlng);return}this._popup._source=l,this.openPopup(o.latlng)}},_movePopup:function(o){this._popup.setLatLng(o.latlng)},_onKeyPress:function(o){o.originalEvent.keyCode===13&&this._openPopup(o)}});var ys=jt.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(o){jt.prototype.onAdd.call(this,o),this.setOpacity(this.options.opacity),o.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(o){jt.prototype.onRemove.call(this,o),o.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var o=jt.prototype.getEvents.call(this);return this.options.permanent||(o.preclick=this.close),o},_initLayout:function(){var o="leaflet-tooltip",l=o+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=he("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(o){var l,p,g=this._map,y=this._container,E=g.latLngToContainerPoint(g.getCenter()),k=g.layerPointToContainerPoint(o),b=this.options.direction,D=y.offsetWidth,B=y.offsetHeight,W=H(this.options.offset),X=this._getAnchor();b==="top"?(l=D/2,p=B):b==="bottom"?(l=D/2,p=0):b==="center"?(l=D/2,p=B/2):b==="right"?(l=0,p=B/2):b==="left"?(l=D,p=B/2):k.x<E.x?(b="right",l=0,p=B/2):(b="left",l=D+(W.x+X.x)*2,p=B/2),o=o.subtract(H(l,p,!0)).add(W).add(X),Ne(y,"leaflet-tooltip-right"),Ne(y,"leaflet-tooltip-left"),Ne(y,"leaflet-tooltip-top"),Ne(y,"leaflet-tooltip-bottom"),se(y,"leaflet-tooltip-"+b),Le(y,o)},_updatePosition:function(){var o=this._map.latLngToLayerPoint(this._latlng);this._setPosition(o)},setOpacity:function(o){this.options.opacity=o,this._container&&xt(this._container,o)},_animateZoom:function(o){var l=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center);this._setPosition(l)},_getAnchor:function(){return H(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),gE=function(o,l){return new ys(o,l)};ue.include({openTooltip:function(o,l,p){return this._initOverlay(ys,o,l,p).openOn(this),this},closeTooltip:function(o){return o.close(),this}}),Ot.include({bindTooltip:function(o,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ys,this._tooltip,o,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(o){if(!(!o&&this._tooltipHandlersAdded)){var l=o?"off":"on",p={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?p.add=this._openTooltip:(p.mouseover=this._openTooltip,p.mouseout=this.closeTooltip,p.click=this._openTooltip,this._map?this._addFocusListeners():p.add=this._addFocusListeners),this._tooltip.options.sticky&&(p.mousemove=this._moveTooltip),this[l](p),this._tooltipHandlersAdded=!o}},openTooltip:function(o){return this._tooltip&&(this instanceof on||(this._tooltip._source=this),this._tooltip._prepareOpen(o)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(o){return this._tooltip&&this._tooltip.setContent(o),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(o){var l=typeof o.getElement=="function"&&o.getElement();l&&(oe(l,"focus",function(){this._tooltip._source=o,this.openTooltip()},this),oe(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(o){var l=typeof o.getElement=="function"&&o.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(o){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(o)});return}this._tooltip._source=o.layer||o.target,this.openTooltip(this._tooltip.options.sticky?o.latlng:void 0)}},_moveTooltip:function(o){var l=o.latlng,p,g;this._tooltip.options.sticky&&o.originalEvent&&(p=this._map.mouseEventToContainerPoint(o.originalEvent),g=this._map.containerPointToLayerPoint(p),l=this._map.layerPointToLatLng(g)),this._tooltip.setLatLng(l)}});var dh=Mi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(o){var l=o&&o.tagName==="DIV"?o:document.createElement("div"),p=this.options;if(p.html instanceof Element?(os(l),l.appendChild(p.html)):l.innerHTML=p.html!==!1?p.html:"",p.bgPos){var g=H(p.bgPos);l.style.backgroundPosition=-g.x+"px "+-g.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function _E(o){return new dh(o)}Mi.Default=$r;var Wr=Ot.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Y.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(o){P(this,o)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(o){o._addZoomLimit(this)},onRemove:function(o){this._removeAllTiles(),Ce(this._container),o._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ri(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Ni(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(o){return this.options.opacity=o,this._updateOpacity(),this},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var o=this._clampZoom(this._map.getZoom());o!==this._tileZoom&&(this._tileZoom=o,this._updateLevels()),this._update()}return this},getEvents:function(){var o={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),o.move=this._onMove),this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},createTile:function(){return document.createElement("div")},getTileSize:function(){var o=this.options.tileSize;return o instanceof F?o:new F(o,o)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(o){for(var l=this.getPane().children,p=-o(-1/0,1/0),g=0,y=l.length,E;g<y;g++)E=l[g].style.zIndex,l[g]!==this._container&&E&&(p=o(p,+E));isFinite(p)&&(this.options.zIndex=p+o(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Y.ielt9){xt(this._container,this.options.opacity);var o=+new Date,l=!1,p=!1;for(var g in this._tiles){var y=this._tiles[g];if(!(!y.current||!y.loaded)){var E=Math.min(1,(o-y.loaded)/200);xt(y.el,E),E<1?l=!0:(y.active?p=!0:this._onOpaqueTile(y),y.active=!0)}}p&&!this._noPrune&&this._pruneTiles(),l&&(te(this._fadeFrame),this._fadeFrame=j(this._updateOpacity,this))}},_onOpaqueTile:_,_initContainer:function(){this._container||(this._container=he("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var o=this._tileZoom,l=this.options.maxZoom;if(o!==void 0){for(var p in this._levels)p=Number(p),this._levels[p].el.children.length||p===o?(this._levels[p].el.style.zIndex=l-Math.abs(o-p),this._onUpdateLevel(p)):(Ce(this._levels[p].el),this._removeTilesAtZoom(p),this._onRemoveLevel(p),delete this._levels[p]);var g=this._levels[o],y=this._map;return g||(g=this._levels[o]={},g.el=he("div","leaflet-tile-container leaflet-zoom-animated",this._container),g.el.style.zIndex=l,g.origin=y.project(y.unproject(y.getPixelOrigin()),o).round(),g.zoom=o,this._setZoomTransform(g,y.getCenter(),y.getZoom()),_(g.el.offsetWidth),this._onCreateLevel(g)),this._level=g,g}},_onUpdateLevel:_,_onRemoveLevel:_,_onCreateLevel:_,_pruneTiles:function(){if(this._map){var o,l,p=this._map.getZoom();if(p>this.options.maxZoom||p<this.options.minZoom){this._removeAllTiles();return}for(o in this._tiles)l=this._tiles[o],l.retain=l.current;for(o in this._tiles)if(l=this._tiles[o],l.current&&!l.active){var g=l.coords;this._retainParent(g.x,g.y,g.z,g.z-5)||this._retainChildren(g.x,g.y,g.z,g.z+2)}for(o in this._tiles)this._tiles[o].retain||this._removeTile(o)}},_removeTilesAtZoom:function(o){for(var l in this._tiles)this._tiles[l].coords.z===o&&this._removeTile(l)},_removeAllTiles:function(){for(var o in this._tiles)this._removeTile(o)},_invalidateAll:function(){for(var o in this._levels)Ce(this._levels[o].el),this._onRemoveLevel(Number(o)),delete this._levels[o];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(o,l,p,g){var y=Math.floor(o/2),E=Math.floor(l/2),k=p-1,b=new F(+y,+E);b.z=+k;var D=this._tileCoordsToKey(b),B=this._tiles[D];return B&&B.active?(B.retain=!0,!0):(B&&B.loaded&&(B.retain=!0),k>g?this._retainParent(y,E,k,g):!1)},_retainChildren:function(o,l,p,g){for(var y=2*o;y<2*o+2;y++)for(var E=2*l;E<2*l+2;E++){var k=new F(y,E);k.z=p+1;var b=this._tileCoordsToKey(k),D=this._tiles[b];if(D&&D.active){D.retain=!0;continue}else D&&D.loaded&&(D.retain=!0);p+1<g&&this._retainChildren(y,E,p+1,g)}},_resetView:function(o){var l=o&&(o.pinch||o.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(o){this._setView(o.center,o.zoom,!0,o.noUpdate)},_clampZoom:function(o){var l=this.options;return l.minNativeZoom!==void 0&&o<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<o?l.maxNativeZoom:o},_setView:function(o,l,p,g){var y=Math.round(l);this.options.maxZoom!==void 0&&y>this.options.maxZoom||this.options.minZoom!==void 0&&y<this.options.minZoom?y=void 0:y=this._clampZoom(y);var E=this.options.updateWhenZooming&&y!==this._tileZoom;(!g||E)&&(this._tileZoom=y,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),y!==void 0&&this._update(o),p||this._pruneTiles(),this._noPrune=!!p),this._setZoomTransforms(o,l)},_setZoomTransforms:function(o,l){for(var p in this._levels)this._setZoomTransform(this._levels[p],o,l)},_setZoomTransform:function(o,l,p){var g=this._map.getZoomScale(p,o.zoom),y=o.origin.multiplyBy(g).subtract(this._map._getNewPixelOrigin(l,p)).round();Y.any3d?ni(o.el,y,g):Le(o.el,y)},_resetGrid:function(){var o=this._map,l=o.options.crs,p=this._tileSize=this.getTileSize(),g=this._tileZoom,y=this._map.getPixelWorldBounds(this._tileZoom);y&&(this._globalTileRange=this._pxBoundsToTileRange(y)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(o.project([0,l.wrapLng[0]],g).x/p.x),Math.ceil(o.project([0,l.wrapLng[1]],g).x/p.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(o.project([l.wrapLat[0],0],g).y/p.x),Math.ceil(o.project([l.wrapLat[1],0],g).y/p.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(o){var l=this._map,p=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),g=l.getZoomScale(p,this._tileZoom),y=l.project(o,this._tileZoom).floor(),E=l.getSize().divideBy(g*2);return new ee(y.subtract(E),y.add(E))},_update:function(o){var l=this._map;if(l){var p=this._clampZoom(l.getZoom());if(o===void 0&&(o=l.getCenter()),this._tileZoom!==void 0){var g=this._getTiledPixelBounds(o),y=this._pxBoundsToTileRange(g),E=y.getCenter(),k=[],b=this.options.keepBuffer,D=new ee(y.getBottomLeft().subtract([b,-b]),y.getTopRight().add([b,-b]));if(!(isFinite(y.min.x)&&isFinite(y.min.y)&&isFinite(y.max.x)&&isFinite(y.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var B in this._tiles){var W=this._tiles[B].coords;(W.z!==this._tileZoom||!D.contains(new F(W.x,W.y)))&&(this._tiles[B].current=!1)}if(Math.abs(p-this._tileZoom)>1){this._setView(o,p);return}for(var X=y.min.y;X<=y.max.y;X++)for(var ae=y.min.x;ae<=y.max.x;ae++){var it=new F(ae,X);if(it.z=this._tileZoom,!!this._isValidTile(it)){var He=this._tiles[this._tileCoordsToKey(it)];He?He.current=!0:k.push(it)}}if(k.sort(function(ct,Ui){return ct.distanceTo(E)-Ui.distanceTo(E)}),k.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var At=document.createDocumentFragment();for(ae=0;ae<k.length;ae++)this._addTile(k[ae],At);this._level.el.appendChild(At)}}}},_isValidTile:function(o){var l=this._map.options.crs;if(!l.infinite){var p=this._globalTileRange;if(!l.wrapLng&&(o.x<p.min.x||o.x>p.max.x)||!l.wrapLat&&(o.y<p.min.y||o.y>p.max.y))return!1}if(!this.options.bounds)return!0;var g=this._tileCoordsToBounds(o);return ge(this.options.bounds).overlaps(g)},_keyToBounds:function(o){return this._tileCoordsToBounds(this._keyToTileCoords(o))},_tileCoordsToNwSe:function(o){var l=this._map,p=this.getTileSize(),g=o.scaleBy(p),y=g.add(p),E=l.unproject(g,o.z),k=l.unproject(y,o.z);return[E,k]},_tileCoordsToBounds:function(o){var l=this._tileCoordsToNwSe(o),p=new Fe(l[0],l[1]);return this.options.noWrap||(p=this._map.wrapLatLngBounds(p)),p},_tileCoordsToKey:function(o){return o.x+":"+o.y+":"+o.z},_keyToTileCoords:function(o){var l=o.split(":"),p=new F(+l[0],+l[1]);return p.z=+l[2],p},_removeTile:function(o){var l=this._tiles[o];l&&(Ce(l.el),delete this._tiles[o],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(o)}))},_initTile:function(o){se(o,"leaflet-tile");var l=this.getTileSize();o.style.width=l.x+"px",o.style.height=l.y+"px",o.onselectstart=_,o.onmousemove=_,Y.ielt9&&this.options.opacity<1&&xt(o,this.options.opacity)},_addTile:function(o,l){var p=this._getTilePos(o),g=this._tileCoordsToKey(o),y=this.createTile(this._wrapCoords(o),a(this._tileReady,this,o));this._initTile(y),this.createTile.length<2&&j(a(this._tileReady,this,o,null,y)),Le(y,p),this._tiles[g]={el:y,coords:o,current:!0},l.appendChild(y),this.fire("tileloadstart",{tile:y,coords:o})},_tileReady:function(o,l,p){l&&this.fire("tileerror",{error:l,tile:p,coords:o});var g=this._tileCoordsToKey(o);p=this._tiles[g],p&&(p.loaded=+new Date,this._map._fadeAnimated?(xt(p.el,0),te(this._fadeFrame),this._fadeFrame=j(this._updateOpacity,this)):(p.active=!0,this._pruneTiles()),l||(se(p.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:p.el,coords:o})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Y.ielt9||!this._map._fadeAnimated?j(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(o){return o.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(o){var l=new F(this._wrapX?m(o.x,this._wrapX):o.x,this._wrapY?m(o.y,this._wrapY):o.y);return l.z=o.z,l},_pxBoundsToTileRange:function(o){var l=this.getTileSize();return new ee(o.min.unscaleBy(l).floor(),o.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var o in this._tiles)if(!this._tiles[o].loaded)return!1;return!0}});function vE(o){return new Wr(o)}var Oi=Wr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(o,l){this._url=o,l=P(this,l),l.detectRetina&&Y.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(o,l){return this._url===o&&l===void 0&&(l=!0),this._url=o,l||this.redraw(),this},createTile:function(o,l){var p=document.createElement("img");return oe(p,"load",a(this._tileOnLoad,this,l,p)),oe(p,"error",a(this._tileOnError,this,l,p)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(p.referrerPolicy=this.options.referrerPolicy),p.alt="",p.src=this.getTileUrl(o),p},getTileUrl:function(o){var l={r:Y.retina?"@2x":"",s:this._getSubdomain(o),x:o.x,y:o.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var p=this._globalTileRange.max.y-o.y;this.options.tms&&(l.y=p),l["-y"]=p}return T(this._url,r(l,this.options))},_tileOnLoad:function(o,l){Y.ielt9?setTimeout(a(o,this,null,l),0):o(null,l)},_tileOnError:function(o,l,p){var g=this.options.errorTileUrl;g&&l.getAttribute("src")!==g&&(l.src=g),o(p,l)},_onTileRemove:function(o){o.tile.onload=null},_getZoomForUrl:function(){var o=this._tileZoom,l=this.options.maxZoom,p=this.options.zoomReverse,g=this.options.zoomOffset;return p&&(o=l-o),o+g},_getSubdomain:function(o){var l=Math.abs(o.x+o.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var o,l;for(o in this._tiles)if(this._tiles[o].coords.z!==this._tileZoom&&(l=this._tiles[o].el,l.onload=_,l.onerror=_,!l.complete)){l.src=R;var p=this._tiles[o].coords;Ce(l),delete this._tiles[o],this.fire("tileabort",{tile:l,coords:p})}},_removeTile:function(o){var l=this._tiles[o];if(l)return l.el.setAttribute("src",R),Wr.prototype._removeTile.call(this,o)},_tileReady:function(o,l,p){if(!(!this._map||p&&p.getAttribute("src")===R))return Wr.prototype._tileReady.call(this,o,l,p)}});function fh(o,l){return new Oi(o,l)}var hh=Oi.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(o,l){this._url=o;var p=r({},this.defaultWmsParams);for(var g in l)g in this.options||(p[g]=l[g]);l=P(this,l);var y=l.detectRetina&&Y.retina?2:1,E=this.getTileSize();p.width=E.x*y,p.height=E.y*y,this.wmsParams=p},onAdd:function(o){this._crs=this.options.crs||o.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,Oi.prototype.onAdd.call(this,o)},getTileUrl:function(o){var l=this._tileCoordsToNwSe(o),p=this._crs,g=ce(p.project(l[0]),p.project(l[1])),y=g.min,E=g.max,k=(this._wmsVersion>=1.3&&this._crs===oh?[y.y,y.x,E.y,E.x]:[y.x,y.y,E.x,E.y]).join(","),b=Oi.prototype.getTileUrl.call(this,o);return b+I(this.wmsParams,b,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+k},setParams:function(o,l){return r(this.wmsParams,o),l||this.redraw(),this}});function yE(o,l){return new hh(o,l)}Oi.WMS=hh,fh.wms=yE;var ln=Ot.extend({options:{padding:.1},initialize:function(o){P(this,o),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),se(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var o={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(o.zoomanim=this._onAnimZoom),o},_onAnimZoom:function(o){this._updateTransform(o.center,o.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(o,l){var p=this._map.getZoomScale(l,this._zoom),g=this._map.getSize().multiplyBy(.5+this.options.padding),y=this._map.project(this._center,l),E=g.multiplyBy(-p).add(y).subtract(this._map._getNewPixelOrigin(o,l));Y.any3d?ni(this._container,E,p):Le(this._container,E)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var o in this._layers)this._layers[o]._reset()},_onZoomEnd:function(){for(var o in this._layers)this._layers[o]._project()},_updatePaths:function(){for(var o in this._layers)this._layers[o]._update()},_update:function(){var o=this.options.padding,l=this._map.getSize(),p=this._map.containerPointToLayerPoint(l.multiplyBy(-o)).round();this._bounds=new ee(p,p.add(l.multiplyBy(1+o*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ph=ln.extend({options:{tolerance:0},getEvents:function(){var o=ln.prototype.getEvents.call(this);return o.viewprereset=this._onViewPreReset,o},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ln.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var o=this._container=document.createElement("canvas");oe(o,"mousemove",this._onMouseMove,this),oe(o,"click dblclick mousedown mouseup contextmenu",this._onClick,this),oe(o,"mouseout",this._handleMouseOut,this),o._leaflet_disable_events=!0,this._ctx=o.getContext("2d")},_destroyContainer:function(){te(this._redrawRequest),delete this._ctx,Ce(this._container),_e(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var o;this._redrawBounds=null;for(var l in this._layers)o=this._layers[l],o._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ln.prototype._update.call(this);var o=this._bounds,l=this._container,p=o.getSize(),g=Y.retina?2:1;Le(l,o.min),l.width=g*p.x,l.height=g*p.y,l.style.width=p.x+"px",l.style.height=p.y+"px",Y.retina&&this._ctx.scale(2,2),this._ctx.translate(-o.min.x,-o.min.y),this.fire("update")}},_reset:function(){ln.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(o){this._updateDashArray(o),this._layers[d(o)]=o;var l=o._order={layer:o,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(o){this._requestRedraw(o)},_removePath:function(o){var l=o._order,p=l.next,g=l.prev;p?p.prev=g:this._drawLast=g,g?g.next=p:this._drawFirst=p,delete o._order,delete this._layers[d(o)],this._requestRedraw(o)},_updatePath:function(o){this._extendRedrawBounds(o),o._project(),o._update(),this._requestRedraw(o)},_updateStyle:function(o){this._updateDashArray(o),this._requestRedraw(o)},_updateDashArray:function(o){if(typeof o.options.dashArray=="string"){var l=o.options.dashArray.split(/[, ]+/),p=[],g,y;for(y=0;y<l.length;y++){if(g=Number(l[y]),isNaN(g))return;p.push(g)}o.options._dashArray=p}else o.options._dashArray=o.options.dashArray},_requestRedraw:function(o){this._map&&(this._extendRedrawBounds(o),this._redrawRequest=this._redrawRequest||j(this._redraw,this))},_extendRedrawBounds:function(o){if(o._pxBounds){var l=(o.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ee,this._redrawBounds.extend(o._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(o._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var o=this._redrawBounds;if(o){var l=o.getSize();this._ctx.clearRect(o.min.x,o.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var o,l=this._redrawBounds;if(this._ctx.save(),l){var p=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,p.x,p.y),this._ctx.clip()}this._drawing=!0;for(var g=this._drawFirst;g;g=g.next)o=g.layer,(!l||o._pxBounds&&o._pxBounds.intersects(l))&&o._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(o,l){if(this._drawing){var p,g,y,E,k=o._parts,b=k.length,D=this._ctx;if(b){for(D.beginPath(),p=0;p<b;p++){for(g=0,y=k[p].length;g<y;g++)E=k[p][g],D[g?"lineTo":"moveTo"](E.x,E.y);l&&D.closePath()}this._fillStroke(D,o)}}},_updateCircle:function(o){if(!(!this._drawing||o._empty())){var l=o._point,p=this._ctx,g=Math.max(Math.round(o._radius),1),y=(Math.max(Math.round(o._radiusY),1)||g)/g;y!==1&&(p.save(),p.scale(1,y)),p.beginPath(),p.arc(l.x,l.y/y,g,0,Math.PI*2,!1),y!==1&&p.restore(),this._fillStroke(p,o)}},_fillStroke:function(o,l){var p=l.options;p.fill&&(o.globalAlpha=p.fillOpacity,o.fillStyle=p.fillColor||p.color,o.fill(p.fillRule||"evenodd")),p.stroke&&p.weight!==0&&(o.setLineDash&&o.setLineDash(l.options&&l.options._dashArray||[]),o.globalAlpha=p.opacity,o.lineWidth=p.weight,o.strokeStyle=p.color,o.lineCap=p.lineCap,o.lineJoin=p.lineJoin,o.stroke())},_onClick:function(o){for(var l=this._map.mouseEventToLayerPoint(o),p,g,y=this._drawFirst;y;y=y.next)p=y.layer,p.options.interactive&&p._containsPoint(l)&&(!(o.type==="click"||o.type==="preclick")||!this._map._draggableMoved(p))&&(g=p);this._fireEvent(g?[g]:!1,o)},_onMouseMove:function(o){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(o);this._handleMouseHover(o,l)}},_handleMouseOut:function(o){var l=this._hoveredLayer;l&&(Ne(this._container,"leaflet-interactive"),this._fireEvent([l],o,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(o,l){if(!this._mouseHoverThrottled){for(var p,g,y=this._drawFirst;y;y=y.next)p=y.layer,p.options.interactive&&p._containsPoint(l)&&(g=p);g!==this._hoveredLayer&&(this._handleMouseOut(o),g&&(se(this._container,"leaflet-interactive"),this._fireEvent([g],o,"mouseover"),this._hoveredLayer=g)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,o),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(o,l,p){this._map._fireDOMEvent(l,p||l.type,o)},_bringToFront:function(o){var l=o._order;if(l){var p=l.next,g=l.prev;if(p)p.prev=g;else return;g?g.next=p:p&&(this._drawFirst=p),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(o)}},_bringToBack:function(o){var l=o._order;if(l){var p=l.next,g=l.prev;if(g)g.next=p;else return;p?p.prev=g:g&&(this._drawLast=g),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(o)}}});function mh(o){return Y.canvas?new ph(o):null}var Jr=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(o){return document.createElement("<lvml:"+o+' class="lvml">')}}catch{}return function(o){return document.createElement("<"+o+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),wE={_initContainer:function(){this._container=he("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ln.prototype._update.call(this),this.fire("update"))},_initPath:function(o){var l=o._container=Jr("shape");se(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",o._path=Jr("path"),l.appendChild(o._path),this._updateStyle(o),this._layers[d(o)]=o},_addPath:function(o){var l=o._container;this._container.appendChild(l),o.options.interactive&&o.addInteractiveTarget(l)},_removePath:function(o){var l=o._container;Ce(l),o.removeInteractiveTarget(l),delete this._layers[d(o)]},_updateStyle:function(o){var l=o._stroke,p=o._fill,g=o.options,y=o._container;y.stroked=!!g.stroke,y.filled=!!g.fill,g.stroke?(l||(l=o._stroke=Jr("stroke")),y.appendChild(l),l.weight=g.weight+"px",l.color=g.color,l.opacity=g.opacity,g.dashArray?l.dashStyle=S(g.dashArray)?g.dashArray.join(" "):g.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=g.lineCap.replace("butt","flat"),l.joinstyle=g.lineJoin):l&&(y.removeChild(l),o._stroke=null),g.fill?(p||(p=o._fill=Jr("fill")),y.appendChild(p),p.color=g.fillColor||g.color,p.opacity=g.fillOpacity):p&&(y.removeChild(p),o._fill=null)},_updateCircle:function(o){var l=o._point.round(),p=Math.round(o._radius),g=Math.round(o._radiusY||p);this._setPath(o,o._empty()?"M0 0":"AL "+l.x+","+l.y+" "+p+","+g+" 0,"+65535*360)},_setPath:function(o,l){o._path.v=l},_bringToFront:function(o){Ri(o._container)},_bringToBack:function(o){Ni(o._container)}},ws=Y.vml?Jr:yf,Kr=ln.extend({_initContainer:function(){this._container=ws("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ws("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ce(this._container),_e(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ln.prototype._update.call(this);var o=this._bounds,l=o.getSize(),p=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,p.setAttribute("width",l.x),p.setAttribute("height",l.y)),Le(p,o.min),p.setAttribute("viewBox",[o.min.x,o.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(o){var l=o._path=ws("path");o.options.className&&se(l,o.options.className),o.options.interactive&&se(l,"leaflet-interactive"),this._updateStyle(o),this._layers[d(o)]=o},_addPath:function(o){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(o._path),o.addInteractiveTarget(o._path)},_removePath:function(o){Ce(o._path),o.removeInteractiveTarget(o._path),delete this._layers[d(o)]},_updatePath:function(o){o._project(),o._update()},_updateStyle:function(o){var l=o._path,p=o.options;l&&(p.stroke?(l.setAttribute("stroke",p.color),l.setAttribute("stroke-opacity",p.opacity),l.setAttribute("stroke-width",p.weight),l.setAttribute("stroke-linecap",p.lineCap),l.setAttribute("stroke-linejoin",p.lineJoin),p.dashArray?l.setAttribute("stroke-dasharray",p.dashArray):l.removeAttribute("stroke-dasharray"),p.dashOffset?l.setAttribute("stroke-dashoffset",p.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),p.fill?(l.setAttribute("fill",p.fillColor||p.color),l.setAttribute("fill-opacity",p.fillOpacity),l.setAttribute("fill-rule",p.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(o,l){this._setPath(o,wf(o._parts,l))},_updateCircle:function(o){var l=o._point,p=Math.max(Math.round(o._radius),1),g=Math.max(Math.round(o._radiusY),1)||p,y="a"+p+","+g+" 0 1,0 ",E=o._empty()?"M0 0":"M"+(l.x-p)+","+l.y+y+p*2+",0 "+y+-p*2+",0 ";this._setPath(o,E)},_setPath:function(o,l){o._path.setAttribute("d",l)},_bringToFront:function(o){Ri(o._path)},_bringToBack:function(o){Ni(o._path)}});Y.vml&&Kr.include(wE);function gh(o){return Y.svg||Y.vml?new Kr(o):null}ue.include({getRenderer:function(o){var l=o.options.renderer||this._getPaneRenderer(o.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(o){if(o==="overlayPane"||o===void 0)return!1;var l=this._paneRenderers[o];return l===void 0&&(l=this._createRenderer({pane:o}),this._paneRenderers[o]=l),l},_createRenderer:function(o){return this.options.preferCanvas&&mh(o)||gh(o)}});var _h=Li.extend({initialize:function(o,l){Li.prototype.initialize.call(this,this._boundsToLatLngs(o),l)},setBounds:function(o){return this.setLatLngs(this._boundsToLatLngs(o))},_boundsToLatLngs:function(o){return o=ge(o),[o.getSouthWest(),o.getNorthWest(),o.getNorthEast(),o.getSouthEast()]}});function EE(o,l){return new _h(o,l)}Kr.create=ws,Kr.pointsToPath=wf,an.geometryToLayer=hs,an.coordsToLatLng=Gl,an.coordsToLatLngs=ps,an.latLngToCoords=$l,an.latLngsToCoords=ms,an.getFeature=Di,an.asFeature=gs,ue.mergeOptions({boxZoom:!0});var vh=Yt.extend({initialize:function(o){this._map=o,this._container=o._container,this._pane=o._panes.overlayPane,this._resetStateTimeout=0,o.on("unload",this._destroy,this)},addHooks:function(){oe(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){_e(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ce(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(o){if(!o.shiftKey||o.which!==1&&o.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Br(),Al(),this._startPoint=this._map.mouseEventToContainerPoint(o),oe(document,{contextmenu:oi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(o){this._moved||(this._moved=!0,this._box=he("div","leaflet-zoom-box",this._container),se(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(o);var l=new ee(this._point,this._startPoint),p=l.getSize();Le(this._box,l.min),this._box.style.width=p.x+"px",this._box.style.height=p.y+"px"},_finish:function(){this._moved&&(Ce(this._box),Ne(this._container,"leaflet-crosshair")),zr(),Il(),_e(document,{contextmenu:oi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(o){if(!(o.which!==1&&o.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var l=new Fe(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(o){o.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});ue.addInitHook("addHandler","boxZoom",vh),ue.mergeOptions({doubleClickZoom:!0});var yh=Yt.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(o){var l=this._map,p=l.getZoom(),g=l.options.zoomDelta,y=o.originalEvent.shiftKey?p-g:p+g;l.options.doubleClickZoom==="center"?l.setZoom(y):l.setZoomAround(o.containerPoint,y)}});ue.addInitHook("addHandler","doubleClickZoom",yh),ue.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var wh=Yt.extend({addHooks:function(){if(!this._draggable){var o=this._map;this._draggable=new Cn(o._mapPane,o._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),o.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),o.on("zoomend",this._onZoomEnd,this),o.whenReady(this._onZoomEnd,this))}se(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ne(this._map._container,"leaflet-grab"),Ne(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var o=this._map;if(o._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=ge(this._map.options.maxBounds);this._offsetLimit=ce(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;o.fire("movestart").fire("dragstart"),o.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(o){if(this._map.options.inertia){var l=this._lastTime=+new Date,p=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(p),this._times.push(l),this._prunePositions(l)}this._map.fire("move",o).fire("drag",o)},_prunePositions:function(o){for(;this._positions.length>1&&o-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var o=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(o).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(o,l){return o-(o-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var o=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;o.x<l.min.x&&(o.x=this._viscousLimit(o.x,l.min.x)),o.y<l.min.y&&(o.y=this._viscousLimit(o.y,l.min.y)),o.x>l.max.x&&(o.x=this._viscousLimit(o.x,l.max.x)),o.y>l.max.y&&(o.y=this._viscousLimit(o.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(o)}},_onPreDragWrap:function(){var o=this._worldWidth,l=Math.round(o/2),p=this._initialWorldOffset,g=this._draggable._newPos.x,y=(g-l+p)%o+l-p,E=(g+l+p)%o-l-p,k=Math.abs(y+p)<Math.abs(E+p)?y:E;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=k},_onDragEnd:function(o){var l=this._map,p=l.options,g=!p.inertia||o.noInertia||this._times.length<2;if(l.fire("dragend",o),g)l.fire("moveend");else{this._prunePositions(+new Date);var y=this._lastPos.subtract(this._positions[0]),E=(this._lastTime-this._times[0])/1e3,k=p.easeLinearity,b=y.multiplyBy(k/E),D=b.distanceTo([0,0]),B=Math.min(p.inertiaMaxSpeed,D),W=b.multiplyBy(B/D),X=B/(p.inertiaDeceleration*k),ae=W.multiplyBy(-X/2).round();!ae.x&&!ae.y?l.fire("moveend"):(ae=l._limitOffset(ae,l.options.maxBounds),j(function(){l.panBy(ae,{duration:X,easeLinearity:k,noMoveStart:!0,animate:!0})}))}}});ue.addInitHook("addHandler","dragging",wh),ue.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Eh=Yt.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(o){this._map=o,this._setPanDelta(o.options.keyboardPanDelta),this._setZoomDelta(o.options.zoomDelta)},addHooks:function(){var o=this._map._container;o.tabIndex<=0&&(o.tabIndex="0"),oe(o,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),_e(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var o=document.body,l=document.documentElement,p=o.scrollTop||l.scrollTop,g=o.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(g,p)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(o){var l=this._panKeys={},p=this.keyCodes,g,y;for(g=0,y=p.left.length;g<y;g++)l[p.left[g]]=[-1*o,0];for(g=0,y=p.right.length;g<y;g++)l[p.right[g]]=[o,0];for(g=0,y=p.down.length;g<y;g++)l[p.down[g]]=[0,o];for(g=0,y=p.up.length;g<y;g++)l[p.up[g]]=[0,-1*o]},_setZoomDelta:function(o){var l=this._zoomKeys={},p=this.keyCodes,g,y;for(g=0,y=p.zoomIn.length;g<y;g++)l[p.zoomIn[g]]=o;for(g=0,y=p.zoomOut.length;g<y;g++)l[p.zoomOut[g]]=-o},_addHooks:function(){oe(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){_e(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(o){if(!(o.altKey||o.ctrlKey||o.metaKey)){var l=o.keyCode,p=this._map,g;if(l in this._panKeys){if(!p._panAnim||!p._panAnim._inProgress)if(g=this._panKeys[l],o.shiftKey&&(g=H(g).multiplyBy(3)),p.options.maxBounds&&(g=p._limitOffset(H(g),p.options.maxBounds)),p.options.worldCopyJump){var y=p.wrapLatLng(p.unproject(p.project(p.getCenter()).add(g)));p.panTo(y)}else p.panBy(g)}else if(l in this._zoomKeys)p.setZoom(p.getZoom()+(o.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&p._popup&&p._popup.options.closeOnEscapeKey)p.closePopup();else return;oi(o)}}});ue.addInitHook("addHandler","keyboard",Eh),ue.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Th=Yt.extend({addHooks:function(){oe(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){_e(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(o){var l=Wf(o),p=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(o),this._startTime||(this._startTime=+new Date);var g=Math.max(p-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),g),oi(o)},_performZoom:function(){var o=this._map,l=o.getZoom(),p=this._map.options.zoomSnap||0;o._stop();var g=this._delta/(this._map.options.wheelPxPerZoomLevel*4),y=4*Math.log(2/(1+Math.exp(-Math.abs(g))))/Math.LN2,E=p?Math.ceil(y/p)*p:y,k=o._limitZoom(l+(this._delta>0?E:-E))-l;this._delta=0,this._startTime=null,k&&(o.options.scrollWheelZoom==="center"?o.setZoom(l+k):o.setZoomAround(this._lastMousePos,l+k))}});ue.addInitHook("addHandler","scrollWheelZoom",Th);var TE=600;ue.mergeOptions({tapHold:Y.touchNative&&Y.safari&&Y.mobile,tapTolerance:15});var Sh=Yt.extend({addHooks:function(){oe(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){_e(this._map._container,"touchstart",this._onDown,this)},_onDown:function(o){if(clearTimeout(this._holdTimeout),o.touches.length===1){var l=o.touches[0];this._startPos=this._newPos=new F(l.clientX,l.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(oe(document,"touchend",We),oe(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),TE),oe(document,"touchend touchcancel contextmenu",this._cancel,this),oe(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function o(){_e(document,"touchend",We),_e(document,"touchend touchcancel",o)},_cancel:function(){clearTimeout(this._holdTimeout),_e(document,"touchend touchcancel contextmenu",this._cancel,this),_e(document,"touchmove",this._onMove,this)},_onMove:function(o){var l=o.touches[0];this._newPos=new F(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(o,l){var p=new MouseEvent(o,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});p._simulated=!0,l.target.dispatchEvent(p)}});ue.addInitHook("addHandler","tapHold",Sh),ue.mergeOptions({touchZoom:Y.touch,bounceAtZoomLimits:!0});var Ch=Yt.extend({addHooks:function(){se(this._map._container,"leaflet-touch-zoom"),oe(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ne(this._map._container,"leaflet-touch-zoom"),_e(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(o){var l=this._map;if(!(!o.touches||o.touches.length!==2||l._animatingZoom||this._zooming)){var p=l.mouseEventToContainerPoint(o.touches[0]),g=l.mouseEventToContainerPoint(o.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(p.add(g)._divideBy(2))),this._startDist=p.distanceTo(g),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),oe(document,"touchmove",this._onTouchMove,this),oe(document,"touchend touchcancel",this._onTouchEnd,this),We(o)}},_onTouchMove:function(o){if(!(!o.touches||o.touches.length!==2||!this._zooming)){var l=this._map,p=l.mouseEventToContainerPoint(o.touches[0]),g=l.mouseEventToContainerPoint(o.touches[1]),y=p.distanceTo(g)/this._startDist;if(this._zoom=l.getScaleZoom(y,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&y<1||this._zoom>l.getMaxZoom()&&y>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,y===1)return}else{var E=p._add(g)._divideBy(2)._subtract(this._centerPoint);if(y===1&&E.x===0&&E.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(E),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),te(this._animRequest);var k=a(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=j(k,this,!0),We(o)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,te(this._animRequest),_e(document,"touchmove",this._onTouchMove,this),_e(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});ue.addInitHook("addHandler","touchZoom",Ch),ue.BoxZoom=vh,ue.DoubleClickZoom=yh,ue.Drag=wh,ue.Keyboard=Eh,ue.ScrollWheelZoom=Th,ue.TapHold=Sh,ue.TouchZoom=Ch,n.Bounds=ee,n.Browser=Y,n.CRS=ut,n.Canvas=ph,n.Circle=Hl,n.CircleMarker=fs,n.Class=qe,n.Control=Dt,n.DivIcon=dh,n.DivOverlay=jt,n.DomEvent=zw,n.DomUtil=Fw,n.Draggable=Cn,n.Evented=je,n.FeatureGroup=on,n.GeoJSON=an,n.GridLayer=Wr,n.Handler=Yt,n.Icon=Mi,n.ImageOverlay=_s,n.LatLng=fe,n.LatLngBounds=Fe,n.Layer=Ot,n.LayerGroup=bi,n.LineUtil=Xw,n.Map=ue,n.Marker=ds,n.Mixin=Jw,n.Path=xn,n.Point=F,n.PolyUtil=Kw,n.Polygon=Li,n.Polyline=sn,n.Popup=vs,n.PosAnimation=Jf,n.Projection=eE,n.Rectangle=_h,n.Renderer=ln,n.SVG=Kr,n.SVGOverlay=ch,n.TileLayer=Oi,n.Tooltip=ys,n.Transformation=ml,n.Util=Re,n.VideoOverlay=uh,n.bind=a,n.bounds=ce,n.canvas=mh,n.circle=lE,n.circleMarker=aE,n.control=Hr,n.divIcon=_E,n.extend=r,n.featureGroup=rE,n.geoJSON=lh,n.geoJson=dE,n.gridLayer=vE,n.icon=oE,n.imageOverlay=fE,n.latLng=re,n.latLngBounds=ge,n.layerGroup=iE,n.map=Vw,n.marker=sE,n.point=H,n.polygon=cE,n.polyline=uE,n.popup=mE,n.rectangle=EE,n.setOptions=P,n.stamp=d,n.svg=gh,n.svgOverlay=pE,n.tileLayer=fh,n.tooltip=gE,n.transformation=Dr,n.version=i,n.videoOverlay=hE;var SE=window.L;n.noConflict=function(){return window.L=SE,this},window.L=n})})(Bc,Bc.exports);var ns=Bc.exports;const af=Xg(ns);function lf(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function uf(t,e){return e==null?function(i,r){const s=U.useRef();return s.current||(s.current=t(i,r)),s}:function(i,r){const s=U.useRef();s.current||(s.current=t(i,r));const a=U.useRef(i),{instance:u}=s.current;return U.useEffect(function(){a.current!==i&&(e(u,i,a.current),a.current=i)},[u,i,r]),s}}function $A(t,e){U.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var s;(s=e.layerContainer)==null||s.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function N0(t){return function(n){const i=of(),r=t(sf(n,i),i);return A0(i.map,n.attribution),R0(r.current,n.eventHandlers),$A(r.current,i),r}}function WA(t,e){const n=uf(t,e),i=N0(n);return VA(i)}function JA(t,e){const n=uf(t),i=GA(n,e);return qA(i)}function KA(t,e){const n=uf(t,e),i=N0(n);return HA(i)}function ZA(t,e,n){const{opacity:i,zIndex:r}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),r!=null&&r!==n.zIndex&&t.setZIndex(r)}function b0(){return of().map}function YA(t){const e=b0();return U.useEffect(function(){return e.on(t),function(){e.off(t)}},[e,t]),e}function zc(){return zc=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},zc.apply(this,arguments)}function jA({bounds:t,boundsOptions:e,center:n,children:i,className:r,id:s,placeholder:a,style:u,whenReady:d,zoom:f,...m},_){const[v]=U.useState({className:r,id:s,style:u}),[w,x]=U.useState(null);U.useImperativeHandle(_,()=>(w==null?void 0:w.map)??null,[w]);const P=U.useCallback(C=>{if(C!==null&&w===null){const T=new ns.Map(C,m);n!=null&&f!=null?T.setView(n,f):t!=null&&T.fitBounds(t,e),d!=null&&T.whenReady(d),x(BA(T))}},[]);U.useEffect(()=>()=>{w==null||w.map.remove()},[w]);const I=w?Co.createElement(k0,{value:w},i):a??null;return Co.createElement("div",zc({},v,{ref:P}),I)}const QA=U.forwardRef(jA),ym=WA(function({position:e,...n},i){const r=new ns.Marker(e,n);return lf(r,zA(i,{overlayContainer:r}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),wm=JA(function(e,n){const i=new ns.Popup(e,n.overlayContainer);return lf(i,n)},function(e,n,{position:i},r){U.useEffect(function(){const{instance:a}=e;function u(f){f.popup===a&&(a.update(),r(!0))}function d(f){f.popup===a&&r(!1)}return n.map.on({popupopen:u,popupclose:d}),n.overlayContainer==null?(i!=null&&a.setLatLng(i),a.openOn(n.map)):n.overlayContainer.bindPopup(a),function(){var m;n.map.off({popupopen:u,popupclose:d}),(m=n.overlayContainer)==null||m.unbindPopup(),n.map.removeLayer(a)}},[e,n,r,i])}),Em=KA(function({url:e,...n},i){const r=new ns.TileLayer(e,sf(n,i));return lf(r,i)},function(e,n,i){ZA(e,n,i);const{url:r}=n;r!=null&&r!==i.url&&e.setUrl(r)}),XA="https://api.waqi.info",eI="https://api.waqi.info/feed",Tm="https://api.openweathermap.org/data/2.5";async function tI(t){var N,R,M,O,z,q,G,j,te,Re,qe,rn;const e="90a537382012884163bba006081376fde309fc19",n="9c9460468cc9e2bbb8d8d9cdd3336798";let i=null,r=null,s=null,a=null;try{const ie=`${eI}/${t}/?token=${e}`,F=await(await fetch(ie)).json();if(console.log("aqicnJson",F),F.status==="ok"&&F.data)i=F.data,(N=i.city)!=null&&N.geo&&(a={lat:i.city.geo[0],lon:i.city.geo[1]});else if(F.status==="error")throw new Error(F.data||"Failed to fetch AQI data for this city")}catch(ie){throw console.error("AQICN API error:",ie),ie.message?ie:new Error("Failed to fetch AQI data. Please check the city name and try again.")}if(a){console.log("coordinates",a);try{const ie=`${Tm}/weather?lat=${a.lat}&lon=${a.lon}&appid=${n}&units=metric`;r=await(await fetch(ie)).json(),console.log("owmWeatherData",r)}catch(ie){console.error("OpenWeather API error:",ie)}try{const ie=`${Tm}/air_pollution/forecast?lat=${a.lat}&lon=${a.lon}&appid=${n}`;s=await(await fetch(ie)).json(),console.log("ownm",s)}catch(ie){console.error("OpenWeather Pollution API error:",ie)}}const u=(i==null?void 0:i.aqi)||null,d=(i==null?void 0:i.iaqi)||{},f=((R=d==null?void 0:d.pm25)==null?void 0:R.v)||null,m=((M=d==null?void 0:d.pm10)==null?void 0:M.v)||null,_=((O=d==null?void 0:d.co)==null?void 0:O.v)||null,v=((z=d==null?void 0:d.no2)==null?void 0:z.v)||null,w=((q=d==null?void 0:d.so2)==null?void 0:q.v)||null,x=((G=d==null?void 0:d.o3)==null?void 0:G.v)||null,P=((j=r==null?void 0:r.main)==null?void 0:j.temp)||null,I=((te=r==null?void 0:r.main)==null?void 0:te.humidity)||null,C=((Re=r==null?void 0:r.wind)==null?void 0:Re.speed)||null;let T=null;s!=null&&s.list&&s.list.length>0&&(T=((qe=s.list[0].main)==null?void 0:qe.aqi)||null);const S=`https://tiles.aqicn.org/tiles/{z}/{x}/{y}.png?token=${e}`;return{city:((rn=i==null?void 0:i.city)==null?void 0:rn.name)||t,aqi:u,pm25:f,pm10:m,co:_,no2:v,so2:w,o3:x,temp:P,humidity:I,wind:C,forecast_next_hour:T,heatmap_tile:S,coordinates:a}}async function Sm(t,e,n,i){const r="90a537382012884163bba006081376fde309fc19";try{const s=`${XA}/map/bounds/?token=${r}&latlng=${t},${e},${n},${i}`,u=await(await fetch(s)).json();return u.status==="ok"&&u.data?u.data.map(f=>{var m,_;return{uid:f.uid,aqi:f.aqi,lat:f.lat,lon:f.lon,station:{name:((m=f.station)==null?void 0:m.name)||"Unknown Station",time:(_=f.station)==null?void 0:_.time},iaqi:f.iaqi||{}}}):[]}catch(s){return console.error("Error fetching map stations:",s),[]}}function M0(){return A.jsx("div",{className:"flex items-center justify-center p-8",children:A.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}function L0({message:t}){return A.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:A.jsxs("div",{className:"flex items-center",children:[A.jsx("svg",{className:"w-5 h-5 text-red-600 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:A.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),A.jsx("p",{className:"text-red-800 font-medium",children:t})]})})}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let nI,iI;function rI(){return{geminiUrl:nI,vertexUrl:iI}}function oI(t,e,n,i){var r,s;if(!(t!=null&&t.baseUrl)){const a=rI();return e?(r=a.vertexUrl)!==null&&r!==void 0?r:n:(s=a.geminiUrl)!==null&&s!==void 0?s:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class En{}function $(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const s=e[r];return s!=null?String(s):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function h(t,e,n){for(let s=0;s<e.length-1;s++){const a=e[s];if(a.endsWith("[]")){const u=a.slice(0,-2);if(!(u in t))if(Array.isArray(n))t[u]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(t[u])){const d=t[u];if(Array.isArray(n))for(let f=0;f<d.length;f++){const m=d[f];h(m,e.slice(s+1),n[f])}else for(const f of d)h(f,e.slice(s+1),n)}return}else if(a.endsWith("[0]")){const u=a.slice(0,-3);u in t||(t[u]=[{}]);const d=t[u];h(d[0],e.slice(s+1),n);return}(!t[a]||typeof t[a]!="object")&&(t[a]={}),t=t[a]}const i=e[e.length-1],r=t[i];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function c(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return n;const r=e[i];if(r.endsWith("[]")){const s=r.slice(0,-2);if(s in t){const a=t[s];return Array.isArray(a)?a.map(u=>c(u,e.slice(i+1),n)):n}else return n}else t=t[r]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}function sI(t,e){for(const[n,i]of Object.entries(e)){const r=n.split("."),s=i.split("."),a=new Set;let u=-1;for(let d=0;d<r.length;d++)if(r[d]==="*"){u=d;break}if(u!==-1&&s.length>u)for(let d=u;d<s.length;d++){const f=s[d];f!=="*"&&!f.endsWith("[]")&&!f.endsWith("[0]")&&a.add(f)}Vc(t,r,s,0,a)}}function Vc(t,e,n,i,r){if(i>=e.length||typeof t!="object"||t===null)return;const s=e[i];if(s.endsWith("[]")){const a=s.slice(0,-2),u=t;if(a in u&&Array.isArray(u[a]))for(const d of u[a])Vc(d,e,n,i+1,r)}else if(s==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const a=t,u=Object.keys(a).filter(f=>!f.startsWith("_")&&!r.has(f)),d={};for(const f of u)d[f]=a[f];for(const[f,m]of Object.entries(d)){const _=[];for(const v of n.slice(i))v==="*"?_.push(f):_.push(v);h(a,_,m)}for(const f of u)delete a[f]}}else{const a=t;s in a&&Vc(a[s],e,n,i+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cf(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aI(t){const e={},n=c(t,["operationName"]);n!=null&&h(e,["operationName"],n);const i=c(t,["resourceName"]);return i!=null&&h(e,["_url","resourceName"],i),e}function lI(t){const e={},n=c(t,["name"]);n!=null&&h(e,["name"],n);const i=c(t,["metadata"]);i!=null&&h(e,["metadata"],i);const r=c(t,["done"]);r!=null&&h(e,["done"],r);const s=c(t,["error"]);s!=null&&h(e,["error"],s);const a=c(t,["response","generateVideoResponse"]);return a!=null&&h(e,["response"],cI(a)),e}function uI(t){const e={},n=c(t,["name"]);n!=null&&h(e,["name"],n);const i=c(t,["metadata"]);i!=null&&h(e,["metadata"],i);const r=c(t,["done"]);r!=null&&h(e,["done"],r);const s=c(t,["error"]);s!=null&&h(e,["error"],s);const a=c(t,["response"]);return a!=null&&h(e,["response"],dI(a)),e}function cI(t){const e={},n=c(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>fI(a))),h(e,["generatedVideos"],s)}const i=c(t,["raiMediaFilteredCount"]);i!=null&&h(e,["raiMediaFilteredCount"],i);const r=c(t,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function dI(t){const e={},n=c(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>hI(a))),h(e,["generatedVideos"],s)}const i=c(t,["raiMediaFilteredCount"]);i!=null&&h(e,["raiMediaFilteredCount"],i);const r=c(t,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function fI(t){const e={},n=c(t,["video"]);return n!=null&&h(e,["video"],yI(n)),e}function hI(t){const e={},n=c(t,["_self"]);return n!=null&&h(e,["video"],wI(n)),e}function pI(t){const e={},n=c(t,["operationName"]);return n!=null&&h(e,["_url","operationName"],n),e}function mI(t){const e={},n=c(t,["operationName"]);return n!=null&&h(e,["_url","operationName"],n),e}function gI(t){const e={},n=c(t,["name"]);n!=null&&h(e,["name"],n);const i=c(t,["metadata"]);i!=null&&h(e,["metadata"],i);const r=c(t,["done"]);r!=null&&h(e,["done"],r);const s=c(t,["error"]);s!=null&&h(e,["error"],s);const a=c(t,["response"]);return a!=null&&h(e,["response"],_I(a)),e}function _I(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const i=c(t,["parent"]);i!=null&&h(e,["parent"],i);const r=c(t,["documentName"]);return r!=null&&h(e,["documentName"],r),e}function D0(t){const e={},n=c(t,["name"]);n!=null&&h(e,["name"],n);const i=c(t,["metadata"]);i!=null&&h(e,["metadata"],i);const r=c(t,["done"]);r!=null&&h(e,["done"],r);const s=c(t,["error"]);s!=null&&h(e,["error"],s);const a=c(t,["response"]);return a!=null&&h(e,["response"],vI(a)),e}function vI(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const i=c(t,["parent"]);i!=null&&h(e,["parent"],i);const r=c(t,["documentName"]);return r!=null&&h(e,["documentName"],r),e}function yI(t){const e={},n=c(t,["uri"]);n!=null&&h(e,["uri"],n);const i=c(t,["encodedVideo"]);i!=null&&h(e,["videoBytes"],cf(i));const r=c(t,["encoding"]);return r!=null&&h(e,["mimeType"],r),e}function wI(t){const e={},n=c(t,["gcsUri"]);n!=null&&h(e,["uri"],n);const i=c(t,["bytesBase64Encoded"]);i!=null&&h(e,["videoBytes"],cf(i));const r=c(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Cm;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Cm||(Cm={}));var xm;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(xm||(xm={}));var Pm;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Pm||(Pm={}));var Un;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Un||(Un={}));var Am;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Am||(Am={}));var Im;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Im||(Im={}));var km;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(km||(km={}));var Rm;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Rm||(Rm={}));var Nm;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Nm||(Nm={}));var bm;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})(bm||(bm={}));var Mm;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Mm||(Mm={}));var Lm;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Lm||(Lm={}));var Dm;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Dm||(Dm={}));var Om;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(Om||(Om={}));var Um;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Um||(Um={}));var Fm;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Fm||(Fm={}));var Bm;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Bm||(Bm={}));var zm;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(zm||(zm={}));var Vm;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Vm||(Vm={}));var Ba;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Ba||(Ba={}));var qm;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(qm||(qm={}));var Hm;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Hm||(Hm={}));var Gm;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Gm||(Gm={}));var qc;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(qc||(qc={}));var $m;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})($m||($m={}));var Wm;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Wm||(Wm={}));var Jm;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Jm||(Jm={}));var Km;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Km||(Km={}));var Zm;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Zm||(Zm={}));var Ym;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Ym||(Ym={}));var jm;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(jm||(jm={}));var Qm;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Qm||(Qm={}));var Xm;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Xm||(Xm={}));var eg;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(eg||(eg={}));var tg;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(tg||(tg={}));var ng;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(ng||(ng={}));var ig;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(ig||(ig={}));var rg;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(rg||(rg={}));var og;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(og||(og={}));var sg;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(sg||(sg={}));var ag;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(ag||(ag={}));var lg;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(lg||(lg={}));var ug;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(ug||(ug={}));var cg;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(cg||(cg={}));var dg;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(dg||(dg={}));var fg;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(fg||(fg={}));var hg;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(hg||(hg={}));var pg;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(pg||(pg={}));var mg;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(mg||(mg={}));var gg;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(gg||(gg={}));var _g;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(_g||(_g={}));var vg;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(vg||(vg={}));var yg;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(yg||(yg={}));var wg;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(wg||(wg={}));var or;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(or||(or={}));class Hc{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class ro{get text(){var e,n,i,r,s,a,u,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",m=!1;const _=[];for(const v of(d=(u=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[w,x]of Object.entries(v))w!=="text"&&w!=="thought"&&w!=="thoughtSignature"&&(x!==null||x!==void 0)&&_.push(w);if(typeof v.text=="string"){if(typeof v.thought=="boolean"&&v.thought)continue;m=!0,f+=v.text}}return _.length>0&&console.warn(`there are non-text parts ${_} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),m?f:void 0}get data(){var e,n,i,r,s,a,u,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const m=[];for(const _ of(d=(u=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[v,w]of Object.entries(_))v!=="inlineData"&&(w!==null||w!==void 0)&&m.push(v);_.inlineData&&typeof _.inlineData.data=="string"&&(f+=atob(_.inlineData.data))}return m.length>0&&console.warn(`there are non-data parts ${m} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var e,n,i,r,s,a,u,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(d=(u=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(m=>m.functionCall).map(m=>m.functionCall).filter(m=>m!==void 0);if((f==null?void 0:f.length)!==0)return f}get executableCode(){var e,n,i,r,s,a,u,d,f;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const m=(d=(u=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(_=>_.executableCode).map(_=>_.executableCode).filter(_=>_!==void 0);if((m==null?void 0:m.length)!==0)return(f=m==null?void 0:m[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var e,n,i,r,s,a,u,d,f;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const m=(d=(u=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(_=>_.codeExecutionResult).map(_=>_.codeExecutionResult).filter(_=>_!==void 0);if((m==null?void 0:m.length)!==0)return(f=m==null?void 0:m[0])===null||f===void 0?void 0:f.output}}class Eg{}class Tg{}class EI{}class TI{}class SI{}class CI{}class Sg{}class Cg{}class xg{}class xI{}class za{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new za;let r;const s=e;return n?r=uI(s):r=lI(s),Object.assign(i,r),i}}class Pg{}class Ag{}class Ig{}class PI{}class AI{}class II{}class df{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new df,s=gI(e);return Object.assign(i,s),i}}class kI{}class RI{}class NI{}class kg{}class bI{get text(){var e,n,i;let r="",s=!1;const a=[];for(const u of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[d,f]of Object.entries(u))d!=="text"&&d!=="thought"&&f!==null&&a.push(d);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;s=!0,r+=u.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?r:void 0}get data(){var e,n,i;let r="";const s=[];for(const a of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[u,d]of Object.entries(a))u!=="inlineData"&&d!==null&&s.push(u);a.inlineData&&typeof a.inlineData.data=="string"&&(r+=atob(a.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class MI{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class ff{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new ff,s=D0(e);return Object.assign(i,s),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pe(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function O0(t,e){const n=pe(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function U0(t){return Array.isArray(t)?t.map(e=>Va(e)):[Va(t)]}function Va(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function F0(t){const e=Va(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function B0(t){const e=Va(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Rg(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function z0(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Rg(e)):[Rg(t)]}function Gc(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Ng(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function bg(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function tt(t){if(t==null)throw new Error("ContentUnion is required");return Gc(t)?t:{role:"user",parts:z0(t)}}function hf(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=tt(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=tt(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>tt(n)):[tt(e)]}function bt(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Ng(t)||bg(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[tt(t)]}const e=[],n=[],i=Gc(t[0]);for(const r of t){const s=Gc(r);if(s!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)e.push(r);else{if(Ng(r)||bg(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return i||e.push({role:"user",parts:z0(n)}),e}function LI(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(Un).includes(n[0].toUpperCase())?n[0].toUpperCase():Un.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(Un).includes(i.toUpperCase())?i.toUpperCase():Un.TYPE_UNSPECIFIED})}}function hr(t){const e={},n=["items"],i=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const s=t.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(e.nullable=!0,t=s[1]):s[1].type==="null"&&(e.nullable=!0,t=s[0])),t.type instanceof Array&&LI(t.type,e);for(const[a,u]of Object.entries(t))if(u!=null)if(a=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.values(Un).includes(u.toUpperCase())?u.toUpperCase():Un.TYPE_UNSPECIFIED}else if(n.includes(a))e[a]=hr(u);else if(i.includes(a)){const d=[];for(const f of u){if(f.type=="null"){e.nullable=!0;continue}d.push(hr(f))}e[a]=d}else if(r.includes(a)){const d={};for(const[f,m]of Object.entries(u))d[f]=hr(m);e[a]=d}else{if(a==="additionalProperties")continue;e[a]=u}return e}function pf(t){return hr(t)}function mf(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function gf(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function br(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=hr(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=hr(e.response));return t}function Mr(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function DI(t,e,n,i=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function Tn(t,e){if(typeof e!="string")throw new Error("name must be a string");return DI(t,e,"cachedContents")}function V0(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function ti(t){return cf(t)}function OI(t){return t!=null&&typeof t=="object"&&"name"in t}function UI(t){return t!=null&&typeof t=="object"&&"video"in t}function FI(t){return t!=null&&typeof t=="object"&&"uri"in t}function q0(t){var e;let n;if(OI(t)&&(n=t.name),!(FI(t)&&(n=t.uri,n===void 0))&&!(UI(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function H0(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function G0(t){for(const e of["models","tunedModels","publisherModels"])if(BI(t,e))return t[e];return[]}function BI(t,e){return t!==null&&typeof t=="object"&&e in t}function zI(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function VI(t,e={}){const n=[],i=new Set;for(const r of t){const s=r.name;if(i.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);i.add(s);const a=zI(r,e);a.functionDeclarations&&n.push(...a.functionDeclarations)}return{functionDeclarations:n}}function $0(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function qI(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function W0(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let s=!1;for(const a of r){if(typeof a!="object"||a===null)continue;const d=a.response;if(typeof d!="object"||d===null)continue;if(d.embedding!==void 0){s=!0;break}}return s&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Lr(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function J0(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function HI(t){const e={},n=c(t,["responsesFile"]);n!=null&&h(e,["fileName"],n);const i=c(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>Sk(a))),h(e,["inlinedResponses"],s)}const r=c(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),h(e,["inlinedEmbedContentResponses"],s)}return e}function GI(t){const e={},n=c(t,["predictionsFormat"]);n!=null&&h(e,["format"],n);const i=c(t,["gcsDestination","outputUriPrefix"]);i!=null&&h(e,["gcsUri"],i);const r=c(t,["bigqueryDestination","outputUri"]);return r!=null&&h(e,["bigqueryUri"],r),e}function $I(t){const e={},n=c(t,["format"]);n!=null&&h(e,["predictionsFormat"],n);const i=c(t,["gcsUri"]);i!=null&&h(e,["gcsDestination","outputUriPrefix"],i);const r=c(t,["bigqueryUri"]);if(r!=null&&h(e,["bigqueryDestination","outputUri"],r),c(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(c(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function aa(t){const e={},n=c(t,["name"]);n!=null&&h(e,["name"],n);const i=c(t,["metadata","displayName"]);i!=null&&h(e,["displayName"],i);const r=c(t,["metadata","state"]);r!=null&&h(e,["state"],J0(r));const s=c(t,["metadata","createTime"]);s!=null&&h(e,["createTime"],s);const a=c(t,["metadata","endTime"]);a!=null&&h(e,["endTime"],a);const u=c(t,["metadata","updateTime"]);u!=null&&h(e,["updateTime"],u);const d=c(t,["metadata","model"]);d!=null&&h(e,["model"],d);const f=c(t,["metadata","output"]);return f!=null&&h(e,["dest"],HI(W0(f))),e}function $c(t){const e={},n=c(t,["name"]);n!=null&&h(e,["name"],n);const i=c(t,["displayName"]);i!=null&&h(e,["displayName"],i);const r=c(t,["state"]);r!=null&&h(e,["state"],J0(r));const s=c(t,["error"]);s!=null&&h(e,["error"],s);const a=c(t,["createTime"]);a!=null&&h(e,["createTime"],a);const u=c(t,["startTime"]);u!=null&&h(e,["startTime"],u);const d=c(t,["endTime"]);d!=null&&h(e,["endTime"],d);const f=c(t,["updateTime"]);f!=null&&h(e,["updateTime"],f);const m=c(t,["model"]);m!=null&&h(e,["model"],m);const _=c(t,["inputConfig"]);_!=null&&h(e,["src"],WI(_));const v=c(t,["outputConfig"]);v!=null&&h(e,["dest"],GI(W0(v)));const w=c(t,["completionStats"]);return w!=null&&h(e,["completionStats"],w),e}function WI(t){const e={},n=c(t,["instancesFormat"]);n!=null&&h(e,["format"],n);const i=c(t,["gcsSource","uris"]);i!=null&&h(e,["gcsUri"],i);const r=c(t,["bigquerySource","inputUri"]);return r!=null&&h(e,["bigqueryUri"],r),e}function JI(t,e){const n={};if(c(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(c(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=c(e,["fileName"]);i!=null&&h(n,["fileName"],i);const r=c(e,["inlinedRequests"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>Tk(t,a))),h(n,["requests","requests"],s)}return n}function KI(t){const e={},n=c(t,["format"]);n!=null&&h(e,["instancesFormat"],n);const i=c(t,["gcsUri"]);i!=null&&h(e,["gcsSource","uris"],i);const r=c(t,["bigqueryUri"]);if(r!=null&&h(e,["bigquerySource","inputUri"],r),c(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function ZI(t){const e={},n=c(t,["data"]);if(n!=null&&h(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(t,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function YI(t,e){const n={},i=c(e,["name"]);return i!=null&&h(n,["_url","name"],Lr(t,i)),n}function jI(t,e){const n={},i=c(e,["name"]);return i!=null&&h(n,["_url","name"],Lr(t,i)),n}function QI(t){const e={},n=c(t,["content"]);n!=null&&h(e,["content"],n);const i=c(t,["citationMetadata"]);i!=null&&h(e,["citationMetadata"],XI(i));const r=c(t,["tokenCount"]);r!=null&&h(e,["tokenCount"],r);const s=c(t,["finishReason"]);s!=null&&h(e,["finishReason"],s);const a=c(t,["avgLogprobs"]);a!=null&&h(e,["avgLogprobs"],a);const u=c(t,["groundingMetadata"]);u!=null&&h(e,["groundingMetadata"],u);const d=c(t,["index"]);d!=null&&h(e,["index"],d);const f=c(t,["logprobsResult"]);f!=null&&h(e,["logprobsResult"],f);const m=c(t,["safetyRatings"]);if(m!=null){let v=m;Array.isArray(v)&&(v=v.map(w=>w)),h(e,["safetyRatings"],v)}const _=c(t,["urlContextMetadata"]);return _!=null&&h(e,["urlContextMetadata"],_),e}function XI(t){const e={},n=c(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),h(e,["citations"],i)}return e}function K0(t){const e={},n=c(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Rk(s))),h(e,["parts"],r)}const i=c(t,["role"]);return i!=null&&h(e,["role"],i),e}function ek(t,e){const n={},i=c(t,["displayName"]);if(e!==void 0&&i!=null&&h(e,["batch","displayName"],i),c(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function tk(t,e){const n={},i=c(t,["displayName"]);e!==void 0&&i!=null&&h(e,["displayName"],i);const r=c(t,["dest"]);return e!==void 0&&r!=null&&h(e,["outputConfig"],$I(qI(r))),n}function Mg(t,e){const n={},i=c(e,["model"]);i!=null&&h(n,["_url","model"],pe(t,i));const r=c(e,["src"]);r!=null&&h(n,["batch","inputConfig"],JI(t,$0(t,r)));const s=c(e,["config"]);return s!=null&&ek(s,n),n}function nk(t,e){const n={},i=c(e,["model"]);i!=null&&h(n,["model"],pe(t,i));const r=c(e,["src"]);r!=null&&h(n,["inputConfig"],KI($0(t,r)));const s=c(e,["config"]);return s!=null&&tk(s,n),n}function ik(t,e){const n={},i=c(t,["displayName"]);return e!==void 0&&i!=null&&h(e,["batch","displayName"],i),n}function rk(t,e){const n={},i=c(e,["model"]);i!=null&&h(n,["_url","model"],pe(t,i));const r=c(e,["src"]);r!=null&&h(n,["batch","inputConfig"],dk(t,r));const s=c(e,["config"]);return s!=null&&ik(s,n),n}function ok(t,e){const n={},i=c(e,["name"]);return i!=null&&h(n,["_url","name"],Lr(t,i)),n}function sk(t,e){const n={},i=c(e,["name"]);return i!=null&&h(n,["_url","name"],Lr(t,i)),n}function ak(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const i=c(t,["name"]);i!=null&&h(e,["name"],i);const r=c(t,["done"]);r!=null&&h(e,["done"],r);const s=c(t,["error"]);return s!=null&&h(e,["error"],s),e}function lk(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const i=c(t,["name"]);i!=null&&h(e,["name"],i);const r=c(t,["done"]);r!=null&&h(e,["done"],r);const s=c(t,["error"]);return s!=null&&h(e,["error"],s),e}function uk(t,e){const n={},i=c(e,["contents"]);if(i!=null){let s=hf(t,i);Array.isArray(s)&&(s=s.map(a=>a)),h(n,["requests[]","request","content"],s)}const r=c(e,["config"]);return r!=null&&(h(n,["_self"],ck(r,n)),sI(n,{"requests[].*":"requests[].request.*"})),n}function ck(t,e){const n={},i=c(t,["taskType"]);e!==void 0&&i!=null&&h(e,["requests[]","taskType"],i);const r=c(t,["title"]);e!==void 0&&r!=null&&h(e,["requests[]","title"],r);const s=c(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&h(e,["requests[]","outputDimensionality"],s),c(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function dk(t,e){const n={},i=c(e,["fileName"]);i!=null&&h(n,["file_name"],i);const r=c(e,["inlinedRequests"]);return r!=null&&h(n,["requests"],uk(t,r)),n}function fk(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const i=c(t,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function hk(t){const e={},n=c(t,["id"]);n!=null&&h(e,["id"],n);const i=c(t,["args"]);i!=null&&h(e,["args"],i);const r=c(t,["name"]);if(r!=null&&h(e,["name"],r),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function pk(t){const e={},n=c(t,["mode"]);n!=null&&h(e,["mode"],n);const i=c(t,["allowedFunctionNames"]);if(i!=null&&h(e,["allowedFunctionNames"],i),c(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function mk(t,e,n){const i={},r=c(e,["systemInstruction"]);n!==void 0&&r!=null&&h(n,["systemInstruction"],K0(tt(r)));const s=c(e,["temperature"]);s!=null&&h(i,["temperature"],s);const a=c(e,["topP"]);a!=null&&h(i,["topP"],a);const u=c(e,["topK"]);u!=null&&h(i,["topK"],u);const d=c(e,["candidateCount"]);d!=null&&h(i,["candidateCount"],d);const f=c(e,["maxOutputTokens"]);f!=null&&h(i,["maxOutputTokens"],f);const m=c(e,["stopSequences"]);m!=null&&h(i,["stopSequences"],m);const _=c(e,["responseLogprobs"]);_!=null&&h(i,["responseLogprobs"],_);const v=c(e,["logprobs"]);v!=null&&h(i,["logprobs"],v);const w=c(e,["presencePenalty"]);w!=null&&h(i,["presencePenalty"],w);const x=c(e,["frequencyPenalty"]);x!=null&&h(i,["frequencyPenalty"],x);const P=c(e,["seed"]);P!=null&&h(i,["seed"],P);const I=c(e,["responseMimeType"]);I!=null&&h(i,["responseMimeType"],I);const C=c(e,["responseSchema"]);C!=null&&h(i,["responseSchema"],pf(C));const T=c(e,["responseJsonSchema"]);if(T!=null&&h(i,["responseJsonSchema"],T),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const S=c(e,["safetySettings"]);if(n!==void 0&&S!=null){let te=S;Array.isArray(te)&&(te=te.map(Re=>Nk(Re))),h(n,["safetySettings"],te)}const N=c(e,["tools"]);if(n!==void 0&&N!=null){let te=Mr(N);Array.isArray(te)&&(te=te.map(Re=>Mk(br(Re)))),h(n,["tools"],te)}const R=c(e,["toolConfig"]);if(n!==void 0&&R!=null&&h(n,["toolConfig"],bk(R)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const M=c(e,["cachedContent"]);n!==void 0&&M!=null&&h(n,["cachedContent"],Tn(t,M));const O=c(e,["responseModalities"]);O!=null&&h(i,["responseModalities"],O);const z=c(e,["mediaResolution"]);z!=null&&h(i,["mediaResolution"],z);const q=c(e,["speechConfig"]);if(q!=null&&h(i,["speechConfig"],mf(q)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const G=c(e,["thinkingConfig"]);G!=null&&h(i,["thinkingConfig"],G);const j=c(e,["imageConfig"]);return j!=null&&h(i,["imageConfig"],Ek(j)),i}function gk(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const i=c(t,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(f=>QI(f))),h(e,["candidates"],d)}const r=c(t,["modelVersion"]);r!=null&&h(e,["modelVersion"],r);const s=c(t,["promptFeedback"]);s!=null&&h(e,["promptFeedback"],s);const a=c(t,["responseId"]);a!=null&&h(e,["responseId"],a);const u=c(t,["usageMetadata"]);return u!=null&&h(e,["usageMetadata"],u),e}function _k(t,e){const n={},i=c(e,["name"]);return i!=null&&h(n,["_url","name"],Lr(t,i)),n}function vk(t,e){const n={},i=c(e,["name"]);return i!=null&&h(n,["_url","name"],Lr(t,i)),n}function yk(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function wk(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function Ek(t){const e={},n=c(t,["aspectRatio"]);n!=null&&h(e,["aspectRatio"],n);const i=c(t,["imageSize"]);if(i!=null&&h(e,["imageSize"],i),c(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Tk(t,e){const n={},i=c(e,["model"]);i!=null&&h(n,["request","model"],pe(t,i));const r=c(e,["contents"]);if(r!=null){let u=bt(r);Array.isArray(u)&&(u=u.map(d=>K0(d))),h(n,["request","contents"],u)}const s=c(e,["metadata"]);s!=null&&h(n,["metadata"],s);const a=c(e,["config"]);return a!=null&&h(n,["request","generationConfig"],mk(t,a,c(n,["request"],{}))),n}function Sk(t){const e={},n=c(t,["response"]);n!=null&&h(e,["response"],gk(n));const i=c(t,["error"]);return i!=null&&h(e,["error"],i),e}function Ck(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const r=c(t,["pageToken"]);if(e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),c(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function xk(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const r=c(t,["pageToken"]);e!==void 0&&r!=null&&h(e,["_query","pageToken"],r);const s=c(t,["filter"]);return e!==void 0&&s!=null&&h(e,["_query","filter"],s),n}function Pk(t){const e={},n=c(t,["config"]);return n!=null&&Ck(n,e),e}function Ak(t){const e={},n=c(t,["config"]);return n!=null&&xk(n,e),e}function Ik(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const r=c(t,["operations"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>aa(a))),h(e,["batchJobs"],s)}return e}function kk(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const r=c(t,["batchPredictionJobs"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>$c(a))),h(e,["batchJobs"],s)}return e}function Rk(t){const e={},n=c(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const i=c(t,["codeExecutionResult"]);i!=null&&h(e,["codeExecutionResult"],i);const r=c(t,["executableCode"]);r!=null&&h(e,["executableCode"],r);const s=c(t,["fileData"]);s!=null&&h(e,["fileData"],fk(s));const a=c(t,["functionCall"]);a!=null&&h(e,["functionCall"],hk(a));const u=c(t,["functionResponse"]);u!=null&&h(e,["functionResponse"],u);const d=c(t,["inlineData"]);d!=null&&h(e,["inlineData"],ZI(d));const f=c(t,["text"]);f!=null&&h(e,["text"],f);const m=c(t,["thought"]);m!=null&&h(e,["thought"],m);const _=c(t,["thoughtSignature"]);_!=null&&h(e,["thoughtSignature"],_);const v=c(t,["videoMetadata"]);return v!=null&&h(e,["videoMetadata"],v),e}function Nk(t){const e={},n=c(t,["category"]);if(n!=null&&h(e,["category"],n),c(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=c(t,["threshold"]);return i!=null&&h(e,["threshold"],i),e}function bk(t){const e={},n=c(t,["functionCallingConfig"]);n!=null&&h(e,["functionCallingConfig"],pk(n));const i=c(t,["retrievalConfig"]);return i!=null&&h(e,["retrievalConfig"],i),e}function Mk(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(_=>_)),h(e,["functionDeclarations"],m)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(t,["googleSearchRetrieval"]);i!=null&&h(e,["googleSearchRetrieval"],i);const r=c(t,["computerUse"]);r!=null&&h(e,["computerUse"],r);const s=c(t,["fileSearch"]);s!=null&&h(e,["fileSearch"],s);const a=c(t,["codeExecution"]);if(a!=null&&h(e,["codeExecution"],a),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=c(t,["googleMaps"]);u!=null&&h(e,["googleMaps"],yk(u));const d=c(t,["googleSearch"]);d!=null&&h(e,["googleSearch"],wk(d));const f=c(t,["urlContext"]);return f!=null&&h(e,["urlContext"],f),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var yn;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(yn||(yn={}));class Ii{constructor(e,n,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,r)}init(e,n,i){var r,s;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let a={config:{}};!i||Object.keys(i).length===0?a={config:{}}:typeof i=="object"?a=Object.assign({},i):a=i,a.config&&(a.config.pageToken=n.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(s=(r=a.config)===null||r===void 0?void 0:r.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Lk extends En{constructor(e){super(),this.apiClient=e,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new Ii(yn.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=Mg(this.apiClient,e),i=n._url,r=$("{model}:batchGenerateContent",i),u=n.batch.inputConfig.requests,d=u.requests,f=[];for(const m of d){const _=Object.assign({},m);if(_.systemInstruction){const v=_.systemInstruction;delete _.systemInstruction;const w=_.request;w.systemInstruction=v,_.request=w}f.push(_)}return u.requests=f,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const i=n?Object.assign({},n):{},r=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${r}`),i.dest===void 0){const s=this.getGcsUri(e),a=this.getBigqueryUri(e);if(s)s.endsWith(".jsonl")?i.dest=`${s.slice(0,-6)}/dest`:i.dest=`${s}_dest_${r}`;else if(a)i.dest=`${a}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,r,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=nk(this.apiClient,e);return u=$("batchPredictionJobs",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),a.then(m=>$c(m))}else{const f=Mg(this.apiClient,e);return u=$("{model}:batchGenerateContent",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>aa(m))}}async createEmbeddingsInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=rk(this.apiClient,e);return s=$("{model}:asyncBatchEmbedContent",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>aa(d))}}async get(e){var n,i,r,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=vk(this.apiClient,e);return u=$("batchPredictionJobs/{name}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),a.then(m=>$c(m))}else{const f=_k(this.apiClient,e);return u=$("batches/{name}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>aa(m))}}async cancel(e){var n,i,r,s;let a="",u={};if(this.apiClient.isVertexAI()){const d=jI(this.apiClient,e);a=$("batchPredictionJobs/{name}:cancel",d._url),u=d._query,delete d._url,delete d._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const d=YI(this.apiClient,e);a=$("batches/{name}:cancel",d._url),u=d._query,delete d._url,delete d._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,i,r,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=Ak(e);return u=$("batchPredictionJobs",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(_=>{const v=_;return v.sdkHttpResponse={headers:m.headers},v})),a.then(m=>{const _=kk(m),v=new kg;return Object.assign(v,_),v})}else{const f=Pk(e);return u=$("batches",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(_=>{const v=_;return v.sdkHttpResponse={headers:m.headers},v})),a.then(m=>{const _=Ik(m),v=new kg;return Object.assign(v,_),v})}}async delete(e){var n,i,r,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=sk(this.apiClient,e);return u=$("batchPredictionJobs/{name}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(_=>{const v=_;return v.sdkHttpResponse={headers:m.headers},v})),a.then(m=>lk(m))}else{const f=ok(this.apiClient,e);return u=$("batches/{name}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(_=>{const v=_;return v.sdkHttpResponse={headers:m.headers},v})),a.then(m=>ak(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Dk(t){const e={},n=c(t,["data"]);if(n!=null&&h(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(t,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function Lg(t){const e={},n=c(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>rR(s))),h(e,["parts"],r)}const i=c(t,["role"]);return i!=null&&h(e,["role"],i),e}function Ok(t,e){const n={},i=c(t,["ttl"]);e!==void 0&&i!=null&&h(e,["ttl"],i);const r=c(t,["expireTime"]);e!==void 0&&r!=null&&h(e,["expireTime"],r);const s=c(t,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const a=c(t,["contents"]);if(e!==void 0&&a!=null){let m=bt(a);Array.isArray(m)&&(m=m.map(_=>Lg(_))),h(e,["contents"],m)}const u=c(t,["systemInstruction"]);e!==void 0&&u!=null&&h(e,["systemInstruction"],Lg(tt(u)));const d=c(t,["tools"]);if(e!==void 0&&d!=null){let m=d;Array.isArray(m)&&(m=m.map(_=>sR(_))),h(e,["tools"],m)}const f=c(t,["toolConfig"]);if(e!==void 0&&f!=null&&h(e,["toolConfig"],oR(f)),c(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function Uk(t,e){const n={},i=c(t,["ttl"]);e!==void 0&&i!=null&&h(e,["ttl"],i);const r=c(t,["expireTime"]);e!==void 0&&r!=null&&h(e,["expireTime"],r);const s=c(t,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const a=c(t,["contents"]);if(e!==void 0&&a!=null){let _=bt(a);Array.isArray(_)&&(_=_.map(v=>v)),h(e,["contents"],_)}const u=c(t,["systemInstruction"]);e!==void 0&&u!=null&&h(e,["systemInstruction"],tt(u));const d=c(t,["tools"]);if(e!==void 0&&d!=null){let _=d;Array.isArray(_)&&(_=_.map(v=>aR(v))),h(e,["tools"],_)}const f=c(t,["toolConfig"]);e!==void 0&&f!=null&&h(e,["toolConfig"],f);const m=c(t,["kmsKeyName"]);return e!==void 0&&m!=null&&h(e,["encryption_spec","kmsKeyName"],m),n}function Fk(t,e){const n={},i=c(e,["model"]);i!=null&&h(n,["model"],O0(t,i));const r=c(e,["config"]);return r!=null&&Ok(r,n),n}function Bk(t,e){const n={},i=c(e,["model"]);i!=null&&h(n,["model"],O0(t,i));const r=c(e,["config"]);return r!=null&&Uk(r,n),n}function zk(t,e){const n={},i=c(e,["name"]);return i!=null&&h(n,["_url","name"],Tn(t,i)),n}function Vk(t,e){const n={},i=c(e,["name"]);return i!=null&&h(n,["_url","name"],Tn(t,i)),n}function qk(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function Hk(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function Gk(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const i=c(t,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function $k(t){const e={},n=c(t,["id"]);n!=null&&h(e,["id"],n);const i=c(t,["args"]);i!=null&&h(e,["args"],i);const r=c(t,["name"]);if(r!=null&&h(e,["name"],r),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Wk(t){const e={},n=c(t,["mode"]);n!=null&&h(e,["mode"],n);const i=c(t,["allowedFunctionNames"]);if(i!=null&&h(e,["allowedFunctionNames"],i),c(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Jk(t){const e={};if(c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=c(t,["description"]);n!=null&&h(e,["description"],n);const i=c(t,["name"]);i!=null&&h(e,["name"],i);const r=c(t,["parameters"]);r!=null&&h(e,["parameters"],r);const s=c(t,["parametersJsonSchema"]);s!=null&&h(e,["parametersJsonSchema"],s);const a=c(t,["response"]);a!=null&&h(e,["response"],a);const u=c(t,["responseJsonSchema"]);return u!=null&&h(e,["responseJsonSchema"],u),e}function Kk(t,e){const n={},i=c(e,["name"]);return i!=null&&h(n,["_url","name"],Tn(t,i)),n}function Zk(t,e){const n={},i=c(e,["name"]);return i!=null&&h(n,["_url","name"],Tn(t,i)),n}function Yk(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function jk(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function Qk(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const r=c(t,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),n}function Xk(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const r=c(t,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),n}function eR(t){const e={},n=c(t,["config"]);return n!=null&&Qk(n,e),e}function tR(t){const e={},n=c(t,["config"]);return n!=null&&Xk(n,e),e}function nR(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const r=c(t,["cachedContents"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),h(e,["cachedContents"],s)}return e}function iR(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const r=c(t,["cachedContents"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),h(e,["cachedContents"],s)}return e}function rR(t){const e={},n=c(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const i=c(t,["codeExecutionResult"]);i!=null&&h(e,["codeExecutionResult"],i);const r=c(t,["executableCode"]);r!=null&&h(e,["executableCode"],r);const s=c(t,["fileData"]);s!=null&&h(e,["fileData"],Gk(s));const a=c(t,["functionCall"]);a!=null&&h(e,["functionCall"],$k(a));const u=c(t,["functionResponse"]);u!=null&&h(e,["functionResponse"],u);const d=c(t,["inlineData"]);d!=null&&h(e,["inlineData"],Dk(d));const f=c(t,["text"]);f!=null&&h(e,["text"],f);const m=c(t,["thought"]);m!=null&&h(e,["thought"],m);const _=c(t,["thoughtSignature"]);_!=null&&h(e,["thoughtSignature"],_);const v=c(t,["videoMetadata"]);return v!=null&&h(e,["videoMetadata"],v),e}function oR(t){const e={},n=c(t,["functionCallingConfig"]);n!=null&&h(e,["functionCallingConfig"],Wk(n));const i=c(t,["retrievalConfig"]);return i!=null&&h(e,["retrievalConfig"],i),e}function sR(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(_=>_)),h(e,["functionDeclarations"],m)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(t,["googleSearchRetrieval"]);i!=null&&h(e,["googleSearchRetrieval"],i);const r=c(t,["computerUse"]);r!=null&&h(e,["computerUse"],r);const s=c(t,["fileSearch"]);s!=null&&h(e,["fileSearch"],s);const a=c(t,["codeExecution"]);if(a!=null&&h(e,["codeExecution"],a),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=c(t,["googleMaps"]);u!=null&&h(e,["googleMaps"],Yk(u));const d=c(t,["googleSearch"]);d!=null&&h(e,["googleSearch"],jk(d));const f=c(t,["urlContext"]);return f!=null&&h(e,["urlContext"],f),e}function aR(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let _=n;Array.isArray(_)&&(_=_.map(v=>Jk(v))),h(e,["functionDeclarations"],_)}const i=c(t,["retrieval"]);i!=null&&h(e,["retrieval"],i);const r=c(t,["googleSearchRetrieval"]);r!=null&&h(e,["googleSearchRetrieval"],r);const s=c(t,["computerUse"]);if(s!=null&&h(e,["computerUse"],s),c(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=c(t,["codeExecution"]);a!=null&&h(e,["codeExecution"],a);const u=c(t,["enterpriseWebSearch"]);u!=null&&h(e,["enterpriseWebSearch"],u);const d=c(t,["googleMaps"]);d!=null&&h(e,["googleMaps"],d);const f=c(t,["googleSearch"]);f!=null&&h(e,["googleSearch"],f);const m=c(t,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}function lR(t,e){const n={},i=c(t,["ttl"]);e!==void 0&&i!=null&&h(e,["ttl"],i);const r=c(t,["expireTime"]);return e!==void 0&&r!=null&&h(e,["expireTime"],r),n}function uR(t,e){const n={},i=c(t,["ttl"]);e!==void 0&&i!=null&&h(e,["ttl"],i);const r=c(t,["expireTime"]);return e!==void 0&&r!=null&&h(e,["expireTime"],r),n}function cR(t,e){const n={},i=c(e,["name"]);i!=null&&h(n,["_url","name"],Tn(t,i));const r=c(e,["config"]);return r!=null&&lR(r,n),n}function dR(t,e){const n={},i=c(e,["name"]);i!=null&&h(n,["_url","name"],Tn(t,i));const r=c(e,["config"]);return r!=null&&uR(r,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fR extends En{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ii(yn.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,r,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=Bk(this.apiClient,e);return u=$("cachedContents",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),a.then(m=>m)}else{const f=Fk(this.apiClient,e);return u=$("cachedContents",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>m)}}async get(e){var n,i,r,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=Zk(this.apiClient,e);return u=$("{name}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),a.then(m=>m)}else{const f=Kk(this.apiClient,e);return u=$("{name}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>m)}}async delete(e){var n,i,r,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=Vk(this.apiClient,e);return u=$("{name}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(_=>{const v=_;return v.sdkHttpResponse={headers:m.headers},v})),a.then(m=>{const _=Hk(m),v=new Ag;return Object.assign(v,_),v})}else{const f=zk(this.apiClient,e);return u=$("{name}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(_=>{const v=_;return v.sdkHttpResponse={headers:m.headers},v})),a.then(m=>{const _=qk(m),v=new Ag;return Object.assign(v,_),v})}}async update(e){var n,i,r,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=dR(this.apiClient,e);return u=$("{name}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),a.then(m=>m)}else{const f=cR(this.apiClient,e);return u=$("{name}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>m)}}async listInternal(e){var n,i,r,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=tR(e);return u=$("cachedContents",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(_=>{const v=_;return v.sdkHttpResponse={headers:m.headers},v})),a.then(m=>{const _=iR(m),v=new Ig;return Object.assign(v,_),v})}else{const f=eR(e);return u=$("cachedContents",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(_=>{const v=_;return v.sdkHttpResponse={headers:m.headers},v})),a.then(m=>{const _=nR(m),v=new Ig;return Object.assign(v,_),v})}}}function Dg(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ee(t){return this instanceof Ee?(this.v=t,this):new Ee(t)}function pr(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,s=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",a),r[Symbol.asyncIterator]=function(){return this},r;function a(w){return function(x){return Promise.resolve(x).then(w,_)}}function u(w,x){i[w]&&(r[w]=function(P){return new Promise(function(I,C){s.push([w,P,I,C])>1||d(w,P)})},x&&(r[w]=x(r[w])))}function d(w,x){try{f(i[w](x))}catch(P){v(s[0][3],P)}}function f(w){w.value instanceof Ee?Promise.resolve(w.value.v).then(m,_):v(s[0][2],w)}function m(w){d("next",w)}function _(w){d("throw",w)}function v(w,x){w(x),s.shift(),s.length&&d(s[0][0],s[0][1])}}function So(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Dg=="function"?Dg(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(s){n[s]=t[s]&&function(a){return new Promise(function(u,d){a=t[s](a),r(u,d,a.done,a.value)})}}function r(s,a,u,d){Promise.resolve(d).then(function(f){s({value:f,done:u})},a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hR(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:Z0(n)}function Z0(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function pR(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Og(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const r=[];let s=!0;for(;i<n&&t[i].role==="model";)r.push(t[i]),s&&!Z0(t[i])&&(s=!1),i++;s?e.push(...r):e.pop()}return e}class mR{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new gR(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class gR{constructor(e,n,i,r={},s=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=r,this.history=s,this.sendPromise=Promise.resolve(),pR(s)}async sendMessage(e){var n;await this.sendPromise;const i=tt(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var s,a,u;const d=await r,f=(a=(s=d.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content,m=d.automaticFunctionCallingHistory,_=this.getHistory(!0).length;let v=[];m!=null&&(v=(u=m.slice(_))!==null&&u!==void 0?u:[]);const w=f?[f]:[];this.recordHistory(i,w,v)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const i=tt(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const s=await r;return this.processStreamResponse(s,i)}getHistory(e=!1){const n=e?Og(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var i,r;return pr(this,arguments,function*(){var a,u,d,f;const m=[];try{for(var _=!0,v=So(e),w;w=yield Ee(v.next()),a=w.done,!a;_=!0){f=w.value,_=!1;const x=f;if(hR(x)){const P=(r=(i=x.candidates)===null||i===void 0?void 0:i[0])===null||r===void 0?void 0:r.content;P!==void 0&&m.push(P)}yield yield Ee(x)}}catch(x){u={error:x}}finally{try{!_&&!a&&(d=v.return)&&(yield Ee(d.call(v)))}finally{if(u)throw u.error}}this.recordHistory(n,m)})}recordHistory(e,n,i){let r=[];n.length>0&&n.every(s=>s.role!==void 0)?r=n:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...Og(i)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cl extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,cl.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _R(t){const e={},n=c(t,["file"]);return n!=null&&h(e,["file"],n),e}function vR(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function yR(t){const e={},n=c(t,["name"]);return n!=null&&h(e,["_url","file"],q0(n)),e}function wR(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function ER(t){const e={},n=c(t,["name"]);return n!=null&&h(e,["_url","file"],q0(n)),e}function TR(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const r=c(t,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),n}function SR(t){const e={},n=c(t,["config"]);return n!=null&&TR(n,e),e}function CR(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const r=c(t,["files"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),h(e,["files"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xR extends En{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ii(yn.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=SR(e);return s=$("files",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{const f=CR(d),m=new kI;return Object.assign(m,f),m})}}async createInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=_R(e);return s=$("upload/v1beta/files",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const f=vR(d),m=new RI;return Object.assign(m,f),m})}}async get(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=ER(e);return s=$("files/{file}",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async delete(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=yR(e);return s=$("files/{file}",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{const f=wR(d),m=new NI;return Object.assign(m,f),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function la(t){const e={},n=c(t,["data"]);if(n!=null&&h(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(t,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function PR(t){const e={},n=c(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>qR(s))),h(e,["parts"],r)}const i=c(t,["role"]);return i!=null&&h(e,["role"],i),e}function AR(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const i=c(t,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function IR(t){const e={},n=c(t,["id"]);n!=null&&h(e,["id"],n);const i=c(t,["args"]);i!=null&&h(e,["args"],i);const r=c(t,["name"]);if(r!=null&&h(e,["name"],r),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function kR(t){const e={};if(c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=c(t,["description"]);n!=null&&h(e,["description"],n);const i=c(t,["name"]);i!=null&&h(e,["name"],i);const r=c(t,["parameters"]);r!=null&&h(e,["parameters"],r);const s=c(t,["parametersJsonSchema"]);s!=null&&h(e,["parametersJsonSchema"],s);const a=c(t,["response"]);a!=null&&h(e,["response"],a);const u=c(t,["responseJsonSchema"]);return u!=null&&h(e,["responseJsonSchema"],u),e}function RR(t){const e={},n=c(t,["modelSelectionConfig"]);n!=null&&h(e,["modelConfig"],n);const i=c(t,["responseJsonSchema"]);i!=null&&h(e,["responseJsonSchema"],i);const r=c(t,["audioTimestamp"]);r!=null&&h(e,["audioTimestamp"],r);const s=c(t,["candidateCount"]);s!=null&&h(e,["candidateCount"],s);const a=c(t,["enableAffectiveDialog"]);a!=null&&h(e,["enableAffectiveDialog"],a);const u=c(t,["frequencyPenalty"]);u!=null&&h(e,["frequencyPenalty"],u);const d=c(t,["logprobs"]);d!=null&&h(e,["logprobs"],d);const f=c(t,["maxOutputTokens"]);f!=null&&h(e,["maxOutputTokens"],f);const m=c(t,["mediaResolution"]);m!=null&&h(e,["mediaResolution"],m);const _=c(t,["presencePenalty"]);_!=null&&h(e,["presencePenalty"],_);const v=c(t,["responseLogprobs"]);v!=null&&h(e,["responseLogprobs"],v);const w=c(t,["responseMimeType"]);w!=null&&h(e,["responseMimeType"],w);const x=c(t,["responseModalities"]);x!=null&&h(e,["responseModalities"],x);const P=c(t,["responseSchema"]);P!=null&&h(e,["responseSchema"],P);const I=c(t,["routingConfig"]);I!=null&&h(e,["routingConfig"],I);const C=c(t,["seed"]);C!=null&&h(e,["seed"],C);const T=c(t,["speechConfig"]);T!=null&&h(e,["speechConfig"],Y0(T));const S=c(t,["stopSequences"]);S!=null&&h(e,["stopSequences"],S);const N=c(t,["temperature"]);N!=null&&h(e,["temperature"],N);const R=c(t,["thinkingConfig"]);R!=null&&h(e,["thinkingConfig"],R);const M=c(t,["topK"]);M!=null&&h(e,["topK"],M);const O=c(t,["topP"]);if(O!=null&&h(e,["topP"],O),c(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function NR(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function bR(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function MR(t,e){const n={},i=c(t,["generationConfig"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig"],i);const r=c(t,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const s=c(t,["temperature"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig","temperature"],s);const a=c(t,["topP"]);e!==void 0&&a!=null&&h(e,["setup","generationConfig","topP"],a);const u=c(t,["topK"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","topK"],u);const d=c(t,["maxOutputTokens"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","maxOutputTokens"],d);const f=c(t,["mediaResolution"]);e!==void 0&&f!=null&&h(e,["setup","generationConfig","mediaResolution"],f);const m=c(t,["seed"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","seed"],m);const _=c(t,["speechConfig"]);e!==void 0&&_!=null&&h(e,["setup","generationConfig","speechConfig"],gf(_));const v=c(t,["thinkingConfig"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","thinkingConfig"],v);const w=c(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],w);const x=c(t,["systemInstruction"]);e!==void 0&&x!=null&&h(e,["setup","systemInstruction"],PR(tt(x)));const P=c(t,["tools"]);if(e!==void 0&&P!=null){let M=Mr(P);Array.isArray(M)&&(M=M.map(O=>GR(br(O)))),h(e,["setup","tools"],M)}const I=c(t,["sessionResumption"]);e!==void 0&&I!=null&&h(e,["setup","sessionResumption"],HR(I));const C=c(t,["inputAudioTranscription"]);e!==void 0&&C!=null&&h(e,["setup","inputAudioTranscription"],C);const T=c(t,["outputAudioTranscription"]);e!==void 0&&T!=null&&h(e,["setup","outputAudioTranscription"],T);const S=c(t,["realtimeInputConfig"]);e!==void 0&&S!=null&&h(e,["setup","realtimeInputConfig"],S);const N=c(t,["contextWindowCompression"]);e!==void 0&&N!=null&&h(e,["setup","contextWindowCompression"],N);const R=c(t,["proactivity"]);return e!==void 0&&R!=null&&h(e,["setup","proactivity"],R),n}function LR(t,e){const n={},i=c(t,["generationConfig"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig"],RR(i));const r=c(t,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const s=c(t,["temperature"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig","temperature"],s);const a=c(t,["topP"]);e!==void 0&&a!=null&&h(e,["setup","generationConfig","topP"],a);const u=c(t,["topK"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","topK"],u);const d=c(t,["maxOutputTokens"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","maxOutputTokens"],d);const f=c(t,["mediaResolution"]);e!==void 0&&f!=null&&h(e,["setup","generationConfig","mediaResolution"],f);const m=c(t,["seed"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","seed"],m);const _=c(t,["speechConfig"]);e!==void 0&&_!=null&&h(e,["setup","generationConfig","speechConfig"],Y0(gf(_)));const v=c(t,["thinkingConfig"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","thinkingConfig"],v);const w=c(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],w);const x=c(t,["systemInstruction"]);e!==void 0&&x!=null&&h(e,["setup","systemInstruction"],tt(x));const P=c(t,["tools"]);if(e!==void 0&&P!=null){let M=Mr(P);Array.isArray(M)&&(M=M.map(O=>$R(br(O)))),h(e,["setup","tools"],M)}const I=c(t,["sessionResumption"]);e!==void 0&&I!=null&&h(e,["setup","sessionResumption"],I);const C=c(t,["inputAudioTranscription"]);e!==void 0&&C!=null&&h(e,["setup","inputAudioTranscription"],C);const T=c(t,["outputAudioTranscription"]);e!==void 0&&T!=null&&h(e,["setup","outputAudioTranscription"],T);const S=c(t,["realtimeInputConfig"]);e!==void 0&&S!=null&&h(e,["setup","realtimeInputConfig"],S);const N=c(t,["contextWindowCompression"]);e!==void 0&&N!=null&&h(e,["setup","contextWindowCompression"],N);const R=c(t,["proactivity"]);return e!==void 0&&R!=null&&h(e,["setup","proactivity"],R),n}function DR(t,e){const n={},i=c(e,["model"]);i!=null&&h(n,["setup","model"],pe(t,i));const r=c(e,["config"]);return r!=null&&h(n,["config"],MR(r,n)),n}function OR(t,e){const n={},i=c(e,["model"]);i!=null&&h(n,["setup","model"],pe(t,i));const r=c(e,["config"]);return r!=null&&h(n,["config"],LR(r,n)),n}function UR(t){const e={},n=c(t,["musicGenerationConfig"]);return n!=null&&h(e,["musicGenerationConfig"],n),e}function FR(t){const e={},n=c(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),h(e,["weightedPrompts"],i)}return e}function BR(t){const e={},n=c(t,["media"]);if(n!=null){let f=U0(n);Array.isArray(f)&&(f=f.map(m=>la(m))),h(e,["mediaChunks"],f)}const i=c(t,["audio"]);i!=null&&h(e,["audio"],la(B0(i)));const r=c(t,["audioStreamEnd"]);r!=null&&h(e,["audioStreamEnd"],r);const s=c(t,["video"]);s!=null&&h(e,["video"],la(F0(s)));const a=c(t,["text"]);a!=null&&h(e,["text"],a);const u=c(t,["activityStart"]);u!=null&&h(e,["activityStart"],u);const d=c(t,["activityEnd"]);return d!=null&&h(e,["activityEnd"],d),e}function zR(t){const e={},n=c(t,["media"]);if(n!=null){let f=U0(n);Array.isArray(f)&&(f=f.map(m=>m)),h(e,["mediaChunks"],f)}const i=c(t,["audio"]);i!=null&&h(e,["audio"],B0(i));const r=c(t,["audioStreamEnd"]);r!=null&&h(e,["audioStreamEnd"],r);const s=c(t,["video"]);s!=null&&h(e,["video"],F0(s));const a=c(t,["text"]);a!=null&&h(e,["text"],a);const u=c(t,["activityStart"]);u!=null&&h(e,["activityStart"],u);const d=c(t,["activityEnd"]);return d!=null&&h(e,["activityEnd"],d),e}function VR(t){const e={},n=c(t,["setupComplete"]);n!=null&&h(e,["setupComplete"],n);const i=c(t,["serverContent"]);i!=null&&h(e,["serverContent"],i);const r=c(t,["toolCall"]);r!=null&&h(e,["toolCall"],r);const s=c(t,["toolCallCancellation"]);s!=null&&h(e,["toolCallCancellation"],s);const a=c(t,["usageMetadata"]);a!=null&&h(e,["usageMetadata"],WR(a));const u=c(t,["goAway"]);u!=null&&h(e,["goAway"],u);const d=c(t,["sessionResumptionUpdate"]);return d!=null&&h(e,["sessionResumptionUpdate"],d),e}function qR(t){const e={},n=c(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const i=c(t,["codeExecutionResult"]);i!=null&&h(e,["codeExecutionResult"],i);const r=c(t,["executableCode"]);r!=null&&h(e,["executableCode"],r);const s=c(t,["fileData"]);s!=null&&h(e,["fileData"],AR(s));const a=c(t,["functionCall"]);a!=null&&h(e,["functionCall"],IR(a));const u=c(t,["functionResponse"]);u!=null&&h(e,["functionResponse"],u);const d=c(t,["inlineData"]);d!=null&&h(e,["inlineData"],la(d));const f=c(t,["text"]);f!=null&&h(e,["text"],f);const m=c(t,["thought"]);m!=null&&h(e,["thought"],m);const _=c(t,["thoughtSignature"]);_!=null&&h(e,["thoughtSignature"],_);const v=c(t,["videoMetadata"]);return v!=null&&h(e,["videoMetadata"],v),e}function HR(t){const e={},n=c(t,["handle"]);if(n!=null&&h(e,["handle"],n),c(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Y0(t){const e={},n=c(t,["languageCode"]);n!=null&&h(e,["languageCode"],n);const i=c(t,["voiceConfig"]);if(i!=null&&h(e,["voiceConfig"],i),c(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function GR(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(_=>_)),h(e,["functionDeclarations"],m)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(t,["googleSearchRetrieval"]);i!=null&&h(e,["googleSearchRetrieval"],i);const r=c(t,["computerUse"]);r!=null&&h(e,["computerUse"],r);const s=c(t,["fileSearch"]);s!=null&&h(e,["fileSearch"],s);const a=c(t,["codeExecution"]);if(a!=null&&h(e,["codeExecution"],a),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=c(t,["googleMaps"]);u!=null&&h(e,["googleMaps"],NR(u));const d=c(t,["googleSearch"]);d!=null&&h(e,["googleSearch"],bR(d));const f=c(t,["urlContext"]);return f!=null&&h(e,["urlContext"],f),e}function $R(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let _=n;Array.isArray(_)&&(_=_.map(v=>kR(v))),h(e,["functionDeclarations"],_)}const i=c(t,["retrieval"]);i!=null&&h(e,["retrieval"],i);const r=c(t,["googleSearchRetrieval"]);r!=null&&h(e,["googleSearchRetrieval"],r);const s=c(t,["computerUse"]);if(s!=null&&h(e,["computerUse"],s),c(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=c(t,["codeExecution"]);a!=null&&h(e,["codeExecution"],a);const u=c(t,["enterpriseWebSearch"]);u!=null&&h(e,["enterpriseWebSearch"],u);const d=c(t,["googleMaps"]);d!=null&&h(e,["googleMaps"],d);const f=c(t,["googleSearch"]);f!=null&&h(e,["googleSearch"],f);const m=c(t,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}function WR(t){const e={},n=c(t,["promptTokenCount"]);n!=null&&h(e,["promptTokenCount"],n);const i=c(t,["cachedContentTokenCount"]);i!=null&&h(e,["cachedContentTokenCount"],i);const r=c(t,["candidatesTokenCount"]);r!=null&&h(e,["responseTokenCount"],r);const s=c(t,["toolUsePromptTokenCount"]);s!=null&&h(e,["toolUsePromptTokenCount"],s);const a=c(t,["thoughtsTokenCount"]);a!=null&&h(e,["thoughtsTokenCount"],a);const u=c(t,["totalTokenCount"]);u!=null&&h(e,["totalTokenCount"],u);const d=c(t,["promptTokensDetails"]);if(d!=null){let w=d;Array.isArray(w)&&(w=w.map(x=>x)),h(e,["promptTokensDetails"],w)}const f=c(t,["cacheTokensDetails"]);if(f!=null){let w=f;Array.isArray(w)&&(w=w.map(x=>x)),h(e,["cacheTokensDetails"],w)}const m=c(t,["candidatesTokensDetails"]);if(m!=null){let w=m;Array.isArray(w)&&(w=w.map(x=>x)),h(e,["responseTokensDetails"],w)}const _=c(t,["toolUsePromptTokensDetails"]);if(_!=null){let w=_;Array.isArray(w)&&(w=w.map(x=>x)),h(e,["toolUsePromptTokensDetails"],w)}const v=c(t,["trafficType"]);return v!=null&&h(e,["trafficType"],v),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function JR(t){const e={},n=c(t,["data"]);if(n!=null&&h(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(t,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function KR(t){const e={},n=c(t,["content"]);n!=null&&h(e,["content"],n);const i=c(t,["citationMetadata"]);i!=null&&h(e,["citationMetadata"],ZR(i));const r=c(t,["tokenCount"]);r!=null&&h(e,["tokenCount"],r);const s=c(t,["finishReason"]);s!=null&&h(e,["finishReason"],s);const a=c(t,["avgLogprobs"]);a!=null&&h(e,["avgLogprobs"],a);const u=c(t,["groundingMetadata"]);u!=null&&h(e,["groundingMetadata"],u);const d=c(t,["index"]);d!=null&&h(e,["index"],d);const f=c(t,["logprobsResult"]);f!=null&&h(e,["logprobsResult"],f);const m=c(t,["safetyRatings"]);if(m!=null){let v=m;Array.isArray(v)&&(v=v.map(w=>w)),h(e,["safetyRatings"],v)}const _=c(t,["urlContextMetadata"]);return _!=null&&h(e,["urlContextMetadata"],_),e}function ZR(t){const e={},n=c(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),h(e,["citations"],i)}return e}function YR(t,e){const n={},i=c(e,["model"]);i!=null&&h(n,["_url","model"],pe(t,i));const r=c(e,["contents"]);if(r!=null){let s=bt(r);Array.isArray(s)&&(s=s.map(a=>a)),h(n,["contents"],s)}return n}function jR(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const i=c(t,["tokensInfo"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>s)),h(e,["tokensInfo"],r)}return e}function QR(t){const e={},n=c(t,["values"]);n!=null&&h(e,["values"],n);const i=c(t,["statistics"]);return i!=null&&h(e,["statistics"],XR(i)),e}function XR(t){const e={},n=c(t,["truncated"]);n!=null&&h(e,["truncated"],n);const i=c(t,["token_count"]);return i!=null&&h(e,["tokenCount"],i),e}function dl(t){const e={},n=c(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>lb(s))),h(e,["parts"],r)}const i=c(t,["role"]);return i!=null&&h(e,["role"],i),e}function eN(t){const e={},n=c(t,["controlType"]);n!=null&&h(e,["controlType"],n);const i=c(t,["enableControlImageComputation"]);return i!=null&&h(e,["computeControl"],i),e}function tN(t){const e={};if(c(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(c(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(c(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function nN(t,e){const n={},i=c(t,["systemInstruction"]);e!==void 0&&i!=null&&h(e,["systemInstruction"],tt(i));const r=c(t,["tools"]);if(e!==void 0&&r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>tw(u))),h(e,["tools"],a)}const s=c(t,["generationConfig"]);return e!==void 0&&s!=null&&h(e,["generationConfig"],JN(s)),n}function iN(t,e){const n={},i=c(e,["model"]);i!=null&&h(n,["_url","model"],pe(t,i));const r=c(e,["contents"]);if(r!=null){let a=bt(r);Array.isArray(a)&&(a=a.map(u=>dl(u))),h(n,["contents"],a)}const s=c(e,["config"]);return s!=null&&tN(s),n}function rN(t,e){const n={},i=c(e,["model"]);i!=null&&h(n,["_url","model"],pe(t,i));const r=c(e,["contents"]);if(r!=null){let a=bt(r);Array.isArray(a)&&(a=a.map(u=>u)),h(n,["contents"],a)}const s=c(e,["config"]);return s!=null&&nN(s,n),n}function oN(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const i=c(t,["totalTokens"]);i!=null&&h(e,["totalTokens"],i);const r=c(t,["cachedContentTokenCount"]);return r!=null&&h(e,["cachedContentTokenCount"],r),e}function sN(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const i=c(t,["totalTokens"]);return i!=null&&h(e,["totalTokens"],i),e}function aN(t,e){const n={},i=c(e,["model"]);return i!=null&&h(n,["_url","name"],pe(t,i)),n}function lN(t,e){const n={},i=c(e,["model"]);return i!=null&&h(n,["_url","name"],pe(t,i)),n}function uN(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function cN(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function dN(t,e){const n={},i=c(t,["outputGcsUri"]);e!==void 0&&i!=null&&h(e,["parameters","storageUri"],i);const r=c(t,["negativePrompt"]);e!==void 0&&r!=null&&h(e,["parameters","negativePrompt"],r);const s=c(t,["numberOfImages"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);const a=c(t,["aspectRatio"]);e!==void 0&&a!=null&&h(e,["parameters","aspectRatio"],a);const u=c(t,["guidanceScale"]);e!==void 0&&u!=null&&h(e,["parameters","guidanceScale"],u);const d=c(t,["seed"]);e!==void 0&&d!=null&&h(e,["parameters","seed"],d);const f=c(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&h(e,["parameters","safetySetting"],f);const m=c(t,["personGeneration"]);e!==void 0&&m!=null&&h(e,["parameters","personGeneration"],m);const _=c(t,["includeSafetyAttributes"]);e!==void 0&&_!=null&&h(e,["parameters","includeSafetyAttributes"],_);const v=c(t,["includeRaiReason"]);e!==void 0&&v!=null&&h(e,["parameters","includeRaiReason"],v);const w=c(t,["language"]);e!==void 0&&w!=null&&h(e,["parameters","language"],w);const x=c(t,["outputMimeType"]);e!==void 0&&x!=null&&h(e,["parameters","outputOptions","mimeType"],x);const P=c(t,["outputCompressionQuality"]);e!==void 0&&P!=null&&h(e,["parameters","outputOptions","compressionQuality"],P);const I=c(t,["addWatermark"]);e!==void 0&&I!=null&&h(e,["parameters","addWatermark"],I);const C=c(t,["labels"]);e!==void 0&&C!=null&&h(e,["labels"],C);const T=c(t,["editMode"]);e!==void 0&&T!=null&&h(e,["parameters","editMode"],T);const S=c(t,["baseSteps"]);return e!==void 0&&S!=null&&h(e,["parameters","editConfig","baseSteps"],S),n}function fN(t,e){const n={},i=c(e,["model"]);i!=null&&h(n,["_url","model"],pe(t,i));const r=c(e,["prompt"]);r!=null&&h(n,["instances[0]","prompt"],r);const s=c(e,["referenceImages"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>pb(d))),h(n,["instances[0]","referenceImages"],u)}const a=c(e,["config"]);return a!=null&&dN(a,n),n}function hN(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const i=c(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>fl(s))),h(e,["generatedImages"],r)}return e}function pN(t,e){const n={},i=c(t,["taskType"]);e!==void 0&&i!=null&&h(e,["requests[]","taskType"],i);const r=c(t,["title"]);e!==void 0&&r!=null&&h(e,["requests[]","title"],r);const s=c(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&h(e,["requests[]","outputDimensionality"],s),c(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function mN(t,e){const n={},i=c(t,["taskType"]);e!==void 0&&i!=null&&h(e,["instances[]","task_type"],i);const r=c(t,["title"]);e!==void 0&&r!=null&&h(e,["instances[]","title"],r);const s=c(t,["outputDimensionality"]);e!==void 0&&s!=null&&h(e,["parameters","outputDimensionality"],s);const a=c(t,["mimeType"]);e!==void 0&&a!=null&&h(e,["instances[]","mimeType"],a);const u=c(t,["autoTruncate"]);return e!==void 0&&u!=null&&h(e,["parameters","autoTruncate"],u),n}function gN(t,e){const n={},i=c(e,["model"]);i!=null&&h(n,["_url","model"],pe(t,i));const r=c(e,["contents"]);if(r!=null){let u=hf(t,r);Array.isArray(u)&&(u=u.map(d=>d)),h(n,["requests[]","content"],u)}const s=c(e,["config"]);s!=null&&pN(s,n);const a=c(e,["model"]);return a!==void 0&&h(n,["requests[]","model"],pe(t,a)),n}function _N(t,e){const n={},i=c(e,["model"]);i!=null&&h(n,["_url","model"],pe(t,i));const r=c(e,["contents"]);if(r!=null){let a=hf(t,r);Array.isArray(a)&&(a=a.map(u=>u)),h(n,["instances[]","content"],a)}const s=c(e,["config"]);return s!=null&&mN(s,n),n}function vN(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const i=c(t,["embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),h(e,["embeddings"],s)}const r=c(t,["metadata"]);return r!=null&&h(e,["metadata"],r),e}function yN(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const i=c(t,["predictions[]","embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>QR(a))),h(e,["embeddings"],s)}const r=c(t,["metadata"]);return r!=null&&h(e,["metadata"],r),e}function wN(t){const e={},n=c(t,["endpoint"]);n!=null&&h(e,["name"],n);const i=c(t,["deployedModelId"]);return i!=null&&h(e,["deployedModelId"],i),e}function EN(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const i=c(t,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function TN(t){const e={},n=c(t,["id"]);n!=null&&h(e,["id"],n);const i=c(t,["args"]);i!=null&&h(e,["args"],i);const r=c(t,["name"]);if(r!=null&&h(e,["name"],r),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function SN(t){const e={},n=c(t,["mode"]);n!=null&&h(e,["mode"],n);const i=c(t,["allowedFunctionNames"]);if(i!=null&&h(e,["allowedFunctionNames"],i),c(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function CN(t){const e={};if(c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=c(t,["description"]);n!=null&&h(e,["description"],n);const i=c(t,["name"]);i!=null&&h(e,["name"],i);const r=c(t,["parameters"]);r!=null&&h(e,["parameters"],r);const s=c(t,["parametersJsonSchema"]);s!=null&&h(e,["parametersJsonSchema"],s);const a=c(t,["response"]);a!=null&&h(e,["response"],a);const u=c(t,["responseJsonSchema"]);return u!=null&&h(e,["responseJsonSchema"],u),e}function xN(t,e,n){const i={},r=c(e,["systemInstruction"]);n!==void 0&&r!=null&&h(n,["systemInstruction"],dl(tt(r)));const s=c(e,["temperature"]);s!=null&&h(i,["temperature"],s);const a=c(e,["topP"]);a!=null&&h(i,["topP"],a);const u=c(e,["topK"]);u!=null&&h(i,["topK"],u);const d=c(e,["candidateCount"]);d!=null&&h(i,["candidateCount"],d);const f=c(e,["maxOutputTokens"]);f!=null&&h(i,["maxOutputTokens"],f);const m=c(e,["stopSequences"]);m!=null&&h(i,["stopSequences"],m);const _=c(e,["responseLogprobs"]);_!=null&&h(i,["responseLogprobs"],_);const v=c(e,["logprobs"]);v!=null&&h(i,["logprobs"],v);const w=c(e,["presencePenalty"]);w!=null&&h(i,["presencePenalty"],w);const x=c(e,["frequencyPenalty"]);x!=null&&h(i,["frequencyPenalty"],x);const P=c(e,["seed"]);P!=null&&h(i,["seed"],P);const I=c(e,["responseMimeType"]);I!=null&&h(i,["responseMimeType"],I);const C=c(e,["responseSchema"]);C!=null&&h(i,["responseSchema"],pf(C));const T=c(e,["responseJsonSchema"]);if(T!=null&&h(i,["responseJsonSchema"],T),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const S=c(e,["safetySettings"]);if(n!==void 0&&S!=null){let te=S;Array.isArray(te)&&(te=te.map(Re=>mb(Re))),h(n,["safetySettings"],te)}const N=c(e,["tools"]);if(n!==void 0&&N!=null){let te=Mr(N);Array.isArray(te)&&(te=te.map(Re=>Tb(br(Re)))),h(n,["tools"],te)}const R=c(e,["toolConfig"]);if(n!==void 0&&R!=null&&h(n,["toolConfig"],Eb(R)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const M=c(e,["cachedContent"]);n!==void 0&&M!=null&&h(n,["cachedContent"],Tn(t,M));const O=c(e,["responseModalities"]);O!=null&&h(i,["responseModalities"],O);const z=c(e,["mediaResolution"]);z!=null&&h(i,["mediaResolution"],z);const q=c(e,["speechConfig"]);if(q!=null&&h(i,["speechConfig"],mf(q)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const G=c(e,["thinkingConfig"]);G!=null&&h(i,["thinkingConfig"],G);const j=c(e,["imageConfig"]);return j!=null&&h(i,["imageConfig"],QN(j)),i}function PN(t,e,n){const i={},r=c(e,["systemInstruction"]);n!==void 0&&r!=null&&h(n,["systemInstruction"],tt(r));const s=c(e,["temperature"]);s!=null&&h(i,["temperature"],s);const a=c(e,["topP"]);a!=null&&h(i,["topP"],a);const u=c(e,["topK"]);u!=null&&h(i,["topK"],u);const d=c(e,["candidateCount"]);d!=null&&h(i,["candidateCount"],d);const f=c(e,["maxOutputTokens"]);f!=null&&h(i,["maxOutputTokens"],f);const m=c(e,["stopSequences"]);m!=null&&h(i,["stopSequences"],m);const _=c(e,["responseLogprobs"]);_!=null&&h(i,["responseLogprobs"],_);const v=c(e,["logprobs"]);v!=null&&h(i,["logprobs"],v);const w=c(e,["presencePenalty"]);w!=null&&h(i,["presencePenalty"],w);const x=c(e,["frequencyPenalty"]);x!=null&&h(i,["frequencyPenalty"],x);const P=c(e,["seed"]);P!=null&&h(i,["seed"],P);const I=c(e,["responseMimeType"]);I!=null&&h(i,["responseMimeType"],I);const C=c(e,["responseSchema"]);C!=null&&h(i,["responseSchema"],pf(C));const T=c(e,["responseJsonSchema"]);T!=null&&h(i,["responseJsonSchema"],T);const S=c(e,["routingConfig"]);S!=null&&h(i,["routingConfig"],S);const N=c(e,["modelSelectionConfig"]);N!=null&&h(i,["modelConfig"],N);const R=c(e,["safetySettings"]);if(n!==void 0&&R!=null){let ie=R;Array.isArray(ie)&&(ie=ie.map(je=>je)),h(n,["safetySettings"],ie)}const M=c(e,["tools"]);if(n!==void 0&&M!=null){let ie=Mr(M);Array.isArray(ie)&&(ie=ie.map(je=>tw(br(je)))),h(n,["tools"],ie)}const O=c(e,["toolConfig"]);n!==void 0&&O!=null&&h(n,["toolConfig"],O);const z=c(e,["labels"]);n!==void 0&&z!=null&&h(n,["labels"],z);const q=c(e,["cachedContent"]);n!==void 0&&q!=null&&h(n,["cachedContent"],Tn(t,q));const G=c(e,["responseModalities"]);G!=null&&h(i,["responseModalities"],G);const j=c(e,["mediaResolution"]);j!=null&&h(i,["mediaResolution"],j);const te=c(e,["speechConfig"]);te!=null&&h(i,["speechConfig"],ew(mf(te)));const Re=c(e,["audioTimestamp"]);Re!=null&&h(i,["audioTimestamp"],Re);const qe=c(e,["thinkingConfig"]);qe!=null&&h(i,["thinkingConfig"],qe);const rn=c(e,["imageConfig"]);return rn!=null&&h(i,["imageConfig"],XN(rn)),i}function Ug(t,e){const n={},i=c(e,["model"]);i!=null&&h(n,["_url","model"],pe(t,i));const r=c(e,["contents"]);if(r!=null){let a=bt(r);Array.isArray(a)&&(a=a.map(u=>dl(u))),h(n,["contents"],a)}const s=c(e,["config"]);return s!=null&&h(n,["generationConfig"],xN(t,s,n)),n}function Fg(t,e){const n={},i=c(e,["model"]);i!=null&&h(n,["_url","model"],pe(t,i));const r=c(e,["contents"]);if(r!=null){let a=bt(r);Array.isArray(a)&&(a=a.map(u=>u)),h(n,["contents"],a)}const s=c(e,["config"]);return s!=null&&h(n,["generationConfig"],PN(t,s,n)),n}function Bg(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const i=c(t,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(f=>KR(f))),h(e,["candidates"],d)}const r=c(t,["modelVersion"]);r!=null&&h(e,["modelVersion"],r);const s=c(t,["promptFeedback"]);s!=null&&h(e,["promptFeedback"],s);const a=c(t,["responseId"]);a!=null&&h(e,["responseId"],a);const u=c(t,["usageMetadata"]);return u!=null&&h(e,["usageMetadata"],u),e}function zg(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const i=c(t,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(m=>m)),h(e,["candidates"],f)}const r=c(t,["createTime"]);r!=null&&h(e,["createTime"],r);const s=c(t,["modelVersion"]);s!=null&&h(e,["modelVersion"],s);const a=c(t,["promptFeedback"]);a!=null&&h(e,["promptFeedback"],a);const u=c(t,["responseId"]);u!=null&&h(e,["responseId"],u);const d=c(t,["usageMetadata"]);return d!=null&&h(e,["usageMetadata"],d),e}function AN(t,e){const n={};if(c(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=c(t,["numberOfImages"]);e!==void 0&&i!=null&&h(e,["parameters","sampleCount"],i);const r=c(t,["aspectRatio"]);e!==void 0&&r!=null&&h(e,["parameters","aspectRatio"],r);const s=c(t,["guidanceScale"]);if(e!==void 0&&s!=null&&h(e,["parameters","guidanceScale"],s),c(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=c(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&h(e,["parameters","safetySetting"],a);const u=c(t,["personGeneration"]);e!==void 0&&u!=null&&h(e,["parameters","personGeneration"],u);const d=c(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&h(e,["parameters","includeSafetyAttributes"],d);const f=c(t,["includeRaiReason"]);e!==void 0&&f!=null&&h(e,["parameters","includeRaiReason"],f);const m=c(t,["language"]);e!==void 0&&m!=null&&h(e,["parameters","language"],m);const _=c(t,["outputMimeType"]);e!==void 0&&_!=null&&h(e,["parameters","outputOptions","mimeType"],_);const v=c(t,["outputCompressionQuality"]);if(e!==void 0&&v!=null&&h(e,["parameters","outputOptions","compressionQuality"],v),c(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const w=c(t,["imageSize"]);if(e!==void 0&&w!=null&&h(e,["parameters","sampleImageSize"],w),c(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function IN(t,e){const n={},i=c(t,["outputGcsUri"]);e!==void 0&&i!=null&&h(e,["parameters","storageUri"],i);const r=c(t,["negativePrompt"]);e!==void 0&&r!=null&&h(e,["parameters","negativePrompt"],r);const s=c(t,["numberOfImages"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);const a=c(t,["aspectRatio"]);e!==void 0&&a!=null&&h(e,["parameters","aspectRatio"],a);const u=c(t,["guidanceScale"]);e!==void 0&&u!=null&&h(e,["parameters","guidanceScale"],u);const d=c(t,["seed"]);e!==void 0&&d!=null&&h(e,["parameters","seed"],d);const f=c(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&h(e,["parameters","safetySetting"],f);const m=c(t,["personGeneration"]);e!==void 0&&m!=null&&h(e,["parameters","personGeneration"],m);const _=c(t,["includeSafetyAttributes"]);e!==void 0&&_!=null&&h(e,["parameters","includeSafetyAttributes"],_);const v=c(t,["includeRaiReason"]);e!==void 0&&v!=null&&h(e,["parameters","includeRaiReason"],v);const w=c(t,["language"]);e!==void 0&&w!=null&&h(e,["parameters","language"],w);const x=c(t,["outputMimeType"]);e!==void 0&&x!=null&&h(e,["parameters","outputOptions","mimeType"],x);const P=c(t,["outputCompressionQuality"]);e!==void 0&&P!=null&&h(e,["parameters","outputOptions","compressionQuality"],P);const I=c(t,["addWatermark"]);e!==void 0&&I!=null&&h(e,["parameters","addWatermark"],I);const C=c(t,["labels"]);e!==void 0&&C!=null&&h(e,["labels"],C);const T=c(t,["imageSize"]);e!==void 0&&T!=null&&h(e,["parameters","sampleImageSize"],T);const S=c(t,["enhancePrompt"]);return e!==void 0&&S!=null&&h(e,["parameters","enhancePrompt"],S),n}function kN(t,e){const n={},i=c(e,["model"]);i!=null&&h(n,["_url","model"],pe(t,i));const r=c(e,["prompt"]);r!=null&&h(n,["instances[0]","prompt"],r);const s=c(e,["config"]);return s!=null&&AN(s,n),n}function RN(t,e){const n={},i=c(e,["model"]);i!=null&&h(n,["_url","model"],pe(t,i));const r=c(e,["prompt"]);r!=null&&h(n,["instances[0]","prompt"],r);const s=c(e,["config"]);return s!=null&&IN(s,n),n}function NN(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const i=c(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>HN(a))),h(e,["generatedImages"],s)}const r=c(t,["positivePromptSafetyAttributes"]);return r!=null&&h(e,["positivePromptSafetyAttributes"],Q0(r)),e}function bN(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const i=c(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>fl(a))),h(e,["generatedImages"],s)}const r=c(t,["positivePromptSafetyAttributes"]);return r!=null&&h(e,["positivePromptSafetyAttributes"],X0(r)),e}function MN(t,e){const n={},i=c(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&h(e,["parameters","sampleCount"],i),c(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=c(t,["durationSeconds"]);if(e!==void 0&&r!=null&&h(e,["parameters","durationSeconds"],r),c(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=c(t,["aspectRatio"]);e!==void 0&&s!=null&&h(e,["parameters","aspectRatio"],s);const a=c(t,["resolution"]);e!==void 0&&a!=null&&h(e,["parameters","resolution"],a);const u=c(t,["personGeneration"]);if(e!==void 0&&u!=null&&h(e,["parameters","personGeneration"],u),c(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const d=c(t,["negativePrompt"]);e!==void 0&&d!=null&&h(e,["parameters","negativePrompt"],d);const f=c(t,["enhancePrompt"]);if(e!==void 0&&f!=null&&h(e,["parameters","enhancePrompt"],f),c(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const m=c(t,["lastFrame"]);e!==void 0&&m!=null&&h(e,["instances[0]","lastFrame"],hl(m));const _=c(t,["referenceImages"]);if(e!==void 0&&_!=null){let v=_;Array.isArray(v)&&(v=v.map(w=>Db(w))),h(e,["instances[0]","referenceImages"],v)}if(c(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(c(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function LN(t,e){const n={},i=c(t,["numberOfVideos"]);e!==void 0&&i!=null&&h(e,["parameters","sampleCount"],i);const r=c(t,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const s=c(t,["fps"]);e!==void 0&&s!=null&&h(e,["parameters","fps"],s);const a=c(t,["durationSeconds"]);e!==void 0&&a!=null&&h(e,["parameters","durationSeconds"],a);const u=c(t,["seed"]);e!==void 0&&u!=null&&h(e,["parameters","seed"],u);const d=c(t,["aspectRatio"]);e!==void 0&&d!=null&&h(e,["parameters","aspectRatio"],d);const f=c(t,["resolution"]);e!==void 0&&f!=null&&h(e,["parameters","resolution"],f);const m=c(t,["personGeneration"]);e!==void 0&&m!=null&&h(e,["parameters","personGeneration"],m);const _=c(t,["pubsubTopic"]);e!==void 0&&_!=null&&h(e,["parameters","pubsubTopic"],_);const v=c(t,["negativePrompt"]);e!==void 0&&v!=null&&h(e,["parameters","negativePrompt"],v);const w=c(t,["enhancePrompt"]);e!==void 0&&w!=null&&h(e,["parameters","enhancePrompt"],w);const x=c(t,["generateAudio"]);e!==void 0&&x!=null&&h(e,["parameters","generateAudio"],x);const P=c(t,["lastFrame"]);e!==void 0&&P!=null&&h(e,["instances[0]","lastFrame"],Jt(P));const I=c(t,["referenceImages"]);if(e!==void 0&&I!=null){let S=I;Array.isArray(S)&&(S=S.map(N=>Ob(N))),h(e,["instances[0]","referenceImages"],S)}const C=c(t,["mask"]);e!==void 0&&C!=null&&h(e,["instances[0]","mask"],Lb(C));const T=c(t,["compressionQuality"]);return e!==void 0&&T!=null&&h(e,["parameters","compressionQuality"],T),n}function DN(t){const e={},n=c(t,["name"]);n!=null&&h(e,["name"],n);const i=c(t,["metadata"]);i!=null&&h(e,["metadata"],i);const r=c(t,["done"]);r!=null&&h(e,["done"],r);const s=c(t,["error"]);s!=null&&h(e,["error"],s);const a=c(t,["response","generateVideoResponse"]);return a!=null&&h(e,["response"],BN(a)),e}function ON(t){const e={},n=c(t,["name"]);n!=null&&h(e,["name"],n);const i=c(t,["metadata"]);i!=null&&h(e,["metadata"],i);const r=c(t,["done"]);r!=null&&h(e,["done"],r);const s=c(t,["error"]);s!=null&&h(e,["error"],s);const a=c(t,["response"]);return a!=null&&h(e,["response"],zN(a)),e}function UN(t,e){const n={},i=c(e,["model"]);i!=null&&h(n,["_url","model"],pe(t,i));const r=c(e,["prompt"]);r!=null&&h(n,["instances[0]","prompt"],r);const s=c(e,["image"]);s!=null&&h(n,["instances[0]","image"],hl(s));const a=c(e,["video"]);a!=null&&h(n,["instances[0]","video"],nw(a));const u=c(e,["source"]);u!=null&&VN(u,n);const d=c(e,["config"]);return d!=null&&MN(d,n),n}function FN(t,e){const n={},i=c(e,["model"]);i!=null&&h(n,["_url","model"],pe(t,i));const r=c(e,["prompt"]);r!=null&&h(n,["instances[0]","prompt"],r);const s=c(e,["image"]);s!=null&&h(n,["instances[0]","image"],Jt(s));const a=c(e,["video"]);a!=null&&h(n,["instances[0]","video"],iw(a));const u=c(e,["source"]);u!=null&&qN(u,n);const d=c(e,["config"]);return d!=null&&LN(d,n),n}function BN(t){const e={},n=c(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>$N(a))),h(e,["generatedVideos"],s)}const i=c(t,["raiMediaFilteredCount"]);i!=null&&h(e,["raiMediaFilteredCount"],i);const r=c(t,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function zN(t){const e={},n=c(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>WN(a))),h(e,["generatedVideos"],s)}const i=c(t,["raiMediaFilteredCount"]);i!=null&&h(e,["raiMediaFilteredCount"],i);const r=c(t,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function VN(t,e){const n={},i=c(t,["prompt"]);e!==void 0&&i!=null&&h(e,["instances[0]","prompt"],i);const r=c(t,["image"]);e!==void 0&&r!=null&&h(e,["instances[0]","image"],hl(r));const s=c(t,["video"]);return e!==void 0&&s!=null&&h(e,["instances[0]","video"],nw(s)),n}function qN(t,e){const n={},i=c(t,["prompt"]);e!==void 0&&i!=null&&h(e,["instances[0]","prompt"],i);const r=c(t,["image"]);e!==void 0&&r!=null&&h(e,["instances[0]","image"],Jt(r));const s=c(t,["video"]);return e!==void 0&&s!=null&&h(e,["instances[0]","video"],iw(s)),n}function HN(t){const e={},n=c(t,["_self"]);n!=null&&h(e,["image"],eb(n));const i=c(t,["raiFilteredReason"]);i!=null&&h(e,["raiFilteredReason"],i);const r=c(t,["_self"]);return r!=null&&h(e,["safetyAttributes"],Q0(r)),e}function fl(t){const e={},n=c(t,["_self"]);n!=null&&h(e,["image"],j0(n));const i=c(t,["raiFilteredReason"]);i!=null&&h(e,["raiFilteredReason"],i);const r=c(t,["_self"]);r!=null&&h(e,["safetyAttributes"],X0(r));const s=c(t,["prompt"]);return s!=null&&h(e,["enhancedPrompt"],s),e}function GN(t){const e={},n=c(t,["_self"]);n!=null&&h(e,["mask"],j0(n));const i=c(t,["labels"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>s)),h(e,["labels"],r)}return e}function $N(t){const e={},n=c(t,["video"]);return n!=null&&h(e,["video"],bb(n)),e}function WN(t){const e={},n=c(t,["_self"]);return n!=null&&h(e,["video"],Mb(n)),e}function JN(t){const e={},n=c(t,["modelSelectionConfig"]);n!=null&&h(e,["modelConfig"],n);const i=c(t,["responseJsonSchema"]);i!=null&&h(e,["responseJsonSchema"],i);const r=c(t,["audioTimestamp"]);r!=null&&h(e,["audioTimestamp"],r);const s=c(t,["candidateCount"]);s!=null&&h(e,["candidateCount"],s);const a=c(t,["enableAffectiveDialog"]);a!=null&&h(e,["enableAffectiveDialog"],a);const u=c(t,["frequencyPenalty"]);u!=null&&h(e,["frequencyPenalty"],u);const d=c(t,["logprobs"]);d!=null&&h(e,["logprobs"],d);const f=c(t,["maxOutputTokens"]);f!=null&&h(e,["maxOutputTokens"],f);const m=c(t,["mediaResolution"]);m!=null&&h(e,["mediaResolution"],m);const _=c(t,["presencePenalty"]);_!=null&&h(e,["presencePenalty"],_);const v=c(t,["responseLogprobs"]);v!=null&&h(e,["responseLogprobs"],v);const w=c(t,["responseMimeType"]);w!=null&&h(e,["responseMimeType"],w);const x=c(t,["responseModalities"]);x!=null&&h(e,["responseModalities"],x);const P=c(t,["responseSchema"]);P!=null&&h(e,["responseSchema"],P);const I=c(t,["routingConfig"]);I!=null&&h(e,["routingConfig"],I);const C=c(t,["seed"]);C!=null&&h(e,["seed"],C);const T=c(t,["speechConfig"]);T!=null&&h(e,["speechConfig"],ew(T));const S=c(t,["stopSequences"]);S!=null&&h(e,["stopSequences"],S);const N=c(t,["temperature"]);N!=null&&h(e,["temperature"],N);const R=c(t,["thinkingConfig"]);R!=null&&h(e,["thinkingConfig"],R);const M=c(t,["topK"]);M!=null&&h(e,["topK"],M);const O=c(t,["topP"]);if(O!=null&&h(e,["topP"],O),c(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function KN(t,e){const n={},i=c(e,["model"]);return i!=null&&h(n,["_url","name"],pe(t,i)),n}function ZN(t,e){const n={},i=c(e,["model"]);return i!=null&&h(n,["_url","name"],pe(t,i)),n}function YN(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function jN(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function QN(t){const e={},n=c(t,["aspectRatio"]);n!=null&&h(e,["aspectRatio"],n);const i=c(t,["imageSize"]);if(i!=null&&h(e,["imageSize"],i),c(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function XN(t){const e={},n=c(t,["aspectRatio"]);n!=null&&h(e,["aspectRatio"],n);const i=c(t,["imageSize"]);i!=null&&h(e,["imageSize"],i);const r=c(t,["outputMimeType"]);r!=null&&h(e,["imageOutputOptions","mimeType"],r);const s=c(t,["outputCompressionQuality"]);return s!=null&&h(e,["imageOutputOptions","compressionQuality"],s),e}function eb(t){const e={},n=c(t,["bytesBase64Encoded"]);n!=null&&h(e,["imageBytes"],ti(n));const i=c(t,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function j0(t){const e={},n=c(t,["gcsUri"]);n!=null&&h(e,["gcsUri"],n);const i=c(t,["bytesBase64Encoded"]);i!=null&&h(e,["imageBytes"],ti(i));const r=c(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function hl(t){const e={};if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=c(t,["imageBytes"]);n!=null&&h(e,["bytesBase64Encoded"],ti(n));const i=c(t,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function Jt(t){const e={},n=c(t,["gcsUri"]);n!=null&&h(e,["gcsUri"],n);const i=c(t,["imageBytes"]);i!=null&&h(e,["bytesBase64Encoded"],ti(i));const r=c(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function tb(t,e,n){const i={},r=c(e,["pageSize"]);n!==void 0&&r!=null&&h(n,["_query","pageSize"],r);const s=c(e,["pageToken"]);n!==void 0&&s!=null&&h(n,["_query","pageToken"],s);const a=c(e,["filter"]);n!==void 0&&a!=null&&h(n,["_query","filter"],a);const u=c(e,["queryBase"]);return n!==void 0&&u!=null&&h(n,["_url","models_url"],H0(t,u)),i}function nb(t,e,n){const i={},r=c(e,["pageSize"]);n!==void 0&&r!=null&&h(n,["_query","pageSize"],r);const s=c(e,["pageToken"]);n!==void 0&&s!=null&&h(n,["_query","pageToken"],s);const a=c(e,["filter"]);n!==void 0&&a!=null&&h(n,["_query","filter"],a);const u=c(e,["queryBase"]);return n!==void 0&&u!=null&&h(n,["_url","models_url"],H0(t,u)),i}function ib(t,e){const n={},i=c(e,["config"]);return i!=null&&tb(t,i,n),n}function rb(t,e){const n={},i=c(e,["config"]);return i!=null&&nb(t,i,n),n}function ob(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const r=c(t,["_self"]);if(r!=null){let s=G0(r);Array.isArray(s)&&(s=s.map(a=>Wc(a))),h(e,["models"],s)}return e}function sb(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const r=c(t,["_self"]);if(r!=null){let s=G0(r);Array.isArray(s)&&(s=s.map(a=>Jc(a))),h(e,["models"],s)}return e}function ab(t){const e={},n=c(t,["maskMode"]);n!=null&&h(e,["maskMode"],n);const i=c(t,["segmentationClasses"]);i!=null&&h(e,["maskClasses"],i);const r=c(t,["maskDilation"]);return r!=null&&h(e,["dilation"],r),e}function Wc(t){const e={},n=c(t,["name"]);n!=null&&h(e,["name"],n);const i=c(t,["displayName"]);i!=null&&h(e,["displayName"],i);const r=c(t,["description"]);r!=null&&h(e,["description"],r);const s=c(t,["version"]);s!=null&&h(e,["version"],s);const a=c(t,["_self"]);a!=null&&h(e,["tunedModelInfo"],Sb(a));const u=c(t,["inputTokenLimit"]);u!=null&&h(e,["inputTokenLimit"],u);const d=c(t,["outputTokenLimit"]);d!=null&&h(e,["outputTokenLimit"],d);const f=c(t,["supportedGenerationMethods"]);f!=null&&h(e,["supportedActions"],f);const m=c(t,["temperature"]);m!=null&&h(e,["temperature"],m);const _=c(t,["maxTemperature"]);_!=null&&h(e,["maxTemperature"],_);const v=c(t,["topP"]);v!=null&&h(e,["topP"],v);const w=c(t,["topK"]);w!=null&&h(e,["topK"],w);const x=c(t,["thinking"]);return x!=null&&h(e,["thinking"],x),e}function Jc(t){const e={},n=c(t,["name"]);n!=null&&h(e,["name"],n);const i=c(t,["displayName"]);i!=null&&h(e,["displayName"],i);const r=c(t,["description"]);r!=null&&h(e,["description"],r);const s=c(t,["versionId"]);s!=null&&h(e,["version"],s);const a=c(t,["deployedModels"]);if(a!=null){let _=a;Array.isArray(_)&&(_=_.map(v=>wN(v))),h(e,["endpoints"],_)}const u=c(t,["labels"]);u!=null&&h(e,["labels"],u);const d=c(t,["_self"]);d!=null&&h(e,["tunedModelInfo"],Cb(d));const f=c(t,["defaultCheckpointId"]);f!=null&&h(e,["defaultCheckpointId"],f);const m=c(t,["checkpoints"]);if(m!=null){let _=m;Array.isArray(_)&&(_=_.map(v=>v)),h(e,["checkpoints"],_)}return e}function lb(t){const e={},n=c(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const i=c(t,["codeExecutionResult"]);i!=null&&h(e,["codeExecutionResult"],i);const r=c(t,["executableCode"]);r!=null&&h(e,["executableCode"],r);const s=c(t,["fileData"]);s!=null&&h(e,["fileData"],EN(s));const a=c(t,["functionCall"]);a!=null&&h(e,["functionCall"],TN(a));const u=c(t,["functionResponse"]);u!=null&&h(e,["functionResponse"],u);const d=c(t,["inlineData"]);d!=null&&h(e,["inlineData"],JR(d));const f=c(t,["text"]);f!=null&&h(e,["text"],f);const m=c(t,["thought"]);m!=null&&h(e,["thought"],m);const _=c(t,["thoughtSignature"]);_!=null&&h(e,["thoughtSignature"],_);const v=c(t,["videoMetadata"]);return v!=null&&h(e,["videoMetadata"],v),e}function ub(t){const e={},n=c(t,["productImage"]);return n!=null&&h(e,["image"],Jt(n)),e}function cb(t,e){const n={},i=c(t,["numberOfImages"]);e!==void 0&&i!=null&&h(e,["parameters","sampleCount"],i);const r=c(t,["baseSteps"]);e!==void 0&&r!=null&&h(e,["parameters","baseSteps"],r);const s=c(t,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const a=c(t,["seed"]);e!==void 0&&a!=null&&h(e,["parameters","seed"],a);const u=c(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&h(e,["parameters","safetySetting"],u);const d=c(t,["personGeneration"]);e!==void 0&&d!=null&&h(e,["parameters","personGeneration"],d);const f=c(t,["addWatermark"]);e!==void 0&&f!=null&&h(e,["parameters","addWatermark"],f);const m=c(t,["outputMimeType"]);e!==void 0&&m!=null&&h(e,["parameters","outputOptions","mimeType"],m);const _=c(t,["outputCompressionQuality"]);e!==void 0&&_!=null&&h(e,["parameters","outputOptions","compressionQuality"],_);const v=c(t,["enhancePrompt"]);e!==void 0&&v!=null&&h(e,["parameters","enhancePrompt"],v);const w=c(t,["labels"]);return e!==void 0&&w!=null&&h(e,["labels"],w),n}function db(t,e){const n={},i=c(e,["model"]);i!=null&&h(n,["_url","model"],pe(t,i));const r=c(e,["source"]);r!=null&&hb(r,n);const s=c(e,["config"]);return s!=null&&cb(s,n),n}function fb(t){const e={},n=c(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>fl(r))),h(e,["generatedImages"],i)}return e}function hb(t,e){const n={},i=c(t,["prompt"]);e!==void 0&&i!=null&&h(e,["instances[0]","prompt"],i);const r=c(t,["personImage"]);e!==void 0&&r!=null&&h(e,["instances[0]","personImage","image"],Jt(r));const s=c(t,["productImages"]);if(e!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>ub(u))),h(e,["instances[0]","productImages"],a)}return n}function pb(t){const e={},n=c(t,["referenceImage"]);n!=null&&h(e,["referenceImage"],Jt(n));const i=c(t,["referenceId"]);i!=null&&h(e,["referenceId"],i);const r=c(t,["referenceType"]);r!=null&&h(e,["referenceType"],r);const s=c(t,["maskImageConfig"]);s!=null&&h(e,["maskImageConfig"],ab(s));const a=c(t,["controlImageConfig"]);a!=null&&h(e,["controlImageConfig"],eN(a));const u=c(t,["styleImageConfig"]);u!=null&&h(e,["styleImageConfig"],u);const d=c(t,["subjectImageConfig"]);return d!=null&&h(e,["subjectImageConfig"],d),e}function Q0(t){const e={},n=c(t,["safetyAttributes","categories"]);n!=null&&h(e,["categories"],n);const i=c(t,["safetyAttributes","scores"]);i!=null&&h(e,["scores"],i);const r=c(t,["contentType"]);return r!=null&&h(e,["contentType"],r),e}function X0(t){const e={},n=c(t,["safetyAttributes","categories"]);n!=null&&h(e,["categories"],n);const i=c(t,["safetyAttributes","scores"]);i!=null&&h(e,["scores"],i);const r=c(t,["contentType"]);return r!=null&&h(e,["contentType"],r),e}function mb(t){const e={},n=c(t,["category"]);if(n!=null&&h(e,["category"],n),c(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=c(t,["threshold"]);return i!=null&&h(e,["threshold"],i),e}function gb(t){const e={},n=c(t,["image"]);return n!=null&&h(e,["image"],Jt(n)),e}function _b(t,e){const n={},i=c(t,["mode"]);e!==void 0&&i!=null&&h(e,["parameters","mode"],i);const r=c(t,["maxPredictions"]);e!==void 0&&r!=null&&h(e,["parameters","maxPredictions"],r);const s=c(t,["confidenceThreshold"]);e!==void 0&&s!=null&&h(e,["parameters","confidenceThreshold"],s);const a=c(t,["maskDilation"]);e!==void 0&&a!=null&&h(e,["parameters","maskDilation"],a);const u=c(t,["binaryColorThreshold"]);e!==void 0&&u!=null&&h(e,["parameters","binaryColorThreshold"],u);const d=c(t,["labels"]);return e!==void 0&&d!=null&&h(e,["labels"],d),n}function vb(t,e){const n={},i=c(e,["model"]);i!=null&&h(n,["_url","model"],pe(t,i));const r=c(e,["source"]);r!=null&&wb(r,n);const s=c(e,["config"]);return s!=null&&_b(s,n),n}function yb(t){const e={},n=c(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>GN(r))),h(e,["generatedMasks"],i)}return e}function wb(t,e){const n={},i=c(t,["prompt"]);e!==void 0&&i!=null&&h(e,["instances[0]","prompt"],i);const r=c(t,["image"]);e!==void 0&&r!=null&&h(e,["instances[0]","image"],Jt(r));const s=c(t,["scribbleImage"]);return e!==void 0&&s!=null&&h(e,["instances[0]","scribble"],gb(s)),n}function ew(t){const e={},n=c(t,["languageCode"]);n!=null&&h(e,["languageCode"],n);const i=c(t,["voiceConfig"]);if(i!=null&&h(e,["voiceConfig"],i),c(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function Eb(t){const e={},n=c(t,["functionCallingConfig"]);n!=null&&h(e,["functionCallingConfig"],SN(n));const i=c(t,["retrievalConfig"]);return i!=null&&h(e,["retrievalConfig"],i),e}function Tb(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(_=>_)),h(e,["functionDeclarations"],m)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(t,["googleSearchRetrieval"]);i!=null&&h(e,["googleSearchRetrieval"],i);const r=c(t,["computerUse"]);r!=null&&h(e,["computerUse"],r);const s=c(t,["fileSearch"]);s!=null&&h(e,["fileSearch"],s);const a=c(t,["codeExecution"]);if(a!=null&&h(e,["codeExecution"],a),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=c(t,["googleMaps"]);u!=null&&h(e,["googleMaps"],YN(u));const d=c(t,["googleSearch"]);d!=null&&h(e,["googleSearch"],jN(d));const f=c(t,["urlContext"]);return f!=null&&h(e,["urlContext"],f),e}function tw(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let _=n;Array.isArray(_)&&(_=_.map(v=>CN(v))),h(e,["functionDeclarations"],_)}const i=c(t,["retrieval"]);i!=null&&h(e,["retrieval"],i);const r=c(t,["googleSearchRetrieval"]);r!=null&&h(e,["googleSearchRetrieval"],r);const s=c(t,["computerUse"]);if(s!=null&&h(e,["computerUse"],s),c(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=c(t,["codeExecution"]);a!=null&&h(e,["codeExecution"],a);const u=c(t,["enterpriseWebSearch"]);u!=null&&h(e,["enterpriseWebSearch"],u);const d=c(t,["googleMaps"]);d!=null&&h(e,["googleMaps"],d);const f=c(t,["googleSearch"]);f!=null&&h(e,["googleSearch"],f);const m=c(t,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}function Sb(t){const e={},n=c(t,["baseModel"]);n!=null&&h(e,["baseModel"],n);const i=c(t,["createTime"]);i!=null&&h(e,["createTime"],i);const r=c(t,["updateTime"]);return r!=null&&h(e,["updateTime"],r),e}function Cb(t){const e={},n=c(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&h(e,["baseModel"],n);const i=c(t,["createTime"]);i!=null&&h(e,["createTime"],i);const r=c(t,["updateTime"]);return r!=null&&h(e,["updateTime"],r),e}function xb(t,e){const n={},i=c(t,["displayName"]);e!==void 0&&i!=null&&h(e,["displayName"],i);const r=c(t,["description"]);e!==void 0&&r!=null&&h(e,["description"],r);const s=c(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&h(e,["defaultCheckpointId"],s),n}function Pb(t,e){const n={},i=c(t,["displayName"]);e!==void 0&&i!=null&&h(e,["displayName"],i);const r=c(t,["description"]);e!==void 0&&r!=null&&h(e,["description"],r);const s=c(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&h(e,["defaultCheckpointId"],s),n}function Ab(t,e){const n={},i=c(e,["model"]);i!=null&&h(n,["_url","name"],pe(t,i));const r=c(e,["config"]);return r!=null&&xb(r,n),n}function Ib(t,e){const n={},i=c(e,["model"]);i!=null&&h(n,["_url","model"],pe(t,i));const r=c(e,["config"]);return r!=null&&Pb(r,n),n}function kb(t,e){const n={},i=c(t,["outputGcsUri"]);e!==void 0&&i!=null&&h(e,["parameters","storageUri"],i);const r=c(t,["safetyFilterLevel"]);e!==void 0&&r!=null&&h(e,["parameters","safetySetting"],r);const s=c(t,["personGeneration"]);e!==void 0&&s!=null&&h(e,["parameters","personGeneration"],s);const a=c(t,["includeRaiReason"]);e!==void 0&&a!=null&&h(e,["parameters","includeRaiReason"],a);const u=c(t,["outputMimeType"]);e!==void 0&&u!=null&&h(e,["parameters","outputOptions","mimeType"],u);const d=c(t,["outputCompressionQuality"]);e!==void 0&&d!=null&&h(e,["parameters","outputOptions","compressionQuality"],d);const f=c(t,["enhanceInputImage"]);e!==void 0&&f!=null&&h(e,["parameters","upscaleConfig","enhanceInputImage"],f);const m=c(t,["imagePreservationFactor"]);e!==void 0&&m!=null&&h(e,["parameters","upscaleConfig","imagePreservationFactor"],m);const _=c(t,["labels"]);e!==void 0&&_!=null&&h(e,["labels"],_);const v=c(t,["numberOfImages"]);e!==void 0&&v!=null&&h(e,["parameters","sampleCount"],v);const w=c(t,["mode"]);return e!==void 0&&w!=null&&h(e,["parameters","mode"],w),n}function Rb(t,e){const n={},i=c(e,["model"]);i!=null&&h(n,["_url","model"],pe(t,i));const r=c(e,["image"]);r!=null&&h(n,["instances[0]","image"],Jt(r));const s=c(e,["upscaleFactor"]);s!=null&&h(n,["parameters","upscaleConfig","upscaleFactor"],s);const a=c(e,["config"]);return a!=null&&kb(a,n),n}function Nb(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const i=c(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>fl(s))),h(e,["generatedImages"],r)}return e}function bb(t){const e={},n=c(t,["uri"]);n!=null&&h(e,["uri"],n);const i=c(t,["encodedVideo"]);i!=null&&h(e,["videoBytes"],ti(i));const r=c(t,["encoding"]);return r!=null&&h(e,["mimeType"],r),e}function Mb(t){const e={},n=c(t,["gcsUri"]);n!=null&&h(e,["uri"],n);const i=c(t,["bytesBase64Encoded"]);i!=null&&h(e,["videoBytes"],ti(i));const r=c(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function Lb(t){const e={},n=c(t,["image"]);n!=null&&h(e,["_self"],Jt(n));const i=c(t,["maskMode"]);return i!=null&&h(e,["maskMode"],i),e}function Db(t){const e={},n=c(t,["image"]);n!=null&&h(e,["image"],hl(n));const i=c(t,["referenceType"]);return i!=null&&h(e,["referenceType"],i),e}function Ob(t){const e={},n=c(t,["image"]);n!=null&&h(e,["image"],Jt(n));const i=c(t,["referenceType"]);return i!=null&&h(e,["referenceType"],i),e}function nw(t){const e={},n=c(t,["uri"]);n!=null&&h(e,["uri"],n);const i=c(t,["videoBytes"]);i!=null&&h(e,["encodedVideo"],ti(i));const r=c(t,["mimeType"]);return r!=null&&h(e,["encoding"],r),e}function iw(t){const e={},n=c(t,["uri"]);n!=null&&h(e,["gcsUri"],n);const i=c(t,["videoBytes"]);i!=null&&h(e,["bytesBase64Encoded"],ti(i));const r=c(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ub="Content-Type",Fb="X-Server-Timeout",Bb="User-Agent",Kc="x-goog-api-client",zb="1.30.0",Vb=`google-genai-sdk/${zb}`,qb="v1beta1",Hb="v1beta",Vg=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class Gb{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:qb,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:Hb,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const r=[this.getRequestUrlInternal(n)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[a,u]of Object.entries(e.queryParams))r.searchParams.append(a,String(u));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,n,r.toString(),e.abortSignal),this.unaryApiCall(r,s,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[r,s]of Object.entries(n))typeof s=="object"?i[r]=Object.assign(Object.assign({},i[r]),s):s!==void 0&&(i[r]=s);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,n,r.toString(),e.abortSignal),this.streamApiCall(r,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i,r){if(n&&n.timeout||r){const s=new AbortController,a=s.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const u=setTimeout(()=>s.abort(),n.timeout);u&&typeof u.unref=="function"&&u.unref()}r&&r.addEventListener("abort",()=>{s.abort()}),e.signal=a}return n&&n.extraBody!==null&&$b(e,n.extraBody),e.headers=await this.getHeadersInternal(n,i),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await qg(r),new Hc(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await qg(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var n;return pr(this,arguments,function*(){const r=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),s=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let a="";for(;;){const{done:u,value:d}=yield Ee(r.read());if(u){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const f=s.decode(d,{stream:!0});try{const _=JSON.parse(f);if("error"in _){const v=JSON.parse(JSON.stringify(_.error)),w=v.status,x=v.code,P=`got status: ${w}. ${JSON.stringify(_)}`;if(x>=400&&x<600)throw new cl({message:P,status:x})}}catch(_){if(_.name==="ApiError")throw _}a+=f;let m=a.match(Vg);for(;m;){const _=m[1];try{const v=new Response(_,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Ee(new Hc(v)),a=a.slice(m[0].length),m=a.match(Vg)}catch(v){throw new Error(`exception parsing stream chunk ${_}. ${v}`)}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=Vb+" "+this.clientOptions.userAgentExtra;return e[Bb]=n,e[Kc]=n,e[Ub]="application/json",e}async getHeadersInternal(e,n){const i=new Headers;if(e&&e.headers){for(const[r,s]of Object.entries(e.headers))i.append(r,s);e.timeout&&e.timeout>0&&i.append(Fb,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(e){var n;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(e,n){var i;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const s=this.clientOptions.uploader,a=await s.stat(e);r.sizeBytes=String(a.size);const u=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:a.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=u;const d={file:r},f=this.getFileName(e),m=$("upload/v1beta/files",d._url),_=await this.fetchUploadUrl(m,r.sizeBytes,r.mimeType,f,d,n==null?void 0:n.httpOptions);return s.upload(e,_,this)}async uploadFileToFileSearchStore(e,n,i){var r;const s=this.clientOptions.uploader,a=await s.stat(n),u=String(a.size),d=(r=i==null?void 0:i.mimeType)!==null&&r!==void 0?r:a.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const f=`upload/v1beta/${e}:uploadToFileSearchStore`,m=this.getFileName(n),_={};i!=null&&i.customMetadata&&(_.customMetadata=i.customMetadata),i!=null&&i.chunkingConfig&&(_.chunkingConfig=i.chunkingConfig);const v=await this.fetchUploadUrl(f,u,d,m,_,i==null?void 0:i.httpOptions);return s.uploadToFileSearchStore(n,v,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,i,r,s,a){var u;let d={};a?d=a:d={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},r?{"X-Goog-Upload-File-Name":r}:{})};const f=await this.request({path:e,body:JSON.stringify(s),httpMethod:"POST",httpOptions:d});if(!f||!(f!=null&&f.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const m=(u=f==null?void 0:f.headers)===null||u===void 0?void 0:u["x-goog-upload-url"];if(m===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return m}}async function qg(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(i);throw n>=400&&n<600?new cl({message:r,status:n}):new Error(r)}}function $b(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const s=JSON.parse(t.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))n=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(s,a){const u=Object.assign({},s);for(const d in a)if(Object.prototype.hasOwnProperty.call(a,d)){const f=a[d],m=u[d];f&&typeof f=="object"&&!Array.isArray(f)&&m&&typeof m=="object"&&!Array.isArray(m)?u[d]=i(m,f):(m&&f&&typeof m!=typeof f&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${d}". Original type: ${typeof m}, New type: ${typeof f}. Overwriting.`),u[d]=f)}return u}const r=i(n,e);t.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Wb="mcp_used/unknown";let Jb=!1;function rw(t){for(const e of t)if(Kb(e)||typeof e=="object"&&"inputSchema"in e)return!0;return Jb}function ow(t){var e;const n=(e=t[Kc])!==null&&e!==void 0?e:"";t[Kc]=(n+` ${Wb}`).trimStart()}function Kb(t){return t!==null&&typeof t=="object"&&t instanceof _f}function Zb(t,e=100){return pr(this,arguments,function*(){let i,r=0;for(;r<e;){const s=yield Ee(t.listTools({cursor:i}));for(const a of s.tools)yield yield Ee(a),r++;if(!s.nextCursor)break;i=s.nextCursor}})}class _f{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new _f(e,n)}async initialize(){var e,n,i,r;if(this.mcpTools.length>0)return;const s={},a=[];for(const m of this.mcpClients)try{for(var u=!0,d=(n=void 0,So(Zb(m))),f;f=await d.next(),e=f.done,!e;u=!0){r=f.value,u=!1;const _=r;a.push(_);const v=_.name;if(s[v])throw new Error(`Duplicate function name ${v} found in MCP tools. Please ensure function names are unique.`);s[v]=m}}catch(_){n={error:_}}finally{try{!u&&!e&&(i=d.return)&&await i.call(d)}finally{if(n)throw n.error}}this.mcpTools=a,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),VI(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let s;this.config.timeout&&(s={timeout:this.config.timeout});const a=await r.callTool({name:i.name,arguments:i.args},void 0,s);n.push({functionResponse:{name:i.name,response:a.isError?{error:a}:a}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Yb(t,e,n){const i=new MI;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),Object.assign(i,r),e(i)}class jb{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),a=eM(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),d=`${r}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${u}`;let f=()=>{};const m=new Promise(S=>{f=S}),_=e.callbacks,v=function(){f({})},w=this.apiClient,x={onopen:v,onmessage:S=>{Yb(w,_.onmessage,S)},onerror:(n=_==null?void 0:_.onerror)!==null&&n!==void 0?n:function(S){},onclose:(i=_==null?void 0:_.onclose)!==null&&i!==void 0?i:function(S){}},P=this.webSocketFactory.create(d,Xb(a),x);P.connect(),await m;const T={setup:{model:pe(this.apiClient,e.model)}};return P.send(JSON.stringify(T)),new Qb(P,this.apiClient)}}class Qb{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=FR(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=UR(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(or.PLAY)}pause(){this.sendPlaybackControl(or.PAUSE)}stop(){this.sendPlaybackControl(or.STOP)}resetContext(){this.sendPlaybackControl(or.RESET_CONTEXT)}close(){this.conn.close()}}function Xb(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function eM(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tM="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function nM(t,e,n){const i=new bI;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const s=JSON.parse(r);if(t.isVertexAI()){const a=VR(s);Object.assign(i,a)}else Object.assign(i,s);e(i)}class iM{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new jb(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,r,s,a,u;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const d=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion();let m;const _=this.apiClient.getHeaders();e.config&&e.config.tools&&rw(e.config.tools)&&ow(_);const v=aM(_);if(this.apiClient.isVertexAI())m=`${d}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(v,m);else{const q=this.apiClient.getApiKey();let G="BidiGenerateContent",j="key";q!=null&&q.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),f!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),G="BidiGenerateContentConstrained",j="access_token"),m=`${d}/ws/google.ai.generativelanguage.${f}.GenerativeService.${G}?${j}=${q}`}let w=()=>{};const x=new Promise(q=>{w=q}),P=e.callbacks,I=function(){var q;(q=P==null?void 0:P.onopen)===null||q===void 0||q.call(P),w({})},C=this.apiClient,T={onopen:I,onmessage:q=>{nM(C,P.onmessage,q)},onerror:(n=P==null?void 0:P.onerror)!==null&&n!==void 0?n:function(q){},onclose:(i=P==null?void 0:P.onclose)!==null&&i!==void 0?i:function(q){}},S=this.webSocketFactory.create(m,sM(v),T);S.connect(),await x;let N=pe(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&N.startsWith("publishers/")){const q=this.apiClient.getProject(),G=this.apiClient.getLocation();N=`projects/${q}/locations/${G}/`+N}let R={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Ba.AUDIO]}:e.config.responseModalities=[Ba.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const M=(u=(a=e.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[],O=[];for(const q of M)if(this.isCallableTool(q)){const G=q;O.push(await G.tool())}else O.push(q);O.length>0&&(e.config.tools=O);const z={model:N,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?R=OR(this.apiClient,z):R=DR(this.apiClient,z),delete R.config,S.send(JSON.stringify(R)),new oM(S,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const rM={turnComplete:!0};class oM{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=bt(n.turns),e.isVertexAI()||(i=i.map(r=>dl(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const s of i){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(tM)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},rM),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:zR(e)}:n={realtimeInput:BR(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function sM(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function aM(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Hg=10;function Gg(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const a of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(mr(a)){r=!0;break}if(!r)return!0;const s=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function mr(t){return"callTool"in t&&typeof t.callTool=="function"}function lM(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>mr(r)))!==null&&i!==void 0?i:!1}function $g(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((i,r)=>{if(mr(i))return;const s=i;s.functionDeclarations&&s.functionDeclarations.length>0&&n.push(r)}),n}function Wg(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uM extends En{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,r,s,a,u;const d=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!lM(n)||Gg(n.config))return await this.generateContentInternal(d);const f=$g(n);if(f.length>0){const P=f.map(I=>`tools[${I}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${P}.`)}let m,_;const v=bt(d.contents),w=(s=(r=(i=d.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&s!==void 0?s:Hg;let x=0;for(;x<w&&(m=await this.generateContentInternal(d),!(!m.functionCalls||m.functionCalls.length===0));){const P=m.candidates[0].content,I=[];for(const C of(u=(a=n.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[])if(mr(C)){const S=await C.callTool(m.functionCalls);I.push(...S)}x++,_={role:"user",parts:I},d.contents=bt(d.contents),d.contents.push(P),d.contents.push(_),Wg(d.config)&&(v.push(P),v.push(_))}return Wg(d.config)&&(m.automaticFunctionCallingHistory=v),m},this.generateContentStream=async n=>{var i,r,s,a,u;if(this.maybeMoveToResponseJsonSchem(n),Gg(n.config)){const _=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(_)}const d=$g(n);if(d.length>0){const _=d.map(v=>`tools[${v}]`).join(", ");throw new Error(`Incompatible tools found at ${_}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const f=(s=(r=(i=n==null?void 0:n.config)===null||i===void 0?void 0:i.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||s===void 0?void 0:s.streamFunctionCallArguments,m=(u=(a=n==null?void 0:n.config)===null||a===void 0?void 0:a.automaticFunctionCalling)===null||u===void 0?void 0:u.disable;if(f&&!m)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var r;let s;const a=[];if(i!=null&&i.generatedImages)for(const d of i.generatedImages)d&&(d!=null&&d.safetyAttributes)&&((r=d==null?void 0:d.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?s=d==null?void 0:d.safetyAttributes:a.push(d);let u;return s?u={generatedImages:a,positivePromptSafetyAttributes:s,sdkHttpResponse:i.sdkHttpResponse}:u={generatedImages:a,sdkHttpResponse:i.sdkHttpResponse},u}),this.list=async n=>{var i;const a={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!a.config.queryBase){if(!((i=a.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");a.config.filter="labels.tune-type:*"}return new Ii(yn.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(a),a)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>{var i,r,s,a,u,d;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((r=n.video)===null||r===void 0)&&r.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((a=(s=n.source)===null||s===void 0?void 0:s.video)===null||a===void 0)&&a.uri&&(!((d=(u=n.source)===null||u===void 0?void 0:u.video)===null||d===void 0)&&d.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,r;const s=(n=e.config)===null||n===void 0?void 0:n.tools;if(!s)return e;const a=await Promise.all(s.map(async d=>mr(d)?await d.tool():d)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:a})};if(u.config.tools=a,e.config&&e.config.tools&&rw(e.config.tools)){const d=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let f=Object.assign({},d);Object.keys(f).length===0&&(f=this.apiClient.getDefaultHeaders()),ow(f),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:f})}return u}async initAfcToolsMap(e){var n,i,r;const s=new Map;for(const a of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(mr(a)){const u=a,d=await u.tool();for(const f of(r=d.functionDeclarations)!==null&&r!==void 0?r:[]){if(!f.name)throw new Error("Function declaration name is required.");if(s.has(f.name))throw new Error(`Duplicate tool declaration name: ${f.name}`);s.set(f.name,u)}}return s}async processAfcStream(e){var n,i,r;const s=(r=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:Hg;let a=!1,u=0;const d=await this.initAfcToolsMap(e);return function(f,m,_){var v,w;return pr(this,arguments,function*(){for(var x,P,I,C;u<s;){a&&(u++,a=!1);const R=yield Ee(f.processParamsMaybeAddMcpUsage(_)),M=yield Ee(f.generateContentStreamInternal(R)),O=[],z=[];try{for(var T=!0,S=(P=void 0,So(M)),N;N=yield Ee(S.next()),x=N.done,!x;T=!0){C=N.value,T=!1;const q=C;if(yield yield Ee(q),q.candidates&&(!((v=q.candidates[0])===null||v===void 0)&&v.content)){z.push(q.candidates[0].content);for(const G of(w=q.candidates[0].content.parts)!==null&&w!==void 0?w:[])if(u<s&&G.functionCall){if(!G.functionCall.name)throw new Error("Function call name was not returned by the model.");if(m.has(G.functionCall.name)){const j=yield Ee(m.get(G.functionCall.name).callTool([G.functionCall]));O.push(...j)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${m.keys()}, mising tool: ${G.functionCall.name}`)}}}}catch(q){P={error:q}}finally{try{!T&&!x&&(I=S.return)&&(yield Ee(I.call(S)))}finally{if(P)throw P.error}}if(O.length>0){a=!0;const q=new ro;q.candidates=[{content:{role:"user",parts:O}}],yield yield Ee(q);const G=[];G.push(...z),G.push({role:"user",parts:O});const j=bt(_.contents).concat(G);_.contents=j}else break}})}(this,d,e)}async generateContentInternal(e){var n,i,r,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=Fg(this.apiClient,e);return u=$("{model}:generateContent",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(_=>{const v=_;return v.sdkHttpResponse={headers:m.headers},v})),a.then(m=>{const _=zg(m),v=new ro;return Object.assign(v,_),v})}else{const f=Ug(this.apiClient,e);return u=$("{model}:generateContent",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(_=>{const v=_;return v.sdkHttpResponse={headers:m.headers},v})),a.then(m=>{const _=Bg(m),v=new ro;return Object.assign(v,_),v})}}async generateContentStreamInternal(e){var n,i,r,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=Fg(this.apiClient,e);return u=$("{model}:streamGenerateContent?alt=sse",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.requestStream({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),a.then(function(_){return pr(this,arguments,function*(){var v,w,x,P;try{for(var I=!0,C=So(_),T;T=yield Ee(C.next()),v=T.done,!v;I=!0){P=T.value,I=!1;const S=P,N=zg(yield Ee(S.json()));N.sdkHttpResponse={headers:S.headers};const R=new ro;Object.assign(R,N),yield yield Ee(R)}}catch(S){w={error:S}}finally{try{!I&&!v&&(x=C.return)&&(yield Ee(x.call(C)))}finally{if(w)throw w.error}}})})}else{const f=Ug(this.apiClient,e);return u=$("{model}:streamGenerateContent?alt=sse",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.requestStream({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),a.then(function(_){return pr(this,arguments,function*(){var v,w,x,P;try{for(var I=!0,C=So(_),T;T=yield Ee(C.next()),v=T.done,!v;I=!0){P=T.value,I=!1;const S=P,N=Bg(yield Ee(S.json()));N.sdkHttpResponse={headers:S.headers};const R=new ro;Object.assign(R,N),yield yield Ee(R)}}catch(S){w={error:S}}finally{try{!I&&!v&&(x=C.return)&&(yield Ee(x.call(C)))}finally{if(w)throw w.error}}})})}}async embedContent(e){var n,i,r,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=_N(this.apiClient,e);return u=$("{model}:predict",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(_=>{const v=_;return v.sdkHttpResponse={headers:m.headers},v})),a.then(m=>{const _=yN(m),v=new Eg;return Object.assign(v,_),v})}else{const f=gN(this.apiClient,e);return u=$("{model}:batchEmbedContents",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(_=>{const v=_;return v.sdkHttpResponse={headers:m.headers},v})),a.then(m=>{const _=vN(m),v=new Eg;return Object.assign(v,_),v})}}async generateImagesInternal(e){var n,i,r,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=RN(this.apiClient,e);return u=$("{model}:predict",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(_=>{const v=_;return v.sdkHttpResponse={headers:m.headers},v})),a.then(m=>{const _=bN(m),v=new Tg;return Object.assign(v,_),v})}else{const f=kN(this.apiClient,e);return u=$("{model}:predict",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(_=>{const v=_;return v.sdkHttpResponse={headers:m.headers},v})),a.then(m=>{const _=NN(m),v=new Tg;return Object.assign(v,_),v})}}async editImageInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const u=fN(this.apiClient,e);return s=$("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{const f=hN(d),m=new EI;return Object.assign(m,f),m})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const u=Rb(this.apiClient,e);return s=$("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{const f=Nb(d),m=new TI;return Object.assign(m,f),m})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const u=db(this.apiClient,e);return s=$("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const f=fb(d),m=new SI;return Object.assign(m,f),m})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const u=vb(this.apiClient,e);return s=$("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const f=yb(d),m=new CI;return Object.assign(m,f),m})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,r,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=ZN(this.apiClient,e);return u=$("{name}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),a.then(m=>Jc(m))}else{const f=KN(this.apiClient,e);return u=$("{name}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>Wc(m))}}async listInternal(e){var n,i,r,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=rb(this.apiClient,e);return u=$("{models_url}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(_=>{const v=_;return v.sdkHttpResponse={headers:m.headers},v})),a.then(m=>{const _=sb(m),v=new Sg;return Object.assign(v,_),v})}else{const f=ib(this.apiClient,e);return u=$("{models_url}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(_=>{const v=_;return v.sdkHttpResponse={headers:m.headers},v})),a.then(m=>{const _=ob(m),v=new Sg;return Object.assign(v,_),v})}}async update(e){var n,i,r,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=Ib(this.apiClient,e);return u=$("{model}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),a.then(m=>Jc(m))}else{const f=Ab(this.apiClient,e);return u=$("{name}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>Wc(m))}}async delete(e){var n,i,r,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=lN(this.apiClient,e);return u=$("{name}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(_=>{const v=_;return v.sdkHttpResponse={headers:m.headers},v})),a.then(m=>{const _=cN(m),v=new Cg;return Object.assign(v,_),v})}else{const f=aN(this.apiClient,e);return u=$("{name}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(_=>{const v=_;return v.sdkHttpResponse={headers:m.headers},v})),a.then(m=>{const _=uN(m),v=new Cg;return Object.assign(v,_),v})}}async countTokens(e){var n,i,r,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=rN(this.apiClient,e);return u=$("{model}:countTokens",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(_=>{const v=_;return v.sdkHttpResponse={headers:m.headers},v})),a.then(m=>{const _=sN(m),v=new xg;return Object.assign(v,_),v})}else{const f=iN(this.apiClient,e);return u=$("{model}:countTokens",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(_=>{const v=_;return v.sdkHttpResponse={headers:m.headers},v})),a.then(m=>{const _=oN(m),v=new xg;return Object.assign(v,_),v})}}async computeTokens(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const u=YR(this.apiClient,e);return s=$("{model}:computeTokens",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{const f=jR(d),m=new xI;return Object.assign(m,f),m})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,r,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=FN(this.apiClient,e);return u=$("{model}:predictLongRunning",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),a.then(m=>{const _=ON(m),v=new za;return Object.assign(v,_),v})}else{const f=UN(this.apiClient,e);return u=$("{model}:predictLongRunning",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>{const _=DN(m),v=new za;return Object.assign(v,_),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cM extends En{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let s;i&&"httpOptions"in i&&(s=i.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let s;i&&"httpOptions"in i&&(s=i.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,r,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=mI(e);return u=$("{operationName}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),a}else{const f=pI(e);return u=$("{operationName}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a}}async fetchPredictVideosOperationInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const u=aI(e);return s=$("{resourceName}:fetchPredictOperation",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dM(t){const e={},n=c(t,["data"]);if(n!=null&&h(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(t,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function fM(t){const e={},n=c(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>EM(s))),h(e,["parts"],r)}const i=c(t,["role"]);return i!=null&&h(e,["role"],i),e}function hM(t,e,n){const i={},r=c(e,["expireTime"]);n!==void 0&&r!=null&&h(n,["expireTime"],r);const s=c(e,["newSessionExpireTime"]);n!==void 0&&s!=null&&h(n,["newSessionExpireTime"],s);const a=c(e,["uses"]);n!==void 0&&a!=null&&h(n,["uses"],a);const u=c(e,["liveConnectConstraints"]);n!==void 0&&u!=null&&h(n,["bidiGenerateContentSetup"],wM(t,u));const d=c(e,["lockAdditionalFields"]);return n!==void 0&&d!=null&&h(n,["fieldMask"],d),i}function pM(t,e){const n={},i=c(e,["config"]);return i!=null&&h(n,["config"],hM(t,i,n)),n}function mM(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const i=c(t,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function gM(t){const e={},n=c(t,["id"]);n!=null&&h(e,["id"],n);const i=c(t,["args"]);i!=null&&h(e,["args"],i);const r=c(t,["name"]);if(r!=null&&h(e,["name"],r),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function _M(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function vM(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function yM(t,e){const n={},i=c(t,["generationConfig"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig"],i);const r=c(t,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const s=c(t,["temperature"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig","temperature"],s);const a=c(t,["topP"]);e!==void 0&&a!=null&&h(e,["setup","generationConfig","topP"],a);const u=c(t,["topK"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","topK"],u);const d=c(t,["maxOutputTokens"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","maxOutputTokens"],d);const f=c(t,["mediaResolution"]);e!==void 0&&f!=null&&h(e,["setup","generationConfig","mediaResolution"],f);const m=c(t,["seed"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","seed"],m);const _=c(t,["speechConfig"]);e!==void 0&&_!=null&&h(e,["setup","generationConfig","speechConfig"],gf(_));const v=c(t,["thinkingConfig"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","thinkingConfig"],v);const w=c(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],w);const x=c(t,["systemInstruction"]);e!==void 0&&x!=null&&h(e,["setup","systemInstruction"],fM(tt(x)));const P=c(t,["tools"]);if(e!==void 0&&P!=null){let M=Mr(P);Array.isArray(M)&&(M=M.map(O=>SM(br(O)))),h(e,["setup","tools"],M)}const I=c(t,["sessionResumption"]);e!==void 0&&I!=null&&h(e,["setup","sessionResumption"],TM(I));const C=c(t,["inputAudioTranscription"]);e!==void 0&&C!=null&&h(e,["setup","inputAudioTranscription"],C);const T=c(t,["outputAudioTranscription"]);e!==void 0&&T!=null&&h(e,["setup","outputAudioTranscription"],T);const S=c(t,["realtimeInputConfig"]);e!==void 0&&S!=null&&h(e,["setup","realtimeInputConfig"],S);const N=c(t,["contextWindowCompression"]);e!==void 0&&N!=null&&h(e,["setup","contextWindowCompression"],N);const R=c(t,["proactivity"]);return e!==void 0&&R!=null&&h(e,["setup","proactivity"],R),n}function wM(t,e){const n={},i=c(e,["model"]);i!=null&&h(n,["setup","model"],pe(t,i));const r=c(e,["config"]);return r!=null&&h(n,["config"],yM(r,n)),n}function EM(t){const e={},n=c(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const i=c(t,["codeExecutionResult"]);i!=null&&h(e,["codeExecutionResult"],i);const r=c(t,["executableCode"]);r!=null&&h(e,["executableCode"],r);const s=c(t,["fileData"]);s!=null&&h(e,["fileData"],mM(s));const a=c(t,["functionCall"]);a!=null&&h(e,["functionCall"],gM(a));const u=c(t,["functionResponse"]);u!=null&&h(e,["functionResponse"],u);const d=c(t,["inlineData"]);d!=null&&h(e,["inlineData"],dM(d));const f=c(t,["text"]);f!=null&&h(e,["text"],f);const m=c(t,["thought"]);m!=null&&h(e,["thought"],m);const _=c(t,["thoughtSignature"]);_!=null&&h(e,["thoughtSignature"],_);const v=c(t,["videoMetadata"]);return v!=null&&h(e,["videoMetadata"],v),e}function TM(t){const e={},n=c(t,["handle"]);if(n!=null&&h(e,["handle"],n),c(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function SM(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(_=>_)),h(e,["functionDeclarations"],m)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(t,["googleSearchRetrieval"]);i!=null&&h(e,["googleSearchRetrieval"],i);const r=c(t,["computerUse"]);r!=null&&h(e,["computerUse"],r);const s=c(t,["fileSearch"]);s!=null&&h(e,["fileSearch"],s);const a=c(t,["codeExecution"]);if(a!=null&&h(e,["codeExecution"],a),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=c(t,["googleMaps"]);u!=null&&h(e,["googleMaps"],_M(u));const d=c(t,["googleSearch"]);d!=null&&h(e,["googleSearch"],vM(d));const f=c(t,["urlContext"]);return f!=null&&h(e,["urlContext"],f),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function CM(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(s=>`${n}.${s}`);e.push(...r)}else e.push(n)}return e.join(",")}function xM(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const s=i.setup;typeof s=="object"&&s!==null?(t.bidiGenerateContentSetup=s,n=s):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const s=CM(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)s?t.fieldMask=s:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const a=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];r.length>0&&(u=r.map(f=>a.includes(f)?`generationConfig.${f}`:f));const d=[];s&&d.push(s),u.length>0&&d.push(...u),d.length>0?t.fieldMask=d.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class PM extends En{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=pM(this.apiClient,e);s=$("auth_tokens",u._url),a=u._query,delete u.config,delete u._url,delete u._query;const d=xM(u,e.config);return r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>f)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function AM(t,e){const n={},i=c(t,["displayName"]);return e!==void 0&&i!=null&&h(e,["displayName"],i),n}function IM(t){const e={},n=c(t,["config"]);return n!=null&&AM(n,e),e}function kM(t,e){const n={},i=c(t,["force"]);return e!==void 0&&i!=null&&h(e,["_query","force"],i),n}function RM(t){const e={},n=c(t,["name"]);n!=null&&h(e,["_url","name"],n);const i=c(t,["config"]);return i!=null&&kM(i,e),e}function NM(t){const e={},n=c(t,["name"]);return n!=null&&h(e,["_url","name"],n),e}function bM(t,e){const n={},i=c(t,["customMetadata"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),h(e,["customMetadata"],s)}const r=c(t,["chunkingConfig"]);return e!==void 0&&r!=null&&h(e,["chunkingConfig"],r),n}function MM(t){const e={},n=c(t,["name"]);n!=null&&h(e,["name"],n);const i=c(t,["metadata"]);i!=null&&h(e,["metadata"],i);const r=c(t,["done"]);r!=null&&h(e,["done"],r);const s=c(t,["error"]);s!=null&&h(e,["error"],s);const a=c(t,["response"]);return a!=null&&h(e,["response"],DM(a)),e}function LM(t){const e={},n=c(t,["fileSearchStoreName"]);n!=null&&h(e,["_url","file_search_store_name"],n);const i=c(t,["fileName"]);i!=null&&h(e,["fileName"],i);const r=c(t,["config"]);return r!=null&&bM(r,e),e}function DM(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const i=c(t,["parent"]);i!=null&&h(e,["parent"],i);const r=c(t,["documentName"]);return r!=null&&h(e,["documentName"],r),e}function OM(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const r=c(t,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),n}function UM(t){const e={},n=c(t,["config"]);return n!=null&&OM(n,e),e}function FM(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const r=c(t,["fileSearchStores"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),h(e,["fileSearchStores"],s)}return e}function BM(t,e){const n={},i=c(t,["mimeType"]);e!==void 0&&i!=null&&h(e,["mimeType"],i);const r=c(t,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const s=c(t,["customMetadata"]);if(e!==void 0&&s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>d)),h(e,["customMetadata"],u)}const a=c(t,["chunkingConfig"]);return e!==void 0&&a!=null&&h(e,["chunkingConfig"],a),n}function zM(t){const e={},n=c(t,["fileSearchStoreName"]);n!=null&&h(e,["_url","file_search_store_name"],n);const i=c(t,["config"]);return i!=null&&BM(i,e),e}function VM(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qM(t,e){const n={},i=c(t,["force"]);return e!==void 0&&i!=null&&h(e,["_query","force"],i),n}function HM(t){const e={},n=c(t,["name"]);n!=null&&h(e,["_url","name"],n);const i=c(t,["config"]);return i!=null&&qM(i,e),e}function GM(t){const e={},n=c(t,["name"]);return n!=null&&h(e,["_url","name"],n),e}function $M(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const r=c(t,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),n}function WM(t){const e={},n=c(t,["parent"]);n!=null&&h(e,["_url","parent"],n);const i=c(t,["config"]);return i!=null&&$M(i,e),e}function JM(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const r=c(t,["documents"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),h(e,["documents"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class KM extends En{constructor(e){super(),this.apiClient=e,this.list=async n=>new Ii(yn.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=GM(e);return s=$("{name}",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async delete(e){var n,i;let r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=HM(e);r=$("{name}",a._url),s=a._query,delete a._url,delete a._query,await this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=WM(e);return s=$("{parent}/documents",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const f=JM(d),m=new PI;return Object.assign(m,f),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ZM extends En{constructor(e,n=new KM(e)){super(),this.apiClient=e,this.documents=n,this.list=async(i={})=>new Ii(yn.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=IM(e);return s=$("fileSearchStores",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async get(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=NM(e);return s=$("{name}",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async delete(e){var n,i;let r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=RM(e);r=$("{name}",a._url),s=a._query,delete a._url,delete a._query,await this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=UM(e);return s=$("fileSearchStores",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const f=FM(d),m=new AI;return Object.assign(m,f),m})}}async uploadToFileSearchStoreInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=zM(e);return s=$("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const f=VM(d),m=new II;return Object.assign(m,f),m})}}async importFile(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=LM(e);return s=$("{file_search_store_name}:importFile",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const f=MM(d),m=new df;return Object.assign(m,f),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function YM(t,e){const n={},i=c(t,["name"]);return i!=null&&h(n,["_url","name"],i),n}function jM(t,e){const n={},i=c(t,["name"]);return i!=null&&h(n,["_url","name"],i),n}function QM(t,e,n){const i={};if(c(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=c(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&h(e,["displayName"],r),c(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=c(t,["epochCount"]);e!==void 0&&s!=null&&h(e,["tuningTask","hyperparameters","epochCount"],s);const a=c(t,["learningRateMultiplier"]);if(a!=null&&h(i,["tuningTask","hyperparameters","learningRateMultiplier"],a),c(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(c(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(c(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const u=c(t,["batchSize"]);e!==void 0&&u!=null&&h(e,["tuningTask","hyperparameters","batchSize"],u);const d=c(t,["learningRate"]);if(e!==void 0&&d!=null&&h(e,["tuningTask","hyperparameters","learningRate"],d),c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(c(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function XM(t,e,n){const i={};let r=c(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const w=c(t,["validationDataset"]);e!==void 0&&w!=null&&h(e,["supervisedTuningSpec"],Jg(w))}else if(r==="PREFERENCE_TUNING"){const w=c(t,["validationDataset"]);e!==void 0&&w!=null&&h(e,["preferenceOptimizationSpec"],Jg(w))}const s=c(t,["tunedModelDisplayName"]);e!==void 0&&s!=null&&h(e,["tunedModelDisplayName"],s);const a=c(t,["description"]);e!==void 0&&a!=null&&h(e,["description"],a);let u=c(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const w=c(t,["epochCount"]);e!==void 0&&w!=null&&h(e,["supervisedTuningSpec","hyperParameters","epochCount"],w)}else if(u==="PREFERENCE_TUNING"){const w=c(t,["epochCount"]);e!==void 0&&w!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],w)}let d=c(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const w=c(t,["learningRateMultiplier"]);e!==void 0&&w!=null&&h(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],w)}else if(d==="PREFERENCE_TUNING"){const w=c(t,["learningRateMultiplier"]);e!==void 0&&w!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],w)}let f=c(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const w=c(t,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&h(e,["supervisedTuningSpec","exportLastCheckpointOnly"],w)}else if(f==="PREFERENCE_TUNING"){const w=c(t,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&h(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],w)}let m=c(n,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const w=c(t,["adapterSize"]);e!==void 0&&w!=null&&h(e,["supervisedTuningSpec","hyperParameters","adapterSize"],w)}else if(m==="PREFERENCE_TUNING"){const w=c(t,["adapterSize"]);e!==void 0&&w!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],w)}if(c(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(c(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const _=c(t,["labels"]);e!==void 0&&_!=null&&h(e,["labels"],_);const v=c(t,["beta"]);return e!==void 0&&v!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","beta"],v),i}function eL(t,e){const n={},i=c(t,["baseModel"]);i!=null&&h(n,["baseModel"],i);const r=c(t,["preTunedModel"]);r!=null&&h(n,["preTunedModel"],r);const s=c(t,["trainingDataset"]);s!=null&&dL(s);const a=c(t,["config"]);return a!=null&&QM(a,n),n}function tL(t,e){const n={},i=c(t,["baseModel"]);i!=null&&h(n,["baseModel"],i);const r=c(t,["preTunedModel"]);r!=null&&h(n,["preTunedModel"],r);const s=c(t,["trainingDataset"]);s!=null&&fL(s,n,e);const a=c(t,["config"]);return a!=null&&XM(a,n,e),n}function nL(t,e){const n={},i=c(t,["name"]);return i!=null&&h(n,["_url","name"],i),n}function iL(t,e){const n={},i=c(t,["name"]);return i!=null&&h(n,["_url","name"],i),n}function rL(t,e,n){const i={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const s=c(t,["pageToken"]);e!==void 0&&s!=null&&h(e,["_query","pageToken"],s);const a=c(t,["filter"]);return e!==void 0&&a!=null&&h(e,["_query","filter"],a),i}function oL(t,e,n){const i={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const s=c(t,["pageToken"]);e!==void 0&&s!=null&&h(e,["_query","pageToken"],s);const a=c(t,["filter"]);return e!==void 0&&a!=null&&h(e,["_query","filter"],a),i}function sL(t,e){const n={},i=c(t,["config"]);return i!=null&&rL(i,n),n}function aL(t,e){const n={},i=c(t,["config"]);return i!=null&&oL(i,n),n}function lL(t,e){const n={},i=c(t,["sdkHttpResponse"]);i!=null&&h(n,["sdkHttpResponse"],i);const r=c(t,["nextPageToken"]);r!=null&&h(n,["nextPageToken"],r);const s=c(t,["tunedModels"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>sw(u))),h(n,["tuningJobs"],a)}return n}function uL(t,e){const n={},i=c(t,["sdkHttpResponse"]);i!=null&&h(n,["sdkHttpResponse"],i);const r=c(t,["nextPageToken"]);r!=null&&h(n,["nextPageToken"],r);const s=c(t,["tuningJobs"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>Zc(u))),h(n,["tuningJobs"],a)}return n}function cL(t,e){const n={},i=c(t,["name"]);i!=null&&h(n,["model"],i);const r=c(t,["name"]);return r!=null&&h(n,["endpoint"],r),n}function dL(t,e){const n={};if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=c(t,["examples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>s)),h(n,["examples","examples"],r)}return n}function fL(t,e,n){const i={};let r=c(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const a=c(t,["gcsUri"]);e!==void 0&&a!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(r==="PREFERENCE_TUNING"){const a=c(t,["gcsUri"]);e!==void 0&&a!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}let s=c(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const a=c(t,["vertexDatasetResource"]);e!==void 0&&a!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(s==="PREFERENCE_TUNING"){const a=c(t,["vertexDatasetResource"]);e!==void 0&&a!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}if(c(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function sw(t,e){const n={},i=c(t,["sdkHttpResponse"]);i!=null&&h(n,["sdkHttpResponse"],i);const r=c(t,["name"]);r!=null&&h(n,["name"],r);const s=c(t,["state"]);s!=null&&h(n,["state"],V0(s));const a=c(t,["createTime"]);a!=null&&h(n,["createTime"],a);const u=c(t,["tuningTask","startTime"]);u!=null&&h(n,["startTime"],u);const d=c(t,["tuningTask","completeTime"]);d!=null&&h(n,["endTime"],d);const f=c(t,["updateTime"]);f!=null&&h(n,["updateTime"],f);const m=c(t,["description"]);m!=null&&h(n,["description"],m);const _=c(t,["baseModel"]);_!=null&&h(n,["baseModel"],_);const v=c(t,["_self"]);return v!=null&&h(n,["tunedModel"],cL(v)),n}function Zc(t,e){const n={},i=c(t,["sdkHttpResponse"]);i!=null&&h(n,["sdkHttpResponse"],i);const r=c(t,["name"]);r!=null&&h(n,["name"],r);const s=c(t,["state"]);s!=null&&h(n,["state"],V0(s));const a=c(t,["createTime"]);a!=null&&h(n,["createTime"],a);const u=c(t,["startTime"]);u!=null&&h(n,["startTime"],u);const d=c(t,["endTime"]);d!=null&&h(n,["endTime"],d);const f=c(t,["updateTime"]);f!=null&&h(n,["updateTime"],f);const m=c(t,["error"]);m!=null&&h(n,["error"],m);const _=c(t,["description"]);_!=null&&h(n,["description"],_);const v=c(t,["baseModel"]);v!=null&&h(n,["baseModel"],v);const w=c(t,["tunedModel"]);w!=null&&h(n,["tunedModel"],w);const x=c(t,["preTunedModel"]);x!=null&&h(n,["preTunedModel"],x);const P=c(t,["supervisedTuningSpec"]);P!=null&&h(n,["supervisedTuningSpec"],P);const I=c(t,["preferenceOptimizationSpec"]);I!=null&&h(n,["preferenceOptimizationSpec"],I);const C=c(t,["tuningDataStats"]);C!=null&&h(n,["tuningDataStats"],C);const T=c(t,["encryptionSpec"]);T!=null&&h(n,["encryptionSpec"],T);const S=c(t,["partnerModelTuningSpec"]);S!=null&&h(n,["partnerModelTuningSpec"],S);const N=c(t,["customBaseModel"]);N!=null&&h(n,["customBaseModel"],N);const R=c(t,["experiment"]);R!=null&&h(n,["experiment"],R);const M=c(t,["labels"]);M!=null&&h(n,["labels"],M);const O=c(t,["outputUri"]);O!=null&&h(n,["outputUri"],O);const z=c(t,["pipelineJob"]);z!=null&&h(n,["pipelineJob"],z);const q=c(t,["serviceAccount"]);q!=null&&h(n,["serviceAccount"],q);const G=c(t,["tunedModelDisplayName"]);G!=null&&h(n,["tunedModelDisplayName"],G);const j=c(t,["veoTuningSpec"]);return j!=null&&h(n,["veoTuningSpec"],j),n}function hL(t,e){const n={},i=c(t,["sdkHttpResponse"]);i!=null&&h(n,["sdkHttpResponse"],i);const r=c(t,["name"]);r!=null&&h(n,["name"],r);const s=c(t,["metadata"]);s!=null&&h(n,["metadata"],s);const a=c(t,["done"]);a!=null&&h(n,["done"],a);const u=c(t,["error"]);return u!=null&&h(n,["error"],u),n}function Jg(t,e){const n={},i=c(t,["gcsUri"]);i!=null&&h(n,["validationDatasetUri"],i);const r=c(t,["vertexDatasetResource"]);return r!=null&&h(n,["validationDatasetUri"],r),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pL extends En{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new Ii(yn.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(r.checkpointId=n.config.preTunedModelCheckpointId);const s=Object.assign(Object.assign({},n),{preTunedModel:r});return s.baseModel=void 0,await this.tuneInternal(s)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),s=await this.tuneMldevInternal(r);let a="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?a=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(a=s.name.split("/operations/")[0]),{name:a,state:qc.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,r,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=iL(e);return u=$("{name}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(_=>{const v=_;return v.sdkHttpResponse={headers:m.headers},v})),a.then(m=>Zc(m))}else{const f=nL(e);return u=$("{name}",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(_=>{const v=_;return v.sdkHttpResponse={headers:m.headers},v})),a.then(m=>sw(m))}}async listInternal(e){var n,i,r,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const f=aL(e);return u=$("tuningJobs",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(_=>{const v=_;return v.sdkHttpResponse={headers:m.headers},v})),a.then(m=>{const _=uL(m),v=new Pg;return Object.assign(v,_),v})}else{const f=sL(e);return u=$("tunedModels",f._url),d=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(_=>{const v=_;return v.sdkHttpResponse={headers:m.headers},v})),a.then(m=>{const _=lL(m),v=new Pg;return Object.assign(v,_),v})}}async cancel(e){var n,i,r,s;let a="",u={};if(this.apiClient.isVertexAI()){const d=jM(e);a=$("{name}:cancel",d._url),u=d._query,delete d._url,delete d._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const d=YM(e);a=$("{name}:cancel",d._url),u=d._query,delete d._url,delete d._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async tuneInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const u=tL(e,e);return s=$("tuningJobs",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>Zc(d))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=eL(e);return s=$("tunedModels",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>hL(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mL{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const gL=1024*1024*8,_L=3,vL=1e3,yL=2,qa="x-goog-upload-status";async function wL(t,e,n){var i;const r=await aw(t,e,n),s=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[qa])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return s.file}async function EL(t,e,n){var i;const r=await aw(t,e,n),s=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[qa])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const a=D0(s),u=new ff;return Object.assign(u,a),u}async function aw(t,e,n){var i,r;let s=0,a=0,u=new Hc(new Response),d="upload";for(s=t.size;a<s;){const f=Math.min(gL,s-a),m=t.slice(a,a+f);a+f>=s&&(d+=", finalize");let _=0,v=vL;for(;_<_L&&(u=await n.request({path:"",body:m,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(a),"Content-Length":String(f)}}}),!(!((i=u==null?void 0:u.headers)===null||i===void 0)&&i[qa]));)_++,await SL(v),v=v*yL;if(a+=f,((r=u==null?void 0:u.headers)===null||r===void 0?void 0:r[qa])!=="active")break;if(s<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return u}async function TL(t){return{size:t.size,type:t.type}}function SL(t){return new Promise(e=>setTimeout(e,t))}class CL{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await wL(e,n,i)}async uploadToFileSearchStore(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await EL(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await TL(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xL{create(e,n,i){return new PL(e,n,i)}}class PL{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Kg="x-goog-api-key";class AL{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(Kg)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Kg,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const IL="gl-node/";class kL{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=oI(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const r=new AL(this.apiKey);this.apiClient=new Gb({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:IL+"web",uploader:new CL,downloader:new mL}),this.models=new uM(this.apiClient),this.live=new iM(this.apiClient,r,new xL),this.batches=new Lk(this.apiClient),this.chats=new mR(this.models,this.apiClient),this.caches=new fR(this.apiClient),this.files=new xR(this.apiClient),this.operations=new cM(this.apiClient),this.authTokens=new PM(this.apiClient),this.tunings=new pL(this.apiClient),this.fileSearchStores=new ZM(this.apiClient)}}async function Zg(t){const e="AIzaSyBme_DzZj9VN3zLe2s_nOgePjuLxthiQGY",n=new kL({apiKey:e}),i=["gemini-2.5-flash"];for(const r of i)try{return console.log(`Trying model: ${r}`),await RL(n,t,r)}catch(s){if(console.warn(`Model ${r} failed:`,s.message),r===i[i.length-1])return console.warn("All models failed, using fallback recommendations"),Yc(t);continue}}async function RL(t,e,n){var i,r,s,a,u,d;try{const m=[{role:"user",parts:[{text:`You are an environmental expert. Based on the following air quality data for ${e.city}, provide a comprehensive tree planting recommendation to improve air quality.

Current Air Quality Data:
- City: ${e.city}
- Current AQI: ${e.aqi||"N/A"}
- PM2.5: ${e.pm25||"N/A"} g/m
- PM10: ${e.pm10||"N/A"} g/m
- CO: ${e.co||"N/A"} g/m
- NO2: ${e.no2||"N/A"} g/m
- SO2: ${e.so2||"N/A"} g/m
- O3: ${e.o3||"N/A"} g/m

IMPORTANT: All costs must be in Indian Rupees (INR/) only. Do not use USD or any other currency.
CRITICAL: Always include the rupee symbol () before the amount. Format example: "50,00,000" or "5,00,000".

Please provide a detailed analysis in the following JSON format (return ONLY valid JSON, no markdown, no code blocks):
{
  "summary": "Brief summary of current air quality situation",
  "recommendations": {
    "treeTypes": ["List of recommended tree species"],
    "numberOfTrees": "Estimated number of trees needed",
    "investmentAmount": "Total investment required in Indian Rupees with  symbol (e.g., 50,00,000)",
    "roi": {
      "timeframe": "Expected ROI timeframe (e.g., '5-7 years')",
      "benefits": "Description of ROI benefits"
    },
    "carbonAnalysis": {
      "annualCarbonSequestration": "Estimated CO2 sequestered per year in tons",
      "lifetimeCarbonSequestration": "Total CO2 sequestered over tree lifetime in tons",
      "airPollutionReduction": "Estimated reduction in air pollutants percentage"
    },
    "comparison": {
      "before": {
        "aqi": ${e.aqi||0},
        "pm25": ${e.pm25||0},
        "pm10": ${e.pm10||0},
        "description": "Current air quality status"
      },
      "after": {
        "aqi": "Projected AQI after 5 years of tree planting",
        "pm25": "Projected PM2.5 reduction percentage",
        "pm10": "Projected PM10 reduction percentage",
        "description": "Expected air quality improvement"
      },
      "improvement": "Percentage improvement expected"
    },
    "implementation": {
      "phases": ["Phase 1 description", "Phase 2 description", "Phase 3 description"],
      "timeline": "Total implementation timeline",
      "maintenance": "Annual maintenance cost in Indian Rupees with  symbol (e.g., 2,50,000)"
    }
  }
}`}]}],_=await t.models.generateContent({model:n,contents:m});let v="";if(_[Symbol.asyncIterator])for await(const P of _)v+=P.text??"";else v=_.text??((u=(a=(s=(r=(i=_.candidates)==null?void 0:i[0])==null?void 0:r.content)==null?void 0:s.parts)==null?void 0:a[0])==null?void 0:u.text)??"";let w=null;const x=v.match(/```(?:json)?\s*([\s\S]*?)\s*```/)||v.match(/\{[\s\S]*\}/);if(x){const P=x[1]||x[0];try{w=JSON.parse(P)}catch{try{w=JSON.parse(v)}catch(C){return console.error("Failed to parse AI response as JSON:",C),console.log("Raw AI response:",v),Yc(e)}}}else try{w=JSON.parse(v)}catch(P){return console.error("Failed to parse AI response:",P),console.log("Raw AI response:",v),Yc(e)}return console.log(`Successfully got recommendations from ${n}`),w.recommendations&&(w.recommendations.investmentAmount&&(w.recommendations.investmentAmount=Yg(w.recommendations.investmentAmount)),(d=w.recommendations.implementation)!=null&&d.maintenance&&(w.recommendations.implementation.maintenance=Yg(w.recommendations.implementation.maintenance))),w}catch(f){console.error(`Error fetching AI recommendations with ${n}:`,f);const m=f.message||f.toString();throw m.includes("404")||m.includes("not found")||m.includes("NOT_FOUND")||m.includes("does not exist")||m.includes("Model")&&m.includes("not available")?new Error(`Model ${n} not available`):f}}function Yg(t){if(!t||t==="N/A")return"N/A";const e=String(t);return e.includes("")?e:`${e.replace(/[$]|USD|INR/gi,"").trim()}`}function Yc(t){const e=t.aqi||100,n=Math.ceil(e/2)*100,r=n*4e3,s=Math.max(0,e-e*.3);return{summary:`Current air quality in ${t.city} shows an AQI of ${e}. Tree planting can significantly improve air quality. Based on environmental research, planting ${n} trees can reduce air pollution by 25-35% over 5 years.`,recommendations:{treeTypes:["Neem","Peepal","Banyan","Mango","Jamun","Gulmohar"],numberOfTrees:n.toString(),investmentAmount:`${r.toLocaleString("en-IN")}`,roi:{timeframe:"5-7 years",benefits:"Improved air quality, reduced healthcare costs, increased property values, carbon sequestration, and environmental benefits."},carbonAnalysis:{annualCarbonSequestration:`${(n*.02).toFixed(1)}`,lifetimeCarbonSequestration:`${(n*.5).toFixed(1)}`,airPollutionReduction:"25-35%"},comparison:{before:{aqi:e,pm25:t.pm25||0,pm10:t.pm10||0,description:"Current air quality status"},after:{aqi:s.toFixed(0),pm25:"20-30% reduction",pm10:"25-35% reduction",description:"Expected improvement after 5 years of tree planting"},improvement:"30%"},implementation:{phases:["Phase 1: Site preparation and initial planting (Year 1) - Focus on high-pollution areas","Phase 2: Expansion and maintenance (Years 2-3) - Expand coverage and establish care routines","Phase 3: Full ecosystem establishment (Years 4-5) - Mature trees providing maximum benefits"],timeline:"5 years",maintenance:`${(r*.05).toLocaleString("en-IN")}`}}}}function jg(t){if(!t||t==="N/A")return"N/A";let e=String(t);e=e.replace(/[$]|USD|INR/gi,"").trim();const n=e.replace(/[, ]/g,""),i=parseFloat(n);return isNaN(i)?e.includes("")?e:`${e}`:`${i.toLocaleString("en-IN")}`}function NL({aqiData:t,enabled:e}){var _,v,w,x,P,I,C,T,S,N;const[n,i]=U.useState(null),[r,s]=U.useState(!1),[a,u]=U.useState(null),d=U.useRef(!1),f=U.useRef(null);U.useEffect(()=>{if(e&&t&&t.aqi!==null){const R=`${t.city}-${t.aqi}`;f.current!==R&&(d.current=!1,f.current=R),d.current||(d.current=!0,(async()=>{s(!0),u(null),i(null);try{const O=await Zg(t);i(O)}catch(O){u(O.message||"Failed to fetch AI recommendations"),d.current=!1}finally{s(!1)}})())}else e||(i(null),d.current=!1,f.current=null)},[t==null?void 0:t.city,t==null?void 0:t.aqi,e]);const m=async()=>{d.current=!1,s(!0),u(null),i(null);try{const R=await Zg(t);i(R),d.current=!0}catch(R){u(R.message||"Failed to fetch AI recommendations"),d.current=!1}finally{s(!1)}};return!e||!t||t.aqi===null?null:A.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mt-6",children:[A.jsxs("div",{className:"flex items-center justify-between mb-6",children:[A.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:" Enhanced Prediction"}),A.jsx("button",{onClick:m,disabled:r,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-400 transition-colors text-sm",children:r?"Loading...":"Refresh"})]}),a&&A.jsx(L0,{message:a}),r&&A.jsx(M0,{}),n&&!r&&A.jsxs("div",{className:"space-y-6",children:[A.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:A.jsx("p",{className:"text-gray-700",children:n.summary})}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[A.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[A.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[A.jsx("span",{className:"text-2xl",children:""}),A.jsx("h3",{className:"font-semibold text-gray-800",children:"Trees Needed"})]}),A.jsx("p",{className:"text-3xl font-bold text-green-700",children:((_=n.recommendations)==null?void 0:_.numberOfTrees)||"N/A"})]}),A.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4 border border-yellow-200",children:[A.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[A.jsx("span",{className:"text-2xl",children:""}),A.jsx("h3",{className:"font-semibold text-gray-800",children:"Investment"})]}),A.jsx("p",{className:"text-3xl font-bold text-yellow-700",children:jg((v=n.recommendations)==null?void 0:v.investmentAmount)})]}),A.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[A.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[A.jsx("span",{className:"text-2xl",children:""}),A.jsx("h3",{className:"font-semibold text-gray-800",children:"ROI Timeframe"})]}),A.jsx("p",{className:"text-2xl font-bold text-purple-700",children:((x=(w=n.recommendations)==null?void 0:w.roi)==null?void 0:x.timeframe)||"N/A"})]})]}),((P=n.recommendations)==null?void 0:P.treeTypes)&&A.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[A.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"Recommended Tree Species"}),A.jsx("div",{className:"flex flex-wrap gap-2",children:n.recommendations.treeTypes.map((R,M)=>A.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium",children:R},M))})]}),((I=n.recommendations)==null?void 0:I.carbonAnalysis)&&A.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-lg p-5 border border-green-200",children:[A.jsx("h3",{className:"font-semibold text-gray-800 mb-4 text-lg",children:" Carbon Analysis"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[A.jsxs("div",{children:[A.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Annual CO Sequestration"}),A.jsxs("p",{className:"text-xl font-bold text-green-700",children:[n.recommendations.carbonAnalysis.annualCarbonSequestration," tons/year"]})]}),A.jsxs("div",{children:[A.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Lifetime CO Sequestration"}),A.jsxs("p",{className:"text-xl font-bold text-blue-700",children:[n.recommendations.carbonAnalysis.lifetimeCarbonSequestration," tons"]})]}),A.jsxs("div",{children:[A.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Air Pollution Reduction"}),A.jsx("p",{className:"text-xl font-bold text-purple-700",children:n.recommendations.carbonAnalysis.airPollutionReduction})]})]})]}),((C=n.recommendations)==null?void 0:C.comparison)&&A.jsxs("div",{className:"bg-gradient-to-r from-red-50 to-green-50 rounded-lg p-5 border-2 border-gray-200",children:[A.jsx("h3",{className:"font-semibold text-gray-800 mb-4 text-lg",children:" Before & After Comparison"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[A.jsxs("div",{className:"bg-white rounded-lg p-4 border-2 border-red-200",children:[A.jsx("h4",{className:"font-semibold text-red-700 mb-3",children:"Before Planting"}),A.jsxs("div",{className:"space-y-2",children:[A.jsxs("div",{className:"flex justify-between",children:[A.jsx("span",{className:"text-gray-600",children:"AQI:"}),A.jsx("span",{className:"font-bold text-red-600",children:n.recommendations.comparison.before.aqi})]}),A.jsxs("div",{className:"flex justify-between",children:[A.jsx("span",{className:"text-gray-600",children:"PM2.5:"}),A.jsxs("span",{className:"font-semibold",children:[n.recommendations.comparison.before.pm25," g/m"]})]}),A.jsxs("div",{className:"flex justify-between",children:[A.jsx("span",{className:"text-gray-600",children:"PM10:"}),A.jsxs("span",{className:"font-semibold",children:[n.recommendations.comparison.before.pm10," g/m"]})]}),A.jsx("p",{className:"text-sm text-gray-500 mt-2",children:n.recommendations.comparison.before.description})]})]}),A.jsxs("div",{className:"bg-white rounded-lg p-4 border-2 border-green-200",children:[A.jsx("h4",{className:"font-semibold text-green-700 mb-3",children:"After 5 Years"}),A.jsxs("div",{className:"space-y-2",children:[A.jsxs("div",{className:"flex justify-between",children:[A.jsx("span",{className:"text-gray-600",children:"AQI:"}),A.jsx("span",{className:"font-bold text-green-600",children:n.recommendations.comparison.after.aqi})]}),A.jsxs("div",{className:"flex justify-between",children:[A.jsx("span",{className:"text-gray-600",children:"PM2.5:"}),A.jsx("span",{className:"font-semibold text-green-600",children:n.recommendations.comparison.after.pm25})]}),A.jsxs("div",{className:"flex justify-between",children:[A.jsx("span",{className:"text-gray-600",children:"PM10:"}),A.jsx("span",{className:"font-semibold text-green-600",children:n.recommendations.comparison.after.pm10})]}),A.jsx("p",{className:"text-sm text-gray-500 mt-2",children:n.recommendations.comparison.after.description})]})]})]}),A.jsx("div",{className:"mt-4 text-center",children:A.jsxs("div",{className:"inline-block bg-green-100 px-6 py-3 rounded-lg",children:[A.jsx("span",{className:"text-sm text-gray-600 mr-2",children:"Expected Improvement:"}),A.jsx("span",{className:"text-2xl font-bold text-green-700",children:n.recommendations.comparison.improvement})]})})]}),((T=n.recommendations)==null?void 0:T.roi)&&A.jsxs("div",{className:"bg-indigo-50 rounded-lg p-4 border border-indigo-200",children:[A.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:" ROI Benefits"}),A.jsx("p",{className:"text-gray-700",children:n.recommendations.roi.benefits})]}),((S=n.recommendations)==null?void 0:S.implementation)&&A.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[A.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:" Implementation Plan"}),A.jsx("div",{className:"space-y-2 mb-3",children:(N=n.recommendations.implementation.phases)==null?void 0:N.map((R,M)=>A.jsxs("div",{className:"flex items-start gap-2",children:[A.jsxs("span",{className:"text-blue-600 font-bold",children:[M+1,"."]}),A.jsx("p",{className:"text-gray-700",children:R})]},M))}),A.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-200",children:[A.jsxs("div",{children:[A.jsx("span",{className:"text-sm text-gray-600",children:"Timeline: "}),A.jsx("span",{className:"font-semibold",children:n.recommendations.implementation.timeline})]}),A.jsxs("div",{children:[A.jsx("span",{className:"text-sm text-gray-600",children:"Annual Maintenance: "}),A.jsx("span",{className:"font-semibold text-green-700",children:jg(n.recommendations.implementation.maintenance)})]})]})]})]})]})}const bL="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",ML="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC",LL="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABSCAMAAAAhFXfZAAAC91BMVEVMaXEzeak2f7I4g7g3g7cua5gzeKg8hJo3grY4g7c3grU0gLI2frE0daAubJc2gbQwd6QzeKk2gLMtd5sxdKIua5g1frA2f7IydaM0e6w2fq41fK01eqo3grgubJgta5cxdKI1f7AydaQydaMxc6EubJgvbJkwcZ4ubZkwcJwubZgubJcydqUydKIxapgubJctbJcubZcubJcvbJYubJcvbZkubJctbJctbZcubJg2f7AubJcrbZcubJcubJcua5g3grY0fq8ubJcubJdEkdEwhsw6i88vhswuhcsuhMtBjMgthMsrg8srgss6is8qgcs8i9A9iMYtg8spgcoogMo7hcMngMonf8olfso4gr8kfck5iM8jfMk4iM8he8k1fro7itAgesk2hs8eecgzfLcofssdeMg0hc4cd8g2hcsxeLQbdsgZdcgxeLImfcszhM0vda4xgckzhM4xg84wf8Yxgs4udKsvfcQucqhUndROmdM1fK0wcZ8vb5w0eqpQm9MzeKhXoNVcpdYydKNWn9VZotVKltJFjsIwcJ1Rms9OlslLmtH///8+kc9epdYzd6dbo9VHkMM2f7FHmNBClM8ydqVcpNY9hro3gLM9hLczealQmcw3fa46f7A8gLMxc6I3eagyc6FIldJMl9JSnNRSntNNl9JPnNJFi75UnM9ZodVKksg8kM45jc09e6ZHltFBk883gbRBh7pDk9EwcaBzn784g7dKkcY2i81Om9M7j85Llc81is09g7Q4grY/j9A0eqxKmdFFltBEjcXf6fFImdBCiLxJl9FGlNFBi78yiMxVndEvbpo6js74+vx+psPP3+o/ks5HkcpGmNCjwdZCkNDM3ehYoNJEls+lxNkxh8xHks0+jdC1zd5Lg6r+/v/H2ufz9/o3jM3t8/edvdM/k89Th61OiLBSjbZklbaTt9BfptdjmL1AicBHj8hGk9FAgK1dkLNTjLRekrdClc/k7fM0icy0y9tgp9c4jc2NtM9Dlc8zicxeXZn3AAAAQ3RSTlMAHDdTb4yPA+LtnEQmC4L2EmHqB7XA0d0sr478x4/Yd5i1zOfyPkf1sLVq4Nh3FvjxopQ2/STNuFzUwFIwxKaejILpIBEV9wAABhVJREFUeF6s1NdyFEcYBeBeoQIhRAkLlRDGrhIgY3BJL8CVeKzuyXFzzjkn5ZxzzuScg3PO8cKzu70JkO0LfxdTU//pM9vTu7Xgf6KqOVTb9X7toRrVEfBf1HTVjZccrT/2by1VV928Yty9ZbVuucdz90frG8DBjl9pVApbOstvmMuvVgaNXSfAAd6pGxpy6yxf5ph43pS/4f3uoaGm2rdu72S9xzOvMymkZFq/ptDrk90mhW7e4zl7HLzhxGWPR20xmSxJ/VqldG5m9XhaVOA1DadsNh3Pu5L2N6QtPO/32JpqQBVVk20oy/Pi2s23WEvyfHbe1thadVQttvm7Llf65gGmXK67XtupyoM7HQhmXdLS8oGWJNeOJ3C5fG5XCEJnkez3/oFdsvgJ4l2ANZwhrJKk/7OSXa+3Vw2WJMlKnGkobouYk6T0TyX30klOUnTD9HJ5qpckL3EW/w4XF3Xd0FGywXUrstrclVsqz5Pd/sXFYyDnPdrLcQODmGOK47IZb4CmibmMn+MYRzFZ5jg33ZL/EJrWcszHmANy3ARBK/IXtciJy8VsitPSdE3uuHxzougojcUdr8/32atnz/ev3f/K5wtpxUTpcaI45zusVDpYtZi+jg0oU9b3x74h7+n9ABvYEZeKaVq0sh0AtLKsFtqNBdeT0MrSzwwlq9+x6xAO4tgOtSzbCjrNQQiNvQUbUEubvzBUeGw26yDCsRHCoLkTHDa7IdOLIThs/gHvChszh2CimE8peRs47cxANI0lYNB5y1DljpOF0IhzBDPOZnDOqYYbeGKECbPzWnXludPphw5c2YBq5zlwXphIbO4VDCZ0gnPfUO1TwZoYwAs2ExPCedAu9DAjfQUjzITQb3jNj0KG2Sgt6BHaQUdYzWz+XmBktOHwanXjaSTcwwziBcuMOtwBmqPrTOxFQR/DRKKPqyur0aiW6cULYsx6tBm0jXpR/AUWR6HRq9WVW6MRhIq5jLyjbaCTDCijyYJNpCajdyobP/eTw0iexBAKkJ3gA5KcQb2zBXsIBckn+xVv8jkZSaEFHE+jFEleAEfayRU0MouNoBmB/L50Ai/HSLIHxcrpCvnhSQAuakKp2C/YbCylJjXRVy/z3+Kv/RrNcCo+WUzlVEhzKffnTQnxeN9fWF88fiNCUdSTsaufaChKWInHeysygfpIqagoakW+vV20J8uyl6TyNKEZWV4oRSPyCkWpgOLSbkCObT8o2r6tlG58HQquf6O0v50tB7JM7F4EORd2dx/K0w/KHsVkLPaoYrwgP/y7krr3SSMA4zj+OBgmjYkxcdIJQyQRKgg2viX9Hddi9UBb29LrKR7CVVEEEXWojUkXNyfTNDE14W9gbHJNuhjDettN3ZvbOvdOqCD3Jp/9l+/wJE+9PkYGjx/fqkys3S2rMozM/o2106rfMUINo6hVqz+eu/hd1c4xTg0TAfy5kV+4UG6+IthHTU9woWmxuKNbTfuCSfovBCxq7EtHqvYL4Sm6F8GVxsSXHMQ07TOi1DKtZxjWaaIyi4CXWjxPccUw8WVbMYY5wxC1mzEyXMJWkllpRloi+Kkoq69sxBTlElF6aAxYUbjXNlhlDZilDnM4U5SlN5biRsRHnbx3mbeWjEh4mEyiuJDl5XcWVmX5GvNkFgLWZM5qwsop4/AWfLhU1cR7k1VVvcYCWRkOI6Xy5gmnphCYIkvzuNYzHzosq2oNk2RtSs8khfUOfHIDgR6ysYBaMpl4uEgk2U/oJTs9AaTSwma7dT69geAE2ZpEjUsn2ieJNHeKfrI3EcAGJ2ZaNgVuC8EBctCLc57P5u5led6IOBkIYkuQMrmmjChs4VkfOerHqSBkPzZlhe06RslZ3zMjk2sscqKwY0RcjKK+LWbzd7KiHhkncs/siFJ+V5eXxD34B8nVuJEpGJNmxN2gH3vSvp7J70tF+D1Ej8qUJD1TkErAND2GZwTFg/LubvmgiBG3SOvdlsqFQrkEzJCL1rstlnVFROixZoDDSuXQFHESwVGlcuQcMb/b42NgjLowh5MTDFE3vNB5qStRIErdCQEh6pLPR92anSUb/wAIhldAaDMpGgAAAABJRU5ErkJggg==",DL=af.icon({iconUrl:bL,iconRetinaUrl:LL,shadowUrl:ML,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]});af.Marker.prototype.options.icon=DL;function OL({onBoundsChange:t}){return YA({moveend:e=>{const i=e.target.getBounds(),r=i.getSouthWest(),s=i.getNorthEast();t(r.lat,r.lng,s.lat,s.lng)}}),null}function UL(){const t=b0();return U.useEffect(()=>{const e=setTimeout(()=>{t.invalidateSize()},100);return()=>clearTimeout(e)},[t]),U.useEffect(()=>{const e=()=>{t.invalidateSize()};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[t]),null}function FL(){const[t,e]=U.useState(""),[n,i]=U.useState(null),[r,s]=U.useState([]),[a,u]=U.useState(!1),[d,f]=U.useState(!1),[m,_]=U.useState(null),[v,w]=U.useState(!1),x=async()=>{if(!t.trim()){_("Please enter a city name");return}u(!0),_(null),i(null),s([]);try{const R=await tI(t.trim());i(R),R.coordinates&&P(R.coordinates.lat,R.coordinates.lon)}catch(R){_(R.message||"Failed to fetch AQI data. Please try again.")}finally{u(!1)}},P=async(R,M)=>{const O=R-.5,z=M-.5,q=R+.5,G=M+.5;f(!0);try{const j=await Sm(O,z,q,G);s(j)}catch(j){console.error("Error fetching stations:",j)}finally{f(!1)}},I=async(R,M,O,z)=>{if(!d){f(!0);try{const q=await Sm(R,M,O,z);s(q)}catch(q){console.error("Error fetching stations:",q)}finally{f(!1)}}},C=R=>R?R<=50?"text-green-600":R<=100?"text-yellow-600":R<=150?"text-orange-600":R<=200?"text-red-600":R<=300?"text-purple-600":"text-red-800":"text-gray-500",T=R=>R?R<=50?"Good":R<=100?"Moderate":R<=150?"Unhealthy for Sensitive":R<=200?"Unhealthy":R<=300?"Very Unhealthy":"Hazardous":"N/A",S=R=>R?R<=50?"#10B981":R<=100?"#F59E0B":R<=150?"#F97316":R<=200?"#EF4444":R<=300?"#8B5CF6":"#7F1D1D":"#6B7280",N=R=>{const M=S(R);return af.divIcon({className:"custom-marker",html:`<div style="background-color: ${M}; width: 30px; height: 30px; border-radius: 50%; border: 3px solid white; box-shadow: 0 2px 4px rgba(0,0,0,0.3); display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 12px;">${R||"N/A"}</div>`,iconSize:[30,30],iconAnchor:[15,15]})};return A.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-8",children:A.jsxs("div",{className:"container mx-auto px-4",children:[A.jsx("h1",{className:"text-4xl font-bold text-gray-800 text-center mb-8",children:"Air Quality Dashboard"}),A.jsx("div",{className:"max-w-2xl mx-auto mb-8",children:A.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[A.jsxs("div",{className:"flex gap-4 items-center",children:[A.jsx("input",{type:"text",value:t,onChange:R=>e(R.target.value),onKeyPress:R=>R.key==="Enter"&&x(),placeholder:"Enter city name (e.g., beijing, london, delhi)",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),A.jsx("button",{onClick:x,disabled:a,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:a?"Loading...":"Search"})]}),A.jsxs("div",{className:"mt-4 flex items-center gap-3",children:[A.jsxs("label",{className:"flex items-center cursor-pointer",children:[A.jsx("input",{type:"checkbox",checked:v,onChange:R=>w(R.target.checked),className:"sr-only"}),A.jsx("div",{className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${v?"bg-green-600":"bg-gray-300"}`,children:A.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${v?"translate-x-6":"translate-x-1"}`})}),A.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:" Enhanced Prediction"})]}),A.jsx("span",{className:"text-xs text-gray-500",children:"(AI-powered tree planting recommendations)"})]})]})}),m&&A.jsx(L0,{message:m}),a&&A.jsx(M0,{}),n&&!a&&A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[A.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:n.city}),A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsx("div",{className:`text-6xl font-bold ${C(n.aqi)}`,children:n.aqi||"N/A"}),A.jsxs("div",{children:[A.jsx("p",{className:"text-xl font-semibold text-gray-700",children:T(n.aqi)}),A.jsx("p",{className:"text-gray-500",children:"Air Quality Index"})]})]})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[A.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-4",children:[A.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Pollutants"}),A.jsxs("div",{className:"space-y-3",children:[A.jsxs("div",{className:"flex justify-between",children:[A.jsx("span",{className:"text-gray-600",children:"PM2.5:"}),A.jsxs("span",{className:"font-semibold",children:[n.pm25||"N/A"," g/m"]})]}),A.jsxs("div",{className:"flex justify-between",children:[A.jsx("span",{className:"text-gray-600",children:"PM10:"}),A.jsxs("span",{className:"font-semibold",children:[n.pm10||"N/A"," g/m"]})]}),A.jsxs("div",{className:"flex justify-between",children:[A.jsx("span",{className:"text-gray-600",children:"CO:"}),A.jsxs("span",{className:"font-semibold",children:[n.co||"N/A"," g/m"]})]}),A.jsxs("div",{className:"flex justify-between",children:[A.jsx("span",{className:"text-gray-600",children:"NO:"}),A.jsxs("span",{className:"font-semibold",children:[n.no2||"N/A"," g/m"]})]}),A.jsxs("div",{className:"flex justify-between",children:[A.jsx("span",{className:"text-gray-600",children:"SO:"}),A.jsxs("span",{className:"font-semibold",children:[n.so2||"N/A"," g/m"]})]}),A.jsxs("div",{className:"flex justify-between",children:[A.jsx("span",{className:"text-gray-600",children:"O:"}),A.jsxs("span",{className:"font-semibold",children:[n.o3||"N/A"," g/m"]})]})]})]}),A.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-4",children:[A.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Weather"}),A.jsxs("div",{className:"space-y-3",children:[A.jsxs("div",{className:"flex justify-between",children:[A.jsx("span",{className:"text-gray-600",children:"Temperature:"}),A.jsx("span",{className:"font-semibold",children:n.temp!==null?`${n.temp}C`:"N/A"})]}),A.jsxs("div",{className:"flex justify-between",children:[A.jsx("span",{className:"text-gray-600",children:"Humidity:"}),A.jsx("span",{className:"font-semibold",children:n.humidity!==null?`${n.humidity}%`:"N/A"})]}),A.jsxs("div",{className:"flex justify-between",children:[A.jsx("span",{className:"text-gray-600",children:"Wind Speed:"}),A.jsx("span",{className:"font-semibold",children:n.wind!==null?`${n.wind} m/s`:"N/A"})]})]})]}),A.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-4",children:[A.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Forecast"}),A.jsx("div",{className:"space-y-3",children:A.jsxs("div",{children:[A.jsx("p",{className:"text-gray-600 mb-2",children:"Next Hour AQI:"}),A.jsx("p",{className:`text-3xl font-bold ${C(n.forecast_next_hour)}`,children:n.forecast_next_hour!==null?n.forecast_next_hour:"N/A"}),A.jsx("p",{className:"text-sm text-gray-500 mt-1",children:n.forecast_next_hour!==null?T(n.forecast_next_hour):"No forecast available"})]})})]})]}),n.coordinates&&n.coordinates.lat&&n.coordinates.lon&&A.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-4",children:[A.jsxs("div",{className:"flex items-center justify-between mb-4",children:[A.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Air Quality Heatmap"}),d&&A.jsx("span",{className:"text-sm text-gray-500",children:"Loading stations..."}),!d&&r.length>0&&A.jsxs("span",{className:"text-sm text-gray-600",children:[r.length," station",r.length!==1?"s":""," found"]})]}),A.jsx("div",{className:"h-96 w-full rounded-lg overflow-hidden relative",style:{minHeight:"384px",position:"relative"},id:"map-container",children:A.jsxs(QA,{center:[n.coordinates.lat,n.coordinates.lon],zoom:10,scrollWheelZoom:!0,style:{height:"100%",width:"100%",zIndex:0},children:[A.jsx(Em,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:19,minZoom:1}),A.jsx(Em,{url:n.heatmap_tile,attribution:' <a href="https://aqicn.org">AQICN</a>',maxZoom:18,minZoom:1,opacity:.7}),A.jsx(UL,{}),A.jsx(OL,{onBoundsChange:I}),A.jsx(ym,{position:[n.coordinates.lat,n.coordinates.lon],icon:N(n.aqi),children:A.jsx(wm,{children:A.jsxs("div",{children:[A.jsx("strong",{children:n.city}),A.jsx("br",{}),"AQI: ",n.aqi||"N/A"," - ",T(n.aqi),n.pm25&&A.jsxs(A.Fragment,{children:[A.jsx("br",{}),"PM2.5: ",n.pm25," g/m"]}),n.pm10&&A.jsxs(A.Fragment,{children:[A.jsx("br",{}),"PM10: ",n.pm10," g/m"]})]})})}),r.map(R=>{var M,O,z,q,G,j;return A.jsx(ym,{position:[R.lat,R.lon],icon:N(R.aqi),children:A.jsx(wm,{children:A.jsxs("div",{children:[A.jsx("strong",{children:((M=R.station)==null?void 0:M.name)||"Station"}),A.jsx("br",{}),"AQI: ",R.aqi||"N/A"," - ",T(R.aqi),((z=(O=R.iaqi)==null?void 0:O.pm25)==null?void 0:z.v)&&A.jsxs(A.Fragment,{children:[A.jsx("br",{}),"PM2.5: ",R.iaqi.pm25.v," g/m"]}),((G=(q=R.iaqi)==null?void 0:q.pm10)==null?void 0:G.v)&&A.jsxs(A.Fragment,{children:[A.jsx("br",{}),"PM10: ",R.iaqi.pm10.v," g/m"]}),((j=R.station)==null?void 0:j.time)&&A.jsxs(A.Fragment,{children:[A.jsx("br",{}),A.jsxs("small",{children:["Updated: ",new Date(R.station.time).toLocaleString()]})]})]})})},R.uid)})]},`${n.coordinates.lat}-${n.coordinates.lon}`)})]}),A.jsx(NL,{aqiData:n,enabled:v})]})]})})}function BL(){const[t,e]=U.useState(""),[n,i]=U.useState(""),[r,s]=U.useState(""),[a,u]=U.useState(!1),{signIn:d}=ul(),f=es(),m=async _=>{_.preventDefault(),s(""),u(!0);try{const{error:v}=await d(t,n);v?s(v.message):f("/aqi")}catch{s("An unexpected error occurred. Please try again.")}finally{u(!1)}};return A.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:A.jsxs("div",{className:"max-w-md w-full space-y-8",children:[A.jsxs("div",{children:[A.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sign in to your account"}),A.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Or"," ",A.jsx(bn,{to:"/signup",className:"font-medium text-blue-600 hover:text-blue-500",children:"create a new account"})]})]}),A.jsxs("form",{className:"mt-8 space-y-6",onSubmit:m,children:[A.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"email-address",className:"sr-only",children:"Email address"}),A.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:_=>e(_.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Email address"})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),A.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:n,onChange:_=>i(_.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Password"})]})]}),r&&A.jsx("div",{className:"rounded-md bg-red-50 p-4",children:A.jsx("div",{className:"flex",children:A.jsx("div",{className:"ml-3",children:A.jsx("h3",{className:"text-sm font-medium text-red-800",children:r})})})}),A.jsx("div",{children:A.jsx("button",{type:"submit",disabled:a,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:a?"Signing in...":"Sign in"})})]})]})})}function zL(){const[t,e]=U.useState(""),[n,i]=U.useState(""),[r,s]=U.useState(""),[a,u]=U.useState(""),[d,f]=U.useState(!1),[m,_]=U.useState(!1),{signUp:v}=ul(),w=es(),x=async P=>{if(P.preventDefault(),u(""),f(!1),n!==r){u("Passwords do not match");return}if(n.length<6){u("Password must be at least 6 characters long");return}_(!0);try{const{error:I}=await v(t,n);I?u(I.message):(f(!0),setTimeout(()=>{w("/aqi")},2e3))}catch{u("An unexpected error occurred. Please try again.")}finally{_(!1)}};return A.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:A.jsxs("div",{className:"max-w-md w-full space-y-8",children:[A.jsxs("div",{children:[A.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Create your account"}),A.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Or"," ",A.jsx(bn,{to:"/login",className:"font-medium text-blue-600 hover:text-blue-500",children:"sign in to your existing account"})]})]}),A.jsxs("form",{className:"mt-8 space-y-6",onSubmit:x,children:[A.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"email-address",className:"sr-only",children:"Email address"}),A.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:P=>e(P.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Email address"})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),A.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,value:n,onChange:P=>i(P.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Password (min. 6 characters)"})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"confirm-password",className:"sr-only",children:"Confirm Password"}),A.jsx("input",{id:"confirm-password",name:"confirm-password",type:"password",autoComplete:"new-password",required:!0,value:r,onChange:P=>s(P.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Confirm password"})]})]}),a&&A.jsx("div",{className:"rounded-md bg-red-50 p-4",children:A.jsx("div",{className:"flex",children:A.jsx("div",{className:"ml-3",children:A.jsx("h3",{className:"text-sm font-medium text-red-800",children:a})})})}),d&&A.jsx("div",{className:"rounded-md bg-green-50 p-4",children:A.jsx("div",{className:"flex",children:A.jsx("div",{className:"ml-3",children:A.jsx("h3",{className:"text-sm font-medium text-green-800",children:"Account created successfully! Redirecting..."})})})}),A.jsx("div",{children:A.jsx("button",{type:"submit",disabled:m,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:m?"Creating account...":"Sign up"})})]})]})})}function VL({children:t}){const{user:e,loading:n}=ul();return n?A.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:A.jsxs("div",{className:"text-center",children:[A.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),A.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):e?t:A.jsx(YC,{to:"/login",replace:!0})}function qL(){const{user:t,signOut:e}=ul(),n=es(),i=async()=>{await e(),n("/")};return A.jsx("nav",{className:"bg-white shadow-md",children:A.jsx("div",{className:"container mx-auto px-4 py-4",children:A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsx(bn,{to:"/",className:"text-2xl font-bold text-gray-800",children:"AQI Dashboard"}),A.jsxs("div",{className:"space-x-4 flex items-center",children:[A.jsx(bn,{to:"/",className:"text-gray-600 hover:text-gray-800 transition-colors",children:"Home"}),t?A.jsxs(A.Fragment,{children:[A.jsx(bn,{to:"/aqi",className:"text-blue-600 hover:text-blue-800 font-medium transition-colors",children:"Dashboard"}),A.jsx("span",{className:"text-gray-600",children:t.email}),A.jsx("button",{onClick:i,className:"text-red-600 hover:text-red-800 font-medium transition-colors",children:"Sign Out"})]}):A.jsxs(A.Fragment,{children:[A.jsx(bn,{to:"/login",className:"text-blue-600 hover:text-blue-800 font-medium transition-colors",children:"Login"}),A.jsx(bn,{to:"/signup",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Sign Up"})]})]})]})})})}function HL(){return A.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:[A.jsx(qL,{}),A.jsxs(QC,{children:[A.jsx(uo,{path:"/",element:A.jsx("div",{className:"container mx-auto px-4 py-16",children:A.jsxs("div",{className:"max-w-2xl mx-auto text-center",children:[A.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-8",children:"Welcome to AQI App"}),A.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 mb-8",children:[A.jsx("p",{className:"text-gray-600 mb-6",children:"Monitor air quality and weather data for cities around the world."}),A.jsx(bn,{to:"/aqi",className:"inline-block px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Go to Dashboard"})]})]})})}),A.jsx(uo,{path:"/login",element:A.jsx(BL,{})}),A.jsx(uo,{path:"/signup",element:A.jsx(zL,{})}),A.jsx(uo,{path:"/aqi",element:A.jsx(VL,{children:A.jsx(FL,{})})})]})]})}function GL(){return A.jsx(ox,{children:A.jsx(UA,{children:A.jsx(HL,{})})})}Ru.createRoot(document.getElementById("root")).render(A.jsx(Co.StrictMode,{children:A.jsx(GL,{})}));
